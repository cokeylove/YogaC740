C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 1   


C51 COMPILER V8.12, COMPILATION OF MODULE OEM_6064
OBJECT MODULE PLACED IN Code\Oem\OEM_6064.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE Code\Oem\OEM_6064.C LA WL(1) CD OT(9,SIZE) NOAREGS OR INCDIR(.\Code\CORE\IN
                    -CLUDE\;.\Code\OEM\INCLUDE\;.\Code\CHIP\INCLUDE\)

line level    source

   1          /*-----------------------------------------------------------------------------
   2           * TITLE: OEM_6064.C
   3           *
   4           * Author : Dino
   5           *
   6           * Note : These functions are reference only.
   7           *        Please follow your project software specification to do some modification.
   8           *---------------------------------------------------------------------------*/
   9          
  10          #include <CORE_INCLUDE.H>
  11          #include <OEM_INCLUDE.H>
  12          
  13          void Cmd_B4(void)
  14          {
  15   1              //Stop charger when EC and Bios flash
  16   1              SET_MASK(nStopChgStat3H, ECFLASH);
  17   1              FAN_PWM_OUT;            // Set FAN_PWM OUTPUT.
  18   1              EC_FAN_PWM_HI();        // Set FAN Full On.
  19   1      
  20   1              CHGIC_ptr = 2;          //reminder: call to write to SmartChg
  21   1              WriteSmartChgIC();
  22   1              RamProgram(00);
  23   1      }
  24          
  25          void GetData2(BYTE nPort)
  26          {
  27   1              TR1 = 0;                                        // Disable timer1
  28   1              ET1 = 0;                                        // Disable timer1 interrupt
  29   1              _nop_();
  30   1              _nop_();
  31   1              _nop_();
  32   1              _nop_();
  33   1              TH1 = Timer_20ms>>8;            // Set timer1 counter 20ms
  34   1              TL1 = Timer_20ms;                       // Set timer1 counter 20ms
  35   1              TF1 = 0;                                        // Clear overflow flag
  36   1              TR1 = 1;                                        // Enable timer1
  37   1      
  38   1              while (!TF1)
  39   1              {
  40   2                      if (nPort == 0x60)
  41   2                      {
  42   3                              if(IS_MASK_SET(KBHISR,IBF))
  43   3                              {
  44   4                                      if(IS_MASK_CLEAR(KBHISR,C_D))   // Data Port
  45   4                                      {
  46   5                                              CmdData2 = KBHIDIR;
  47   5                                      }
  48   4                                      TR1 = 0;                        // Disable timer 1
  49   4                                      TF1 = 0;                        // clear overflow flag
  50   4                                      ET1 = 1;                        // Enable timer1 interrupt
  51   4                                      return;
  52   4                              }
  53   3                      }
  54   2                      else if (nPort == 0x62)
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 2   

  55   2                      {
  56   3                              if(IS_MASK_SET(PM1STS,IBF))
  57   3                              {
  58   4                                      if(IS_MASK_CLEAR(PM1STS,C_D))   // Data Port
  59   4                                      {
  60   5                                              CmdData2 = PM1DI;
  61   5                                      }
  62   4                                      TR1 = 0;                        // Disable timer 1
  63   4                                      TF1 = 0;                        // clear overflow flag
  64   4                                      ET1 = 1;                        // Enable timer1 interrupt
  65   4                                      return;
  66   4                              }
  67   3                      }
  68   2              }
  69   1              TR1 = 0;                                        // Disable timer 1
  70   1              TF1 = 0;                                        // clear overflow flag
  71   1              ET1 = 1;                                        // Enable timer1 interrupt
  72   1      }
  73          
  74          
  75          //----------------------------------------------------------------------------
  76          // The function of 60 port
  77          //  Note :
  78          //  KBHIStep != 0x00 is necessary.
  79          //----------------------------------------------------------------------------
  80          void Hook_60Port(BYTE KBHICmd)
  81          {
  82   1              BYTE i;
  83   1      
  84   1              switch(KBHICmd)
  85   1              {
  86   2              case 0x40:
  87   2                      Cmd_40(KBHIData);
  88   2                      break;
  89   2              case 0x41:
  90   2                      if(KBHIData==0xA0) Cmd_41_A0(0x60);
  91   2                      if(KBHIData==0xA1) Cmd_41_A1(0x60);
  92   2                      if(KBHIData==0xA2) Cmd_41_A2(0x60);
  93   2                      if(KBHIData==0xA3) Cmd_41_A3(0x60);
  94   2                      break;
  95   2              case 0x42:
  96   2                      Cmd_42(KBHIData);
  97   2                      break;
  98   2              case 0x43:
  99   2                      Cmd_43(0x60,KBHIData);
 100   2                      break;
 101   2              case 0x45:
 102   2                      Cmd_45(0x60,KBHIData);
 103   2                      break;
 104   2      
 105   2              case 0x46:
 106   2                      Cmd_46(0x60,KBHIData);
 107   2                      break;
 108   2              case 0x47:
 109   2                      Cmd_47(0x60,KBHIData);
 110   2                      break;
 111   2              case 0x49:
 112   2                      break;
 113   2              case 0x4B:
 114   2                      if (KBHIStep == 0x04)
 115   2                      {
 116   3                              i = KBHIData;
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 3   

 117   3                              break;
 118   3                      }
 119   2                      if (KBHIStep == 0x03)
 120   2                      {
 121   3                              eEEPROMAddrsss = KBHIData;
 122   3                              if ( eEEPROMAddrsss == 0xE0 )   // Check MBID address low byte.
 123   3                              { 
 124   4                                      SET_MASK(MBID_Reload, b0MBID_High); 
 125   4                  }
 126   3                              break;
 127   3                      }
 128   2                      if (KBHIStep == 0x02)
 129   2                      {
 130   3                              eEEPROMBank = KBHIData;
 131   3                              if ( eEEPROMBank == 0x07 )      // Check MBID address high byte.
 132   3                              { 
 133   4                                      SET_MASK(MBID_Reload, b1MBID_LOW); 
 134   4                  }
 135   3                              break;
 136   3                      }
 137   2                      if (KBHIStep == 0x01)
 138   2                      {
 139   3                              eEEPROMData     = KBHIData;//Add the difference between G and Z project
 140   3                  SET_MASK(LENOVOPMFW_Temp,EEPROM_Token);
 141   3                              Update_EEPROMMark();
 142   3                  CLEAR_MASK(LENOVOPMFW_Temp,EEPROM_Token);
 143   3                              Data2PortDirect(0x60, 0x00);                     
 144   3                      }
 145   2      
 146   2                      if ( (MBID_Reload & 0x03) == 0x03 )
 147   2                      {
 148   3                              MBID_Reload = 0;
 149   3                      }
 150   2                      else
 151   2                      { 
 152   3                              MBID_Reload = 0; 
 153   3              }
 154   2                      break;
 155   2      
 156   2              case 0x4C:
 157   2                      if (KBHIStep == 0x03)
 158   2                      {
 159   3                              i = KBHIData;
 160   3                              break;
 161   3                      }
 162   2                      if (KBHIStep == 0x02)
 163   2                      {
 164   3                              eEEPROMAddrsss = KBHIData;
 165   3                              break;
 166   3                      }
 167   2                      if (KBHIStep == 0x01)
 168   2                      {
 169   3                              eEEPROMBank = KBHIData;
 170   3                              Cmd_4E(0x60,eEEPROMAddrsss);
 171   3                      }
 172   2                      break;
 173   2      
 174   2              case 0x4D:
 175   2                      if (KBHIStep == 0x02)
 176   2                      {
 177   3                              eEEPROMAddrsss = KBHIData;
 178   3                              break;
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 4   

 179   3                      }
 180   2                      if (KBHIStep == 0x01)
 181   2                      {
 182   3                              eEEPROMData     = KBHIData;
 183   3                  SET_MASK(LENOVOPMFW_Temp,EEPROM_Token);
 184   3                              Update_EEPROMMark();
 185   3                  CLEAR_MASK(LENOVOPMFW_Temp,EEPROM_Token);
 186   3                      }
 187   2                      break;
 188   2              case 0x4E:
 189   2                      eEEPROMAddrsss = KBHIData;
 190   2                      Cmd_4E(0x60,eEEPROMAddrsss);
 191   2                      break;
 192   2              case 0x52:
 193   2                      if(KBHIData==0xA0) Cmd_52_A0(0x60);
 194   2                      if(KBHIData==0xA3) Cmd_52_A3(0x60);
 195   2                      if(KBHIData==0xA4) Cmd_52_A4(0x60);
 196   2                      if(KBHIData==0xA5) Cmd_52_A5(0x60);
 197   2                      if(KBHIData==0xA6) Cmd_52_A6(0x60); 
 198   2                      if(KBHIData==0xA7) Cmd_52_A7(0x60); 
 199   2                      break;
 200   2              case 0x53:
 201   2                      if (KBHIStep == 0x01)
 202   2                      {
 203   3                              Cmd_53(0x60,KBHIData2,KBHIData1,KBHIData);
 204   3                      }
 205   2                      break;
 206   2              case 0x56:
 207   2                      break;
 208   2              case 0x58:
 209   2                      Cmd_58(KBHIData);
 210   2                      break;
 211   2              case 0x59:
 212   2                      Cmd_59(0x60,KBHIData,0);
 213   2                      break;
 214   2              case 0x5C:
 215   2                      Cmd_5C(0x60);
 216   2                      break;
 217   2              case 0x5D:
 218   2                      Cmd_5D(KBHIData);
 219   2                      break;
 220   2              case 0x71:
 221   2              Cmd_71(KBHIData);
 222   2                      break;
 223   2              case 0x72:
 224   2                      Cmd_72(KBHIData);//add flag for tool to keep the battery at 60%
 225   2                      break;                  
 226   2              case 0x7A:
 227   2                      Cmd_7A(0x60,KBHIData);
 228   2                      break;
 229   2              case 0x7B:
 230   2                      if( KBHIStep == 0x01 )
 231   2                      {
 232   3                              Cmd_7B(0x60,KBHIData1,KBHIData);;
 233   3                      }
 234   2                      break;                  
 235   2              //Add 7Eh Command to access all EC RAM.
 236   2              case 0x7E:
 237   2                      if( KBHIStep == 0x01 )
 238   2                      {
 239   3                              Cmd_7E(0x60,KBHIData1,KBHIData);
 240   3                      }
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 5   

 241   2                      break;
 242   2              case 0x97:
 243   2                      Cmd_97(KBHIData);
 244   2                      break;
 245   2              case 0xB0:
 246   2                      Cmd_B0(0x60,KBHIData);
 247   2                      break;
 248   2              case 0xBC:
 249   2              USB_ON_INPUT;
 250   2              USB_Delay=KBHIData;
 251   2              if(USB_Delay==0)
 252   2                      {USB_Delay=0x0A;}
 253   2                      break;
 254   2              case 0xB3:
 255   2                      if (KBHIStep == 0x01)
 256   2                      {
 257   3                              Cmd_B3(0x60,KBHIData1,KBHIData);
 258   3                      }
 259   2                      break;
 260   2              }
 261   1      }
 262          
 263          //----------------------------------------------------------------------------
 264          // The function of 64 port
 265          //----------------------------------------------------------------------------
 266          void Hook_64Port(BYTE KBHICmd)
 267          {
 268   1              switch(KBHICmd)
 269   1              {
 270   2              case 0x40:
 271   2                      KBHIStep=0x01;
 272   2                      break;
 273   2              case 0x41:
 274   2                      KBHIStep=0x01;
 275   2                      break;
 276   2              case 0x42:
 277   2                      KBHIStep=0x01;
 278   2                      break;
 279   2              case 0x43:
 280   2                      KBHIStep=0x01;
 281   2                      break;
 282   2              case 0x44:
 283   2                      Cmd_44(0x60);
 284   2                      break;
 285   2              case 0x45:
 286   2                      KBHIStep=0x01;
 287   2                      break;
 288   2              case 0x46:
 289   2                      KBHIStep=0x01;
 290   2                      break;
 291   2              case 0x47:
 292   2                      KBHIStep=0x01;
 293   2                      break;
 294   2              case 0x49:
 295   2                      Cmd_49(0x60);//HEGANGS021:one key wake
 296   2                      break;
 297   2              case 0x4B:
 298   2                      KBHIStep=0x04;
 299   2                      break;
 300   2              case 0x4C:
 301   2                      KBHIStep=0x03;
 302   2                      break;
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 6   

 303   2              case 0x4D:
 304   2                      KBHIStep=0x02;
 305   2                      break;
 306   2              case 0x4E:
 307   2                      KBHIStep=0x01;
 308   2                      break;
 309   2              case 0x4F:
 310   2                      Erase_EEPROMAll();
 311   2                      break;
 312   2              //Add CMD 0X50 for osAging S4 keep EC power.
 313   2              case 0x50:
 314   2                      SET_MASK(ACPI_HOTKEY, b6Cmd_NoShut);//for osAging s4 keep EC power
 315   2                      break;
 316   2              case 0x51:
 317   2                      Cmd_51(0x60);
 318   2                      break;
 319   2              case 0x52:
 320   2                      KBHIStep=0x01;
 321   2                      break;
 322   2              case 0x53:
 323   2                      KBHIStep=0x02;
 324   2                      break;
 325   2              case 0x56:
 326   2                      break;
 327   2              case 0x58:
 328   2                      KBHIStep=0x01;
 329   2                      break;
 330   2              case 0x59:
 331   2                      KBHIStep=0x01;
 332   2                      break;
 333   2              case 0x5C:
 334   2                      break;
 335   2              case 0x5D:
 336   2                      KBHIStep=0x01;
 337   2                      break;
 338   2              case 0x5E:                      // UNLOCK SHIP MODE 
 339   2                      #if shipmodesupport             //add ship mode judge
 340   2                      Unlock_ShipMode();
 341   2                      #endif
 342   2                      break;
 343   2              case 0x5F:      
 344   2                      #if shipmodesupport             //add ship mode judge// LOCK SHIP MODE 
 345   2                      ShipModeEn=0xA5;  
 346   2                      Data2PortDirect(0x60, 0x5A);
 347   2              RamDebug(0xA5);
 348   2                      #endif
 349   2                      break;
 350   2              case 0x71:
 351   2                      KBHIStep=0x02;//Add 60/64 71cmd follow new EC common SPEC.
 352   2                      break;
 353   2                      case 0x72:
 354   2                      KBHIStep=0x01;//add flag for tool to keep the battery at 60%
 355   2                      break;
 356   2              case 0x75:
 357   2                      Cmd_75(); 
 358   2                      break;
 359   2              case 0x7A:
 360   2                      KBHIStep=0x01;
 361   2                      break;
 362   2              case 0x7B:
 363   2                      KBHIStep=0x02;
 364   2                      break;
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 7   

 365   2              //Add 7Eh Command to access all EC RAM.
 366   2              case 0x7E:
 367   2                      KBHIStep=0x02;
 368   2                      break;
 369   2              //Add workaround for hang bios.
 370   2              case 0x7C:
 371   2                      Bioswatchdog=1;
 372   2                      Bioswatchdogtime=0;
 373   2                      Data2PortDirect(0x60, 0x55);//add return date for bios.
 374   2                      break;
 375   2              case 0x7D:
 376   2                      Bioswatchdog=0;
 377   2                      Data2PortDirect(0x60, 0x55);//add return date for bios.
 378   2                      break;
 379   2              //Add workaround for hang bios.
 380   2              case 0x97:
 381   2                      KBHIStep=0x01;
 382   2                      break;
 383   2              case 0xB0:
 384   2                      KBHIStep=0x01;
 385   2                      break;
 386   2              //start for save P80 code to setup. 
 387   2              case 0xB1:
 388   2                      Cmd_B1(0x60,0xB1);
 389   2                      break;
 390   2              case 0xB2:
 391   2                      Cmd_B2(0x60,0xB2);
 392   2                      break;
 393   2              //end for save P80 code to setup. 
 394   2              case 0xB3:
 395   2                      KBHIStep=0x02;
 396   2                      break;
 397   2              case 0xB4:
 398   2                      Cmd_B4();
 399   2                      break;
 400   2              case 0xBC:
 401   2                      KBHIStep=0x01;
 402   2                      break;
 403   2              case 0x77:
 404   2              DisableAllInterrupt();
 405   2                      Erase_Eflash_1K(0x01,0x20,0x00);
 406   2              EnableAllInterrupt();
 407   2                      break;
 408   2              case 0x88:
 409   2      
 410   2                      break;
 411   2      
 412   2              default:
 413   2                      break;
 414   2              }
 415   1      }
 416          
 417          //-----------------------------------------------------------------------
 418          // kbcmd : keyboard command from 0x60 port
 419          //-----------------------------------------------------------------------
 420          void Hook_Keyboard_Cmd(BYTE kbcmd)
 421          {
 422   1      
 423   1      }
 424          
 425          //-----------------------------------------------------------------------
 426          // kbcmdp : keyboard command parameter from 0x60 port
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 8   

 427          // for example keyboard command (0xED, 0xF0, 0xF3)
 428          //-----------------------------------------------------------------------
 429          void Hook_Keyboard_Cmd_Parameter(BYTE kbcmdp)
 430          {
 431   1      
 432   1      }
 433          
 434          //-----------------------------------------------------------------------
 435          // mscmd : mosue command from 0x64 port 0xD4 command
 436          //-----------------------------------------------------------------------
 437          void Hook_Mouse_D4Cmd(BYTE mscmd)
 438          {
 439   1      
 440   1      }
 441          
 442          //-----------------------------------------------------------------------
 443          // mscmd : mosue command from 0x64 port 0x90 command
 444          //-----------------------------------------------------------------------
 445          void Hook_Mouse_90Cmd(BYTE mscmd)
 446          {
 447   1      
 448   1      }
 449          
 450          //-----------------------------------------------------------------------
 451          // mscmd : mosue command from 0x64 port 0x91 command
 452          //-----------------------------------------------------------------------
 453          void Hook_Mouse_91Cmd(BYTE mscmd)
 454          {
 455   1      
 456   1      }
 457          
 458          //-----------------------------------------------------------------------
 459          // mscmd : mosue command from 0x64 port 0x92 command
 460          //-----------------------------------------------------------------------
 461          void Hook_Mouse_92Cmd(BYTE mscmd)
 462          {
 463   1      
 464   1      }
 465          
 466          //-----------------------------------------------------------------------
 467          // mscmd : mosue command from 0x64 port 0x93 command
 468          //-----------------------------------------------------------------------
 469          void Hook_Mouse_93Cmd(BYTE mscmd)
 470          {
 471   1      
 472   1      }
 473          
 474          void Cmd_40(BYTE sCount)
 475          {
 476   1              AutoTimer = sCount;
 477   1          RamDebug(0x40); 
 478   1          RamDebug(AutoTimer); 
 479   1              SET_MASK(ACPI_HOTKEY, b6Cmd_NoShut);
 480   1      }
 481          
 482          void Cmd_41_A0(BYTE nPort) 
 483          {
 484   1              Data2PortDirect(nPort, REV0_BYTE0);   //Data2Port to Data2PortDirect
 485   1      }
 486          
 487          void Cmd_41_A1(BYTE nPort) 
 488          {
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 9   

 489   1              Data2Port(nPort, 0x43);     // 'C' 0x43
 490   1              MultiB2Port(nPort, 0x4F);  // 'O' 0x4F
 491   1              MultiB2Port(nPort, 0x4D);  // 'M' 0x4D
 492   1              MultiB2Port(nPort, 0x50);  // 'P' 0x50
 493   1              MultiB2Port(nPort, 0x41);  // 'A' 0x41
 494   1              Data2PortDirect(nPort, 0x4C);  // 'L' 0x4C  /MultiB2Port to Data2PortDirect
 495   1      }
 496          
 497          void Cmd_41_A2(BYTE nPort) 
 498          {       //Return EEPROM slave address
 499   1              Data2PortDirect(nPort, 0);    //Data2Port to Data2PortDirect
 500   1      }
 501          
 502          void Cmd_41_A3(BYTE nPort) 
 503          {       //Return Thermal chip slave address
 504   1              Data2PortDirect(nPort, 0);    //Data2Port to Data2PortDirect
 505   1      }
 506          
 507          void Cmd_42(BYTE eFlashBank)
 508          {
 509   1              eEEPROMBank = eFlashBank;
 510   1      }
 511          
 512          void Cmd_43(BYTE nPort,BYTE nData)
 513          {
 514   1              Data2PortDirect(nPort,( *((XBYTE *)(OEMRAM4|nData)) ));    //Data2Port to Data2PortDirect //Modify 43 cmd
             - return EC space value(0x400) follow EC spec.
 515   1      }
 516          
 517          void Cmd_44(BYTE nPort) 
 518          {
 519   1              Data2Port(nPort, ProjectID0L);
 520   1              Data2PortDirect(nPort, ProjectID0H); //MultiB2Port to Data2PortDirect
 521   1      }
 522          
 523          void Cmd_45(BYTE nPort, BYTE sCount)
 524          {
 525   1              switch( sCount )
 526   1              {
 527   2              
 528   2              #if Lenovo_Brightness
                      case 0x10://BIOS confirm Panel ok
                              uReserve07.fbit.uE_PanelOK = 1;
                              break;
                      case 0x11://BIOS confirm Panel fail
                              uReserve07.fbit.uE_PanelOK = 0;
                              break;
                      #endif  // Lenovo_Brightness
 536   2      
 537   2              case 0x20:      //Enable power switch WDT function
 538   2                        CLEAR_MASK(pProject4,pPWSWdisable); //HEGANGS028:Disable POWERSW when flash bios
 539   2                        break;          
 540   2              case 0x21:      //Disable power switch WDT function
 541   2                        SET_MASK(pProject4,pPWSWdisable);  
 542   2                        break;
 543   2      
 544   2              case 0x80:      // Disable ME Flash.
 545   2                      pchME_FLAS_OUT;
 546   2                      pchME_FLAS_HI();
 547   2                      break;
 548   2              case 0x81:      // Enable ME Flash.
 549   2                      pchME_FLAS_LOW();
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 10  

 550   2                      pchME_FLAS_INDW;
 551   2                      break;
 552   2      
 553   2              case 0x82:
 554   2                      SET_MASK(SYS_STATUS, b6BIOS_Flash);     // For BIOS use flash.
 555   2                      break;
 556   2      
 557   2              case 0x83:
 558   2                      SET_MASK(SysStatus,LidKBIgnore);
 559   2              Ccb42_DISAB_KEY = 1;
 560   2                      Flag.SCAN_INH = 1;                              // Inhibit scanner (internal keyboard).
 561   2                      Lock_Scan();                                    // Lock scanner
 562   2                      ECSend2Port(2, 0xF5);                   // Disable TouchPad.
 563   2                      break;
 564   2      
 565   2              #if Support_AOU5_V1_2//modify USB charge setting.
 566   2              case 0x8E:      // USB Enable Charger.
 567   2                      if (IS_MASK_CLEAR(EMStatusBit, b1SetUSBChgEn))  // if USB charger disable, then enable it..
 568   2                      {
 569   3                              SET_MASK(EMStatusBit, b1SetUSBChgEn);// USB enable charger.
 570   3                              eEEPROMBank= 0x07;
 571   3                              eEEPROMAddrsss = 0xE4;
 572   3                              eEEPROMData = EMStatusBit;
 573   3                              SET_MASK(LENOVOPMFW_Temp,EEPROM_Token);
 574   3                              Update_EEPROMMark();
 575   3                              CLEAR_MASK(LENOVOPMFW_Temp,EEPROM_Token);
 576   3                      }
 577   2                      break;
 578   2      
 579   2              case 0x8F:      // USB Disable charger.
 580   2                      if (IS_MASK_SET(EMStatusBit, b1SetUSBChgEn))            // if USB charger enable, then disable it..
 581   2                      {
 582   3                              CLR_MASK(EMStatusBit, b1SetUSBChgEn);// USB enable charger.
 583   3                              eEEPROMBank= 0x07;
 584   3                              eEEPROMAddrsss = 0xE4;
 585   3                              eEEPROMData = EMStatusBit;
 586   3                              SET_MASK(LENOVOPMFW_Temp,EEPROM_Token);
 587   3                              Update_EEPROMMark();
 588   3                              CLEAR_MASK(LENOVOPMFW_Temp,EEPROM_Token);
 589   3                      }
 590   2                      break;
 591   2              #endif                        //Support_USB_Charge
 592   2              case 0x90:
 593   2                      CURRENT_STATUS &= 0x3F;
 594   2                      CURRENT_STATUS |= 0x40;                         // For BIOS set Legacy HDD.
 595   2                      Chk_UEFIStatus();                                       // Check UEFI status.
 596   2                      break;
 597   2              case 0x91:
 598   2                      CURRENT_STATUS &= 0x3F;
 599   2                      CURRENT_STATUS |= 0x80;                         // For BIOS set UEFI HDD.
 600   2                      Chk_UEFIStatus();                                       // Check UEFI status.
 601   2                      break;
 602   2      
 603   2              case 0xA2:
 604   2                      SET_MASK(DEVICEMODULE,WWAN_3G_EXIST);   // 3G module exist
 605   2                      break;
 606   2      
 607   2              case 0xA3:
 608   2                      CLR_MASK(DEVICEMODULE,WWAN_3G_EXIST);   // 3G module not exist
 609   2                      break;
 610   2      
 611   2              case 0xA4:                                                                      // Return WLAN & Bluetooth status
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 11  

 612   2                      Data2PortDirect(nPort, DEVICEMODULE);   //
 613   2                      break;
 614   2      
 615   2              case 0xA5:
 616   2                      CLR_MASK(DEVICEMODULE,WIRELESS_EXIST);  // Wirless LAN not exist
 617   2                      CLR_MASK(DEVICEMODULE,BLUETOOTH_EXIST); // BlueTooth not exist
 618   2                      break;
 619   2      
 620   2              case 0xA6:
 621   2                      SET_MASK(DEVICEMODULE,WIRELESS_EXIST);  // Wirless LAN exist
 622   2                      CLR_MASK(DEVICEMODULE,BLUETOOTH_EXIST); // BlueTooth not exist
 623   2                      break;
 624   2      
 625   2              case 0xA7:
 626   2                      CLR_MASK(DEVICEMODULE,WIRELESS_EXIST);  // Wirless LAN not exist
 627   2                      SET_MASK(DEVICEMODULE,BLUETOOTH_EXIST); // BlueTooth exist
 628   2                      break;
 629   2      
 630   2              case 0xA8:
 631   2                      SET_MASK(DEVICEMODULE,WIRELESS_EXIST);  // Wirless LAN exist
 632   2                      SET_MASK(DEVICEMODULE,BLUETOOTH_EXIST); // BlueTooth exist
 633   2              break;
 634   2      
 635   2              case 0xA9:
 636   2                      SET_MASK(LENOVODEVICE,Camera_EXIST);// Camera exist
 637   2                      break;
 638   2      
 639   2              case 0xAA:
 640   2                      CLR_MASK(LENOVODEVICE,Camera_EXIST);// Camera not exist
 641   2                      break;
 642   2      
 643   2              case 0xAB:                                                              // Return MBID
 644   2                      Data2PortDirect(nPort, uMBID);   
 645   2                      break;
 646   2      
 647   2              case 0xAE:
 648   2                      Data2PortDirect(nPort, uNovoVPCCount);  
 649   2                      uNovoVPCCount=0;                //optimize clear NOVO button states function.
 650   2                      break;
 651   2                      //Add voice wake up cmd for BIOS.
 652   2              case 0xAF:
 653   2                      Data2PortDirect(nPort, uWOVSTATUS); 
 654   2                      uWOVSTATUS=0;   
 655   2                      break;
 656   2              case 0xB0:                                                              // CPU is TJ85
 657   2                      cCPUKind = 0;
 658   2                      break;
 659   2              case 0xB1:                                                              // CPU is TJ90
 660   2                      cCPUKind = 1;
 661   2                      break;
 662   2              case 0xB2:                                                              // CPU is TJ100
 663   2                      cCPUKind = 2;
 664   2                      break;
 665   2              case 0xBD:                                                              // CPU is TJ105
 666   2                      cCPUKind = 3;
 667   2                      break;
 668   2              case 0xBE:                                                              // CPU is Dual core TJ100
 669   2                      cCPUKind = 4;
 670   2                      break;
 671   2              case 0xBF:                                                              // CPU is Quad core TJ100
 672   2                      cCPUKind = 5;
 673   2                      break;
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 12  

 674   2      
 675   2              case 0xCF:
 676   2                      if ( IS_MASK_SET(CombineKeyStatus, b0FnRN) )
 677   2                      { Data2PortDirect(nPort, 1); }   //Data2Port to Data2PortDirect
 678   2                      else
 679   2                      { Data2PortDirect(nPort, 0); }    // Data2Port to Data2PortDirect
 680   2                      break;
 681   2      
 682   2              case 0xD4:                                                      // Return device
 683   2                      Data2PortDirect(nPort, pDevStus);  //Data2Port to Data2PortDirect
 684   2                      break;
 685   2      
 686   2              case 0xE7:
 687   2                      SET_MASK(pProject0,b4VGAType);          //UMA
 688   2                      //add UMA cmd define.
 689   2                      uMBGPU = 0x01;
 690   2              if (IS_MASK_SET(SYS_STATUS,AC_ADP))  //read adapter ID after know UMA or dis.
 691   2              {
 692   3                              AdapterIDOn_Flag = 0x01; 
 693   3                              ADPIDON10MS_NUM=0x0a;  
 694   3              } 
 695   2              //add UMA cmd define.
 696   2      
 697   2                      InitChargerIC(); 
 698   2                      
 699   2                      break;
 700   2      
 701   2              case 0xE9:
 702   2                      uReserve07.fbit.uACInOutBeep = 0;       // Enable AC in/out beep
 703   2                      break;
 704   2      
 705   2              case 0xEA:
 706   2                      uReserve07.fbit.uACInOutBeep = 1;       // Disable AC in/out beep
 707   2                      break;
 708   2              //Distinguish between 310 or 510.
 709   2              case 0xEB:
 710   2                      SET_MASK(pProject0,b7GSKL310OR510);     // 310/510 BIT7=1 310
 711   2                      break;
 712   2      
 713   2              //add AMD or NV discrete cmd define.
 714   2              case 0xF0: //NV
 715   2                      CLR_MASK(pProject0,b4VGAType);          //Discreate
 716   2                      uMBGPU = 0x02;
 717   2                      uPJID = 0x02;
 718   2              if (IS_MASK_SET(SYS_STATUS,AC_ADP))  //read adapter ID after know UMA or dis.
 719   2              {
 720   3                              AdapterIDOn_Flag = 0x01; 
 721   3                              ADPIDON10MS_NUM=0x0a;  
 722   3              } 
 723   2      
 724   2                      InitChargerIC();
 725   2                      
 726   2                      break;
 727   2              case 0xF1: //AMD
 728   2                      CLR_MASK(pProject0,b4VGAType);          //Discreate
 729   2                      uMBGPU = 0x02;
 730   2                      uPJID = 0x01;
 731   2              if (IS_MASK_SET(SYS_STATUS,AC_ADP))  //read adapter ID after know UMA or dis.
 732   2              {
 733   3                              AdapterIDOn_Flag = 0x01; 
 734   3                              ADPIDON10MS_NUM=0x0a;  
 735   3              } 
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 13  

 736   2      
 737   2                      InitChargerIC(); 
 738   2                      
 739   2                      break;
 740   2              //add AMD or NV discrete cmd define.
 741   2              }
 742   1      }
 743          
 744          void Cmd_46(BYTE nPort,BYTE nData)
 745          {
 746   1              BYTE BRPM_Manual;
 747   1              switch( nData )
 748   1              {
 749   2              case 0x81:
 750   2                      Data2PortDirect(nPort, nAtmFanSpeed);           //Reading FAN speed from FAN1
 751   2                      break;
 752   2              case 0x82:
 753   2                      Data2PortDirect(nPort, nAtmFan1Speed);                  //Reading FAN speed from FAN2
 754   2                      break;
 755   2              case 0x84:
 756   2                      uReserve07.fbit.nFanManual = 0;         // return EC control.
 757   2                      break;
 758   2              case 0x85:            //HEGANGS049:Add the 530s Highper formance and yoga30 quite mode function
 759   2                      HighPerf = 1;           // Set high performance fantable
 760   2                      break;
 761   2              case 0x86:
 762   2                      HighPerf = 0;           // Set low performance fantable
 763   2                      break;
 764   2              case 0x87:
 765   2                      QuiteMode = 1;          // Set quite mode fantable
 766   2                      break;
 767   2              case 0x88:
 768   2                      QuiteMode = 0;          // disable quite mode fantable
 769   2                      break;
 770   2              default:
 771   2                      uReserve07.fbit.nFanManual = 1;
 772   2                      if ( nData >= 160 )
 773   2                      {
 774   3                              nData -= 160;
 775   3                              ManualFan2PRM = nData;
 776   3                              FAN1_PWM_ALT;//72JERRY026: Modify double fan setting for MFG tool.
 777   3                              FAN1_PWM = ManualFanPRM + 2;//72JERRY026: Modify double fan setting for MFG tool.
 778   3                              FAN1_SPEED_ALT;//72JERRY026: Modify double fan setting for MFG tool.
 779   3                      }
 780   2                      else
 781   2                      {
 782   3                              ManualFanPRM = nData;
 783   3                              FAN_PWM_ALT;
 784   3                              FAN_PWM = ManualFanPRM + 2;
 785   3                              FAN_SPEED_ALT;
 786   3                              ManualFan2PRM = nData;//72JERRY026: Modify double fan setting for MFG tool.
 787   3                              FAN1_PWM_ALT;//72JERRY026: Modify double fan setting for MFG tool.
 788   3                              FAN1_PWM = ManualFanPRM + 2;//72JERRY026: Modify double fan setting for MFG tool.
 789   3                              FAN1_SPEED_ALT;//72JERRY026: Modify double fan setting for MFG tool.
 790   3                      }
 791   2      
 792   2                      /*if ( uReserve07.fbit.b7Fan2Manual == 0 )
 793   2                      { BRPM_Manual = ManualFanPRM; }         // Common FAN1 PRM value.
 794   2                      else
 795   2                      { BRPM_Manual = ManualFan2PRM; }        */// Respective FAN PRM value.//72JERRY026:- Modify double fan setting
             - for MFG tool.
 796   2                      break;
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 14  

 797   2              }
 798   1      }
 799          
 800          
 801          void Cmd_47(BYTE nPort, BYTE nData)
 802          {
 803   1              if (nData != 0x80)
 804   1          {
 805   2                      cOsLedCtrl.fbit.cOL_CtrlRight = 1;
 806   2          }
 807   1              switch( nData )
 808   1              {
 809   2              case 0x80:                      // Return back the control right to EC
 810   2                      cOsLedCtrl.word = 0x00;
 811   2              cOsLed1Ctrl.word = 0x00;
 812   2                      OEM_Write_Leds(Led_Data);   //Hook Oem On-board LED control
 813   2                      break;
 814   2              case 0x81:                      // System LED on and control by OS
 815   2                      cOsLedCtrl.fbit.cOL_SysLed = 1;
 816   2                      break;
 817   2              case 0x82:                      // Power management LED on and control by OS
 818   2                      cOsLedCtrl.fbit.cOL_PwrLed = 1;
 819   2                      break;
 820   2              case 0x83:                      // Charge LED on and control by OS
 821   2                      cOsLedCtrl.fbit.cOL_ChgLed = 1;
 822   2                      break;
 823   2              case 0x84:                      // Discharge LED on and control by OS
 824   2                      cOsLedCtrl.fbit.cOL_DisChgLed = 1;
 825   2                      break;
 826   2              case 0x85:                      // T/P active LED on and control by OS
 827   2                      cOsLedCtrl.fbit.cOL_TPActLed = 1;
 828   2                      break;
 829   2              case 0x86:                      // Blue Tooth LED on and control by OS
 830   2                      cOsLedCtrl.fbit.cOL_BTLed = 1;
 831   2                      break;
 832   2              case 0x87:                      // T/P lock LED on and control by OS
 833   2                      cOsLedCtrl.fbit.cOL_TPLockLed = 1;
 834   2                      break;
 835   2              case 0x88:                      // All LED off and control by OS
 836   2                      cOsLedCtrl.word=0;
 837   2                      cOsLedCtrl.fbit.cOL_CtrlRight = 1; //G63:Modify LED control for MFG tool.
 838   2                      //cOsLedCtrl.word = 0x0080;     // Set cOL_CtrlRight == 1.
 839   2              cOsLed1Ctrl.word = 0x00;
 840   2                      break;
 841   2              case 0x89:                      // HDD LED on and control by OS
 842   2                      cOsLedCtrl.fbit.cOL_HddLed = 1;
 843   2                      break;
 844   2              case 0x8A:                      // FDD LED on and control by OS
 845   2                      cOsLedCtrl.fbit.cOL_FddLed = 1;
 846   2                      break;
 847   2              case 0x8B:                      // Media LED on and control by OS
 848   2                      cOsLedCtrl.fbit.cOL_MediaLed = 1;
 849   2                      break;
 850   2              case 0x8C:                      // TV LED on and control by OS
 851   2                      cOsLedCtrl.fbit.cOL_TVLed = 1;
 852   2                      break;
 853   2              case 0x8D:                      // Email LED on and control by OS
 854   2                      cOsLedCtrl.fbit.cOL_MailLed = 1;
 855   2                      break;
 856   2              case 0x8E:                      // Wireless LED on and control by OS
 857   2                      cOsLedCtrl.fbit.cOL_WLANLed = 1;
 858   2                      break;
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 15  

 859   2              case 0x8F:                      // Numlock LED Controlled by OS
 860   2                      cOsLedCtrl.fbit.cOL_NumlockLed = 1;
 861   2                      break;
 862   2              case 0x90:                      // Padslock(Cursorlock) LED Control by OS
 863   2                      cOsLedCtrl.fbit.cOL_PadslockLed = 1;
 864   2                      break;
 865   2              case 0x91:                      // Capslock LED Control by OS
 866   2                      cOsLed1Ctrl.fbit.cOL1_CapslockLed = 1;
 867   2                      break;
 868   2              case 0x92:                      // Scrolllock LED Control by OS
 869   2                      cOsLed1Ctrl.fbit.cOL1_ScrolllockLed = 1;
 870   2                      break;
 871   2              case 0x93:                      // Special LED1 (Special LED for testing in production line)
 872   2                      cOsLed1Ctrl.fbit.cOL1_SpecialLed1 = 1;
 873   2                      break;
 874   2              case 0x94:                      // KB backlight LED control by OS.
 875   2                      cOsLed1Ctrl.fbit.cOL1_KBBacklight = 1;
 876   2                      break;
 877   2              case 0x95:                      // Special LED3 (Special LED for testing in production line)
 878   2                      cOsLed1Ctrl.fbit.cOL1_SpecialLed3 = 1;
 879   2                      break;
 880   2              case 0x96:                      // Special LED3 (Special LED for testing in production line)
 881   2                      cOsLed1Ctrl.fbit.cOL1_PwrAmber = 1;
 882   2                      break;
 883   2              }
 884   1      }
 885          void Cmd_49(BYTE nPort)
 886          {
 887   1                      Data2PortDirect(nPort, ONEKEY_FLAG);  
 888   1                      ONEKEY_TEMP_FLAG=ONEKEY_FLAG;           //HEGANGS021:one key wake
 889   1                      ONEKEY_FLAG=0;
 890   1      }
 891          //Add 8 sec reset test function.
 892          void Cmd_4A(BYTE nPort, BYTE nData)
 893          {
 894   1              if(nData == 0x01)//Enable
 895   1              {
 896   2                      ResetTestFlag = 0x01;
 897   2                      BRAMBK0[127] = GPCRI5;
 898   2              }
 899   1              else if(nData == 0x02)
 900   1              {
 901   2                      ResetTestFlag = 0x02;
 902   2              }
 903   1              BRAMBK0[126] = ResetTestFlag;
 904   1      
 905   1              WinFlashMark=0x53;//B05:Modify after flash EC can auto poweron follow bios.
 906   1          WinFlashMark2=0x35;//B05:Modify after flash EC can auto poweron follow bios.
 907   1              InternalWDTNow(RESETEST_ID);
 908   1      }
 909          
 910          
 911          void Cmd_4E(BYTE nPort, BYTE nOffSet)
 912          {
 913   1              BYTE i,j,k;
 914   1              if (eEEPROMBank == 07 && (nOffSet > 0xEF) && (nOffSet!=0xF1))
 915   1              {
 916   2                      RamDebug(0x4E);
 917   2                      RamDebug(eEEPROMBank);
 918   2                      RamDebug(nOffSet);
 919   2                      nOffSet = nOffSet & 0x0F;
 920   2                      for (i=0; i<4 ;i++)
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 16  

 921   2                      {
 922   3                              for (j=0; j< 0x10 ;j++)
 923   3                              {
 924   4                                      k = Read_Eflash_Byte(EEPROMA2,(EEPROMA1_16Byte + i),(j*16));
 925   4      
 926   4                                      if(k == 0xFF)
 927   4                                      {
 928   5                                              break;
 929   5                                      }
 930   4                                      else
 931   4                                      {
 932   5                                              eEEPROMData = Read_Eflash_Byte(EEPROMA2,(EEPROMA1_16Byte + i),((j*16) | nOffSet));
 933   5                                      }
 934   4                              }
 935   3                              if (k == 0xFF)
 936   3                                      break;
 937   3                      }
 938   2              }
 939   1              else
 940   1              {
 941   2                      eEEPROMData=Read_Eflash_Byte(EEPROMA2,(eEEPROMBank|EEPROMA1_B03),nOffSet);
 942   2              }
 943   1              Data2PortDirect(nPort, eEEPROMData);  
 944   1      }
 945          
 946          
 947          void Cmd_51(BYTE nPort) {
 948   1              Data2Port(nPort, REV0_BYTE0);
 949   1              MultiB2Port(nPort, REV0_BYTE1);
 950   1       
 951   1              Data2PortDirect(nPort, REV0_BYTE3);  
 952   1      }
 953          
 954          void Cmd_52_A0(BYTE nPort) { 
 955   1              Data2Port(nPort, 'D');          // 'V' 0x51
 956   1              MultiB2Port(nPort, 'S');        // 'I' 0x49
 957   1              MultiB2Port(nPort, '3');        // 'Q' 0x51
 958   1              MultiB2Port(nPort, '1');        // 'Y' 0x59
 959   1              Data2PortDirect(nPort, '2');
 960   1      }
 961          
 962          void Cmd_52_A3(BYTE nPort) {
 963   1              Data2PortDirect(nPort, (0x10+(CHIP_TYPE0&0x0F))); 
 964   1      }
 965          
 966          void Cmd_52_A4(BYTE nPort)
 967          {
 968   1              if( IS_MASK_SET(SYS_MISC1,Crisis_On) )
 969   1              {
 970   2                      Data2PortDirect(nPort,0x80); //Data2Port to Data2PortDirect
 971   2                      SET_MASK(SYS_MISC1,b5Crisis_LED);
 972   2              CLR_MASK(SYS_MISC1,Crisis_On);
 973   2                      CLR_MASK(SYS_MISC1,BATCRISIS_FLAG); 
 974   2              }
 975   1              else
 976   1              {
 977   2                      Data2PortDirect(nPort,0x00);   // Data2Port to Data2PortDirect
 978   2                      CLR_MASK(SYS_MISC1,b5Crisis_LED);
 979   2              }
 980   1      }
 981          
 982          void Cmd_52_A5(BYTE nPort) 
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 17  

 983          {
 984   1              Data2PortDirect(nPort, REV0_BYTE4); //Data2Port to Data2PortDirect
 985   1      }
 986          
 987          //S+ add command for BIOS show shutdown ID.
 988          void Cmd_52_A6(BYTE nPort)
 989          {
 990   1              Data2PortDirect(nPort, EEPROMA2);
 991   1      }
 992          
 993          void Cmd_52_A7(BYTE nPort)
 994          {
 995   1              Data2PortDirect(nPort, EEPROMA1_16Byte);
 996   1      }
 997          
 998          
 999          void Cmd_53(BYTE nPort,BYTE nDataH,BYTE nDataM,BYTE nDataL)
1000          {
1001   1              eEEPROMData=Read_Eflash_Byte(nDataH,nDataM,nDataL);
1002   1              Data2PortDirect(nPort, eEEPROMData);   //Data2Port to Data2PortDirect
1003   1      }
1004          
1005          //Hang check
1006          void Cmd_55(BYTE nData)
1007          {
1008   1          if(0xb7==nData)
1009   1          {
1010   2                      PWR_LED_Debug = 1;
1011   2          }
1012   1              else if(0xb8==nData)
1013   1              {
1014   2                      PWR_LED_Debug = 0;
1015   2              }
1016   1              else if(0xb9==nData) //HEGANG0027:Add bios hang check
1017   1              {
1018   2                      bios_check = 1;
1019   2              }
1020   1      }
1021          //Hang check
1022          
1023          void Cmd_58(BYTE sCount)
1024          {
1025   1              #if EC_Brightness_Ctrl
                      if( sCount >= BriTable_MAX )
                      { cPanelId = BriTable_MAX - 1; }        // Set max. level.
                      else
                      { cPanelId = sCount; }
                      Init_LCD_Freq();
                      #endif  // EC_Brightness_Ctrl
1032   1      }
1033          
1034          void Cmd_59(BYTE nPort, BYTE nData, BYTE nData2)
1035          {
1036   1              switch( nData )
1037   1              {
1038   2              case 0x60:      // Keep PCH power for RTC
1039   2                      SET_MASK(cCmd, bPCHPWR_Keep);
1040   2                      break;
1041   2              case 0x64:      // Enable scancode for test button
1042   2                      SET_MASK(cCmd, b6TestBtnEn);
1043   2                      DEBOUNCE_CONT1 = T_PSW_DEBOUNCE; //add solution for P/L test Power Button
1044   2                      break;
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 18  

1045   2      
1046   2              case 0x65:      // Disable scancode for test button
1047   2                      CLR_MASK(cCmd, b6TestBtnEn);
1048   2                      DEBOUNCE_CONT1 = T_PSW_DEBOUNCE_S0;     //add solution for P/L test Power Button
1049   2                      break;
1050   2      
1051   2              case 0x6E:
1052   2                      uCritBattWakeThre = nData;
1053   2                      SET_MASK(uCritBattWakeThre,IFFS_Enable);
1054   2                      uIffsCnt = 40;
1055   2                      break;
1056   2      
1057   2          case 0x76:
1058   2                      uReserve07.fbit.nFanManual = 0;                 // return EC control.
1059   2                      uReserve07.fbit.b7Fan2Manual = 0;               // return EC control.
1060   2                      CLR_MASK(Thro_Status2, b4FAN1_FullOn);  // Disable Full on.
1061   2                      break;
1062   2          case 0x77:
1063   2                      uReserve07.fbit.nFanManual = 0;                 // return EC control.
1064   2                      uReserve07.fbit.b7Fan2Manual = 0;               // return EC control.
1065   2                      SET_MASK(Thro_Status2, b4FAN1_FullOn);  // Enable Full on.
1066   2                      break;
1067   2      
1068   2              case 0x7A:
1069   2                      SET_MASK(pDevStus, pENABLE_TP);         // Enable TouchPad.
1070   2                      EnablePS2Port_2();
1071   2                      break;
1072   2              case 0x7B:
1073   2                      CLEAR_MASK(pDevStus, pENABLE_TP);       // Disable TouchPad.
1074   2                      DisablePS2Port_2();
1075   2                      break;
1076   2      
1077   2          case 0x7C: // Enable Lid Keyboard function
1078   2              CLEAR_MASK(SysStatus,LidKBIgnore);
1079   2              Ccb42_DISAB_KEY = 0;
1080   2                      Flag.SCAN_INH = 0;                              // Not Inhibit scanner (internal keyboard).
1081   2                      Unlock_Scan();                                  // UnLock scanner
1082   2              break;
1083   2      
1084   2              case 0x7D: // Disable Lid Keyboard function
1085   2              SET_MASK(SysStatus,LidKBIgnore);
1086   2              Ccb42_DISAB_KEY = 1;
1087   2                      Flag.SCAN_INH = 1;                              // Inhibit scanner (internal keyboard).
1088   2                      Lock_Scan();                                    // Lock scanner
1089   2              break;
1090   2      
1091   2              case 0x80:      // set battery charge to 100% then discharge to xx% and keep
1092   2                      cBattFlag0.fbit.cBF0_FullToTarget = 1;
1093   2                      cBattFlag0.fbit.cBF0_Full = 0;
1094   2                      cBattFlag0.fbit.cBF0_GoTarget = 0;
1095   2                      GetData2(nPort);
1096   2                      cTargetGauge = CmdData2;
1097   2                      if ( cTargetGauge > 100 )
1098   2                              cTargetGauge = 0;
1099   2                      break;
1100   2      
1101   2              case 0x81:      //charge/discharge to xx% and keep
1102   2                      cBattFlag0.fbit.cBF0_FullToTarget = 0;
1103   2                      cBattFlag0.fbit.cBF0_Full = 0;
1104   2                      cBattFlag0.fbit.cBF0_GoTarget = 1;
1105   2                      GetData2(nPort);
1106   2                      cTargetGauge = CmdData2;
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 19  

1107   2                      if ( cTargetGauge > 100 )
1108   2                              cTargetGauge = 0;
1109   2                      break;
1110   2              case 0x82:      //disable battery charge xx% feature
1111   2                      cBattFlag0.fbit.cBF0_FullToTarget = 0;
1112   2                      cBattFlag0.fbit.cBF0_Full = 0;
1113   2                      cBattFlag0.fbit.cBF0_GoTarget = 0;
1114   2              //Modify charge/discharge to xx% and keep for MFG.
1115   2              CLEAR_MASK(ACOFF_SOURCE, BATTLEARN);
1116   2                      BATT_LEN_OFF(); 
1117   2              //Modify charge/discharge to xx% and keep for MFG.
1118   2                      break;
1119   2      
1120   2              case 0x94:
1121   2                      SET_MASK(cCmd, b5VolMute);
1122   2                      EC_MUTE_ACT();                                  // Mute
1123   2                      break;
1124   2              case 0x95:
1125   2                      CLR_MASK(cCmd, b5VolMute);
1126   2                      EC_MUTE_INACT();                                // Unmute
1127   2                      break;
1128   2      
1129   2              case 0x9A:                                                      // Disable AC power source
1130   2                      cBattFlag0.fbit.cCmdAcOff = 1;
1131   2                      SET_MASK(ACOFF_SOURCE, ACMD);
1132   2                      CLEAR_MASK(SYS_STATUS,AC_ADP);  //Clear AC in  flag
1133   2                      //ACOFF_HI();
1134   2                      BATT_LEN_ON();
1135   2                      ECSMI_SCIEvent(ACPI_ACOUT_SCI);
1136   2                      break;
1137   2              case 0x9B:                                                      // Enable AC power source
1138   2                      cBattFlag0.fbit.cCmdAcOff = 0;
1139   2                      CLEAR_MASK(ACOFF_SOURCE, ACMD);
1140   2                      SET_MASK(SYS_STATUS,AC_ADP);    //Set AC in  flag
1141   2                      BATT_LEN_OFF();
1142   2                      ECSMI_SCIEvent(ACPI_ACIN_SCI);
1143   2                      break;
1144   2      //72JERRY065:S+Add CMD 0x59 test voice wake up for MFG.
1145   2              case 0x9C:                                                      // Enable voice wake up MFG test
1146   2                      cDev.fbit.cD_WovMFGtest = 1;
1147   2                      Data2PortDirect(nPort, 0x55);//72JERRY068:Optimize 72JERRY065 add the return value.
1148   2                      
1149   2                      break;
1150   2      
1151   2              case 0x9D:                                                      // Disable voice wake up MFG test
1152   2                      cDev.fbit.cD_WovMFGtest = 0;
1153   2                      Data2PortDirect(nPort, 0x55);//72JERRY068:Optimize 72JERRY065 add the return value.
1154   2                      //72JERRY065:E+Add CMD 0x59 test voice wake up for MFG.
1155   2                      break;
1156   2      
1157   2              case 0x9E:                                                      //Disable Internal keyboard.
1158   2                      Flag.SCAN_INH = 1;                              // Inhibit scanner (internal keyboard).
1159   2                      Lock_Scan();                                    // Lock scanner
1160   2                      break;
1161   2      
1162   2              case 0xA2:                                                      // System shutdown
1163   2                      SET_MASK(SysStatus,ERR_ShuntDownFlag);
1164   2                      ProcessSID(COMMAND_ID);                 // Shutdown ID 0x04.
1165   2                      PWSeqStep = 1;
1166   2                      PowSeqDelay = 0x00;
1167   2              RamDebug(0x0A);
1168   2                      SysPowState=SYSTEM_S0_S5;
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 20  

1169   2                      break;
1170   2      
1171   2              case 0xA3:                                                      // System enter beep mode for LB state in CMOS setup
1172   2                      cBattInform.fbit.cBI_LbBeep = 1;
1173   2                      break;
1174   2              case 0xA4:                                                      // System enter quiet mode for LB state in CMOS setup
1175   2                      cBattInform.fbit.cBI_LbBeep = 0;
1176   2                      break;
1177   2      
1178   2              case 0xB9:                                                      // PME enable
1179   2                      uReserve07.fbit.nPmeWakeEN = 1;
1180   2                      break;
1181   2              case 0xBA:                                                      // PME disable
1182   2                      uReserve07.fbit.nPmeWakeDIS =0;
1183   2                      break;
1184   2      
1185   2              case 0xC1:      // Force battery in learning state with AC
1186   2                      cBattFlag0.fbit.cBF0_BLMode = 1;
1187   2                      break;
1188   2              case 0xC2:      // Disable battery in learning state with AC
1189   2                      cBattFlag0.fbit.cBF0_BLMode = 0;
1190   2                      break;
1191   2      
1192   2              case 0xD2:      // Beep alarm 200ms
1193   2                      PWM_BEEP = 0x7F;                        // Out beep
1194   2                      PWM_LEDBeep_CNT=0x04;           // 20*(1/100 sec)=200ms
1195   2                      break;
1196   2      
1197   2              case 0xD7:      // Battery stop charge enable
1198   2                      SET_MASK(nStopChgStat3L,ENCUSTOMER);
1199   2                      break;
1200   2      
1201   2              case 0xD8:      // Battery stop charge disable
1202   2                      CLEAR_MASK(nStopChgStat3L,ENCUSTOMER);
1203   2                      break;
1204   2      
1205   2              case 0xD9:      // Set System Flag
1206   2                      SET_MASK(KBHISR,SYSF);
1207   2                      break;
1208   2      
1209   2              case 0xDA:      // Clear system Flag
1210   2                      CLEAR_MASK(KBHISR,SYSF);
1211   2                      break;
1212   2      
1213   2              case 0xE1:
1214   2                      CLR_MASK(cCmd, b3BkOff);                // Turn on LCD backlight;
1215   2                      CLR_MASK(OEMControl, b1BkOff);  
1216   2                      //EC_TS_ON_HI(); 
1217   2                      break;
1218   2      
1219   2              case 0xE2:
1220   2                      SET_MASK(cCmd, b3BkOff);                // Turn off LCD backlight
1221   2                      SET_MASK(OEMControl, b1BkOff);  
1222   2                      //EC_TS_ON_LOW(); 
1223   2                      break;
1224   2      
1225   2              case 0xE4:      // Selection BR matrix
1226   2                      cKBStatus |= 0x03;      // Set BR keyboard.
1227   2                      LoadKBMatrixToRAM();
1228   2                      break;
1229   2              case 0xE5:      // Selection US matrix
1230   2                      cKBStatus &= 0xFC;      // Set US keyboard.
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 21  

1231   2                      LoadKBMatrixToRAM();
1232   2                      break;
1233   2              case 0xE6:      // Selection JP matrix
1234   2                      cKBStatus &= 0xFC;
1235   2                      cKBStatus |= 0x02;      // Set JP keyboard.
1236   2                      LoadKBMatrixToRAM();
1237   2                      break;
1238   2              case 0xE7:      // Selection UK matrix
1239   2                      cKBStatus &= 0xFC;
1240   2                      cKBStatus |= 0x01;      // Set UK keyboard.
1241   2                      LoadKBMatrixToRAM();
1242   2                      break;
1243   2      
1244   2              case 0xE8:                                                      // enable ACPI mode for Embedded control
1245   2                      SET_MASK(SYS_MISC1,ACPI_OS);
1246   2                      Bioswatchdog=0;
1247   2                      Bioswatchdogtime=0;
1248   2                      break;
1249   2              case 0xE9:                                                      // disable ACPI mode for Embedded control
1250   2                      CLR_MASK(SYS_MISC1,ACPI_OS);
1251   2                      break;
1252   2      
1253   2              case 0xF6:
1254   2              case 0xF7:
1255   2              case 0xF8:
1256   2              case 0xF9:
1257   2                      if (IS_MASK_SET(SYS_MISC1,ACPI_OS))
1258   2                      {
1259   3                              cSysActionFlag = SysAction_SysShutdown_EC_AutoBoot;
1260   3                      }
1261   2                      else
1262   2                      {
1263   3                              if( nData == 0xF6 )                     // ACTION
1264   3                                      cSysActionFlag = SysAction_EC_Restart;
1265   3                              else if( nData == 0xF7 )        // Fixed system action to 3 - Restart system
1266   3                                      cSysActionFlag = SysAction_EC_Restart;
1267   3                              else if( nData == 0xF8 )        // Fixed system action to 2 - Shutdown system
1268   3                                      cSysActionFlag = SysAction_EC_Shutdown;
1269   3                              else if( nData == 0xF9 )        // Fixed system action to 1 - Nothing
1270   3                                      cSysActionFlag = SysAction_Nothing;
1271   3                      }
1272   2      
1273   2                      break;
1274   2              }
1275   1      }
1276          
1277          void Cmd_5C(BYTE nPort)
1278          {
1279   1              //Get brightness level
1280   1          Data2PortDirect(nPort, nBrightValue);  
1281   1      }
1282          
1283          void Cmd_5D(BYTE sCount)
1284          {
1285   1              if ( sCount != nBrightValue )   // unequal value.
1286   1              {
1287   2                      if (( (SYS_STATUS & 0x07) >= 0x04 )&&( (SYS_STATUS & 0x07) <= 0x06))    // Win8, win8.1 or win10 ANGELAS010
             -: add win10 mode
1288   2                      {
1289   3                              if( sCount >= WIN8_BRI_MAX_STEP )
1290   3                              { 
1291   4                                      nBrightValue = WIN8_BRI_MAX_STEP - 1;
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 22  

1292   4                  }   // Set max. level.
1293   3                              else
1294   3                              { 
1295   4                                  nBrightValue = sCount; 
1296   4                  }
1297   3                      }
1298   2                      else
1299   2                      {
1300   3                              if( sCount >= BRIGHT_MAX_STEP )
1301   3                              { 
1302   4                                  nBrightValue = BRIGHT_MAX_STEP - 1; 
1303   4                  }           // Set max. level.
1304   3                              else
1305   3                              { 
1306   4                                  nBrightValue = sCount; 
1307   4                  }
1308   3                      }
1309   2              }
1310   1      }
1311          void Cmd_71(BYTE nData) //modify cmd 0x71 have one data.
1312          {
1313   1      
1314   1              
1315   1              //add new cmd 0x71 define(data is board ID 0x14 or 0x15).
1316   1              uMBID=nData;
1317   1              LoadKBMatrixToRAM();//Add load keyboard matrix when know board ID
1318   1      
1319   1      }
1320          //Add flag for test tool to keep the battery RSOC at 60%
1321          void Cmd_72(BYTE nData)
1322          {
1323   1              switch( nData )
1324   1              {
1325   2              case 0x80:
1326   2                      testtoolflag=1;
1327   2                      break;
1328   2              case 0x81:
1329   2                      testtoolflag=0;
1330   2                      break;          
1331   2              }
1332   1      
1333   1      }
1334          
1335          
1336          
1337          void Cmd_75(void) 
1338          {
1339   1              PCH_ColdBoot_TimeOut = 20;
1340   1      }
1341          
1342          
1343          
1344          void Cmd_7A(BYTE nPort,BYTE nData)
1345          {
1346   1          RamDebug(0xAA);
1347   1              RamDebug(nData);
1348   1          switch(nData)
1349   1          {
1350   2              case 0x10:
1351   2                      SET_MASK(pProject0,b1uFUdayClr);
1352   2                  break;
1353   2              case 0x11:
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 23  

1354   2                  if(IS_MASK_SET(pProject0,b3uBatteryTimeNoOK))
1355   2                  {
1356   3                              Data2Port(nPort, 0x01);
1357   3                              RamDebug(0x01);
1358   3                  }
1359   2                      else
1360   2                      {
1361   3                              Data2Port(nPort, 0x00);
1362   3                              RamDebug(0x10);
1363   3                      }
1364   2                  break;
1365   2              case 0x12:
1366   2                  SET_MASK(pProject0,b5FUBIOSWriteReady);
1367   2                  break;                 
1368   2              default:
1369   2              break;
1370   2              }
1371   1      }
1372          void Cmd_7B(BYTE nPort,BYTE nDataH,BYTE nDataL)
1373          {
1374   1          WORD FUDateTemp;
1375   1              FUDateTemp=0x0000; // add initial value is 0
1376   1              RamDebug(0xAB);
1377   1              RamDebug(nDataH);
1378   1              RamDebug(nDataL);
1379   1          switch(nDataH)
1380   1          {
1381   2              case 0x20:
1382   2                      FUDateTemp = FUDateTemp | ((WORD)nDataL << 0x09);  //bit9~15: 0~127, year-1980 //add nDataL force switch
             - to word type
1383   2                      batteryFirstUsedDateH = (batteryFirstUsedDateH | (BYTE)(FUDateTemp >> 0x08));  
1384   2                      batteryFirstUsedDateL = (batteryFirstUsedDateL | (BYTE)(FUDateTemp));
1385   2                  break;
1386   2              case 0x21:
1387   2                  FUDateTemp = FUDateTemp | ((WORD)nDataL << 0x05);  //bit5~8: 0~12, month 
1388   2                  batteryFirstUsedDateH = (batteryFirstUsedDateH | (BYTE)(FUDateTemp >> 0x08));  
1389   2                      batteryFirstUsedDateL = (batteryFirstUsedDateL | (BYTE)(FUDateTemp));
1390   2                  break;
1391   2              case 0x22:
1392   2                  FUDateTemp = FUDateTemp | (WORD)nDataL;  //bit0~4: 0~31, date 
1393   2                  batteryFirstUsedDateH = (batteryFirstUsedDateH | (BYTE)(FUDateTemp >> 0x08));  
1394   2                      batteryFirstUsedDateL = (batteryFirstUsedDateL | (BYTE)(FUDateTemp));
1395   2                  break;   
1396   2              default:
1397   2              break;
1398   2              }
1399   1      
1400   1              RamDebug(batteryFirstUsedDateH);
1401   1              RamDebug(batteryFirstUsedDateL);
1402   1      }
1403          
1404          
1405          void Cmd_7E(BYTE nPort,XBYTE nDataH,XBYTE nDataL)
1406          {
1407   1         XBYTE temp;
1408   1         temp =  *((XBYTE *)((nDataH<<8)|nDataL));
1409   1         Data2PortDirect(nPort,temp);
1410   1      }
1411          
1412          
1413          void Cmd_97(BYTE nData)
1414          {
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 24  

1415   1              uReserve07.fbit.nTPDriverIn = 1;
1416   1              RamDebug(0x97);
1417   1              RamDebug(nData);
1418   1              switch( nData )
1419   1              {
1420   2              case 0x00:
1421   2                      break;
1422   2              case 0x01:
1423   2                      CLR_MASK(pDevStus, pENABLE_TP);
1424   2                      if ( IS_MASK_SET(StatusKeeper, b5TP_Event) )
1425   2                      {
1426   3                              uVPCeventSource = TouchPad;
1427   3                              uVPCeventSource2 = 0;
1428   3                              ECSMI_SCIEvent(SDV_VPC_notify);
1429   3                              CLR_MASK(StatusKeeper, b5TP_Event);
1430   3                      }
1431   2                      break;
1432   2              case 0x02:
1433   2                      SET_MASK(pDevStus, pENABLE_TP);
1434   2                      if ( IS_MASK_SET(StatusKeeper, b5TP_Event) )
1435   2                      {
1436   3                              uVPCeventSource = TouchPad;
1437   3                              uVPCeventSource2 = 0;
1438   3                              ECSMI_SCIEvent(SDV_VPC_notify);
1439   3                              CLR_MASK(StatusKeeper, b5TP_Event);
1440   3                      }
1441   2                      break;
1442   2              }
1443   1      }
1444          
1445          void Cmd_B0(BYTE nPort,BYTE nData)
1446          {
1447   1              Data2PortDirect(nPort,( *((XBYTE *)(NameSpace|nData)) )); 
1448   1      }
1449          //start for save P80 code to setup. 
1450          void Cmd_B1(BYTE nPort,BYTE nData)
1451          {
1452   1         switch(nData)
1453   1         {
1454   2         case 0xB1:
1455   2             Data2PortDirect(nPort, P80CMOSSts);  
1456   2                 break;
1457   2         default:
1458   2                 break;
1459   2         }
1460   1      
1461   1      }
1462          void Cmd_B2(BYTE nPort,BYTE nData)
1463          {
1464   1        switch(nData)
1465   1        {
1466   2        case 0xB2:    
1467   2            Data2Port(nPort, P80Index);  
1468   2                MultiB2Port(nPort, P80CMOS[0]);
1469   2                MultiB2Port(nPort, P80CMOS[1]);
1470   2                MultiB2Port(nPort, P80CMOS[2]);
1471   2                MultiB2Port(nPort, P80CMOS[3]);
1472   2                MultiB2Port(nPort, P80CMOS[4]);
1473   2                MultiB2Port(nPort, P80CMOS[5]);
1474   2                Data2PortDirect(nPort, P80CMOS[6]);   //MultiB2Port to Data2PortDirect
1475   2                //MultiB2Port(nPort, P80Index);  
1476   2                CLR_MASK(P80CMOSSts,P80CMOSDis);
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 25  

1477   2                CLR_MASK(ACPI_HOTKEY, b6Cmd_NoShut);//When battery mode press FN+D,do not cut power only for debug.
1478   2                break;
1479   2        default:
1480   2                break;
1481   2        }
1482   1              
1483   1      }
1484          //end for save P80 code to setup. 
1485          void Cmd_B3(BYTE nPort,BYTE nDataH,BYTE nDataL)
1486          {
1487   1              cSPIEEPROM.byte= 0x00;          //msmart test
1488   1      
1489   1              nDataH = nDataH &0x0F;
1490   1              ITempW01 = (WORD)((nDataH<<8)+nDataL);
1491   1              RamDebug(0xB3);
1492   1              RamDebug(*((XBYTE *) ITempW01));
1493   1              Data2PortDirect(nPort,( *((XBYTE *) ITempW01))); 
1494   1      }
1495          
1496          void Update_EEPROM(void)
1497          {
1498   1      
1499   1              CacheDma(1,FSCEHighLevel);
1500   1      
1501   1              DisableAllInterrupt();
1502   1              if (eEEPROMBank <4)
1503   1              {
1504   2                      Erase_Eflash_1K(EEPROMA2,EEPROMA1_M1,0x00);
1505   2              }
1506   1              if (eEEPROMBank>3 && eEEPROMBank <8)
1507   1              {
1508   2                      Erase_Eflash_1K(EEPROMA2,EEPROMA1_M2,0x00);
1509   2              }
1510   1              Write_Eflash_1Byte(EEPROMA2,(eEEPROMBank | EEPROMA1_M1),eEEPROMAddrsss,eEEPROMData);
1511   1      
1512   1              if (eEEPROMBank <4)
1513   1              {
1514   2                      for(eFlashA1=0x00;eFlashA1<4;eFlashA1++)                                        // 256 bytes *4
1515   2                      {
1516   3                              e256ByteCnt=0;
1517   3                              do
1518   3                              {
1519   4                                      eEEPROMData = Read_Eflash_Byte(EEPROMA2,(eFlashA1|EEPROMA1_M1),e256ByteCnt);
1520   4                                      if (eEEPROMData == 0xFF)
1521   4                                      {
1522   5                                              eEEPROMData = Read_Eflash_Byte(EEPROMA2,(eFlashA1|EEPROMA1_D1),e256ByteCnt);
1523   5                                              Write_Eflash_1Byte(EEPROMA2,(eFlashA1|EEPROMA1_M1),e256ByteCnt,eEEPROMData);
1524   5                                      }
1525   4                                      e256ByteCnt++;
1526   4                              }while(e256ByteCnt!=0x00);                                                              // To check 256 bytes
1527   3                      }
1528   2      
1529   2                      Erase_Eflash_1K(EEPROMA2,EEPROMA1_D1,0x00);
1530   2                      for(eFlashA1=0x00;eFlashA1<4;eFlashA1++)                                        // 256 bytes *4
1531   2                      {
1532   3                              e256ByteCnt=0;
1533   3                              do
1534   3                              {
1535   4                                      eEEPROMData = Read_Eflash_Byte(EEPROMA2,(eFlashA1|EEPROMA1_M1),e256ByteCnt);
1536   4                                      Write_Eflash_1Byte(EEPROMA2,(eFlashA1|EEPROMA1_D1),e256ByteCnt,eEEPROMData);
1537   4                                      e256ByteCnt++;
1538   4                              }while(e256ByteCnt!=0x00);
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 26  

1539   3                      }
1540   2              }
1541   1              if (eEEPROMBank>3 && eEEPROMBank <8)
1542   1              {
1543   2                      for(eFlashA1=0x00;eFlashA1<4;eFlashA1++)                                        // 256 bytes *4
1544   2                      {
1545   3                              e256ByteCnt=0;
1546   3                              do
1547   3                              {
1548   4                                      eEEPROMData = Read_Eflash_Byte(EEPROMA2,(eFlashA1|EEPROMA1_D2),e256ByteCnt);
1549   4                                      Write_Eflash_1Byte(EEPROMA2,(eFlashA1|EEPROMA1_M2),e256ByteCnt,eEEPROMData);
1550   4                                      e256ByteCnt++;
1551   4                              }while(e256ByteCnt!=0x00);                                                              // To check 256 bytes
1552   3                      }
1553   2      
1554   2                      Erase_Eflash_1K(EEPROMA2,EEPROMA1_D2,0x00);
1555   2                      for(eFlashA1=0x00;eFlashA1<4;eFlashA1++)                                        // 256 bytes *4
1556   2                      {
1557   3                              e256ByteCnt=0;
1558   3                              do
1559   3                              {
1560   4                                      eEEPROMData = Read_Eflash_Byte(EEPROMA2,(eFlashA1|EEPROMA1_M2),e256ByteCnt);
1561   4                                      Write_Eflash_1Byte(EEPROMA2,(eFlashA1|EEPROMA1_D2),e256ByteCnt,eEEPROMData);
1562   4                                      e256ByteCnt++;
1563   4                              }while(e256ByteCnt!=0x00);
1564   3                      }
1565   2              }
1566   1              EnableAllInterrupt();
1567   1      }
1568          
1569          
1570          void Update_EEPROMMark(void)
1571          {
1572   1              CacheDma(1,FSCEHighLevel);
1573   1              DisableAllInterrupt();
1574   1      
1575   1              if (Read_Eflash_Byte(EEPROMA2,(0x03 | EEPROMA1_M1D),0xFF) == 0xFF)
1576   1              {
1577   2                      Erase_Eflash_1K(EEPROMA2,EEPROMA1_M1,0x00);
1578   2                      Erase_Eflash_1K(EEPROMA2,EEPROMA1_M1D,0x00);
1579   2      
1580   2                      Erase_Eflash_1K(EEPROMA2,EEPROMA1_M2,0x00);
1581   2                      Erase_Eflash_1K(EEPROMA2,EEPROMA1_M2D,0x00);
1582   2      
1583   2                      Write_Eflash_1Byte(EEPROMA2,(0x03 | EEPROMA1_M1D),0xFF,0xAA);   //mark 0x55 0xAA
1584   2              }
1585   1      
1586   1              Write_Eflash_1Byte(EEPROMA2,(eEEPROMBank | EEPROMA1_M1D),eEEPROMAddrsss,eEEPROMData);
1587   1              Write_Eflash_1Byte(EEPROMA2,(eEEPROMBank | EEPROMA1_M1),eEEPROMAddrsss,0x00);
1588   1              //Bios request that we need fill EBH = 0xAA to response EEPROM write finished
1589   1              if ((eEEPROMBank == 0x00) && (eEEPROMAddrsss != 0xEB))
1590   1              {
1591   2                      Write_Eflash_1Byte(EEPROMA2,(eEEPROMBank | EEPROMA1_M1D),0xEB,0xAA);
1592   2                      Write_Eflash_1Byte(EEPROMA2,(eEEPROMBank | EEPROMA1_M1),0xEB,0x00);
1593   2              }
1594   1      
1595   1              eUpdateEEPROMCnt = 1;                           
1596   1              cSPIEEPROM.fbit.cSPI_ROMCopyStart=1;
1597   1              Update_EEPROMB07();                             
1598   1              EnableAllInterrupt();
1599   1      }
1600          
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 27  

1601          void Erase_EEPROMAll(void)
1602          {
1603   1              CacheDma(1,FSCEHighLevel);
1604   1      
1605   1              DisableAllInterrupt();
1606   1      
1607   1              Erase_Eflash_1K(EEPROMA2,EEPROMA1_M1,0x00);
1608   1              Erase_Eflash_1K(EEPROMA2,EEPROMA1_M1D,0x00);
1609   1      
1610   1              Erase_Eflash_1K(EEPROMA2,EEPROMA1_M2,0x00);
1611   1              Erase_Eflash_1K(EEPROMA2,EEPROMA1_M2D,0x00);
1612   1      
1613   1              Erase_Eflash_1K(EEPROMA2,EEPROMA1_B03,0x00);
1614   1              Erase_Eflash_1K(EEPROMA2,EEPROMA1_B47,0x00);
1615   1              EnableAllInterrupt();
1616   1      }
1617          
1618          void Update_EEPROMB07(void)
1619          {
1620   1              if (!SystemIsS0 || ((WinFlashMark == 0xFC)&&(WinFlashMark1==0x55))) 
1621   1                      return; //Add WinFlashMark1 check
1622   1      
1623   1              if (eUpdateEEPROMCnt ==0 ) 
1624   1              return;
1625   1              else
1626   1                      eUpdateEEPROMCnt--;
1627   1      
1628   1              if (eUpdateEEPROMCnt !=0 ) 
1629   1              return;
1630   1      
1631   1          CacheDma(1,FSCEHighLevel);
1632   1      
1633   1              DisableAllInterrupt();
1634   1      #if !EN_PwrSeqTest
1635   1              #if WDT_Support
1636   1                  ResetInternalWDT();
1637   1              #endif
1638   1      #endif
1639   1      
1640   1              for(eFlashA1=0x00;eFlashA1<4;eFlashA1++)        // 256 bytes *4
1641   1              {
1642   2                      e256ByteCnt=0;
1643   2                      do
1644   2                      {
1645   3                              eEEPROMData = Read_Eflash_Byte(EEPROMA2,(eFlashA1|EEPROMA1_M1),e256ByteCnt);
1646   3                              if (eEEPROMData != 0x00)
1647   3                              {
1648   4                                      eEEPROMData = Read_Eflash_Byte(EEPROMA2,(eFlashA1|EEPROMA1_B03),e256ByteCnt);
1649   4                                      Write_Eflash_1Byte(EEPROMA2,(eFlashA1|EEPROMA1_M1D),e256ByteCnt,eEEPROMData);
1650   4                              }
1651   3      
1652   3                              eEEPROMData = Read_Eflash_Byte(EEPROMA2,(eFlashA1|EEPROMA1_M2),e256ByteCnt);
1653   3                              if (eEEPROMData != 0x00)
1654   3                              {
1655   4                                      eEEPROMData = Read_Eflash_Byte(EEPROMA2,(eFlashA1|EEPROMA1_B47),e256ByteCnt);
1656   4                                      Write_Eflash_1Byte(EEPROMA2,(eFlashA1|EEPROMA1_M2D),e256ByteCnt,eEEPROMData);
1657   4                              }
1658   3                              e256ByteCnt++;
1659   3                      }while(e256ByteCnt!=0x00);                                                              // To check 256 bytes
1660   2              }
1661   1      
1662   1              Erase_Eflash_1K(EEPROMA2,EEPROMA1_B03,0x00);
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 28  

1663   1              Erase_Eflash_1K(EEPROMA2,EEPROMA1_B47,0x00);
1664   1      
1665   1              for(eFlashA1=0x00;eFlashA1<4;eFlashA1++)                                        // 256 bytes *4
1666   1              {
1667   2                      e256ByteCnt=0;
1668   2                      do
1669   2                      {
1670   3                              eEEPROMData = Read_Eflash_Byte(EEPROMA2,(eFlashA1|EEPROMA1_M1D),e256ByteCnt);
1671   3                              Write_Eflash_1Byte(EEPROMA2,(eFlashA1|EEPROMA1_B03),e256ByteCnt,eEEPROMData);
1672   3      
1673   3                              eEEPROMData = Read_Eflash_Byte(EEPROMA2,(eFlashA1|EEPROMA1_M2D),e256ByteCnt);
1674   3                              Write_Eflash_1Byte(EEPROMA2,(eFlashA1|EEPROMA1_B47),e256ByteCnt,eEEPROMData);
1675   3      
1676   3                              e256ByteCnt++;
1677   3      
1678   3                      }while(e256ByteCnt!=0x00);                                                              // To check 256 bytes
1679   2              }
1680   1      
1681   1      
1682   1              Erase_Eflash_1K(EEPROMA2,EEPROMA1_M1D,0x00);
1683   1              cSPIEEPROM.fbit.cSPI_ROMCopyStart=0;
1684   1      
1685   1              EnableAllInterrupt();
1686   1      }
1687          
1688          
1689          void Chk_pDevStus(void)
1690          {
1691   1          if(IS_MASK_CLEAR(LENOVOPMFW_Temp,EEPROM_Token))
1692   1          {
1693   2              if (SystemIsS0 && (eUpdateEEPROMCnt==0) && (WinFlashMark != 0xFC))
1694   2              {
1695   3                      eEEPROMData=Read_Eflash_Byte(EEPROMA2,(EEPROMA1_B03|0x07),0xE1);
1696   3                      if (eEEPROMData !=      pDevStus)
1697   3                      {
1698   4                              RamDebug(0xA1); //modify 0xAA to 0xA1 to avoid repeat
1699   4                              RamDebug(pDevStus);
1700   4      
1701   4                              eUpdatepDevStusCnt++;
1702   4                              eEEPROMBank= 0x07;
1703   4                              eEEPROMAddrsss = 0xE1;
1704   4                              eEEPROMData = pDevStus;
1705   4      
1706   4                          Update_EEPROMMark();
1707   4                      }
1708   3              }
1709   2         }
1710   1      }
1711          
1712          void Chk_KB_Backlight(void)
1713          {
1714   1          if(IS_MASK_CLEAR(LENOVOPMFW_Temp,EEPROM_Token))
1715   1          {
1716   2              if (SystemIsS0 && (eUpdateEEPROMCnt==0) && (WinFlashMark != 0xFC) && (IS_MASK_CLEAR(LED_KB_PWM_Count,
             - BIT7)) )
1717   2              {
1718   3                              if (UpdateLEDBL_delay !=0)
1719   3                              {
1720   4                                      UpdateLEDBL_delay --;
1721   4                                      if (UpdateLEDBL_delay ==0)
1722   4                                      {
1723   5                                              eEEPROMData=Read_Eflash_Byte(EEPROMA2,(EEPROMA1_B03|0x07),0xE2);
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 29  

1724   5                                      if (eEEPROMData !=      LED_KB_PWM_Step)
1725   5                                      {
1726   6                                              RamDebug(0xBB);
1727   6                                              RamDebug(LED_KB_PWM_Step);
1728   6      
1729   6                                              eUpdatepDevStusCnt++;
1730   6                                              eEEPROMBank= 0x07;
1731   6                                              eEEPROMAddrsss = 0xE2;
1732   6                                              eEEPROMData = LED_KB_PWM_Step;
1733   6                                          Update_EEPROMMark();
1734   6                                      }
1735   5                                      }
1736   4                              }
1737   3              }
1738   2          }
1739   1      }
1740          
1741          void Chk_UEFIStatus(void)
1742          {
1743   1          if(IS_MASK_CLEAR(LENOVOPMFW_Temp,EEPROM_Token))
1744   1          {
1745   2              if (SystemIsS0 && (eUpdateEEPROMCnt==0) && (WinFlashMark != 0xFC))
1746   2              {
1747   3                      eEEPROMData=Read_Eflash_Byte(EEPROMA2,(EEPROMA1_B03|0x00),0xF1);
1748   3                      if ( (eEEPROMData &= 0xC0) != (CURRENT_STATUS &= 0xC0) )
1749   3                      {
1750   4                              eEEPROMBank= 0x00;
1751   4                              eEEPROMAddrsss = 0xF1;
1752   4                              eEEPROMData = (CURRENT_STATUS &= 0xC0);
1753   4                          Update_EEPROMMark();
1754   4                      }
1755   3              }
1756   2          }
1757   1      }
1758          void Clr_UEFIStatus(void)
1759          {
1760   1          if(IS_MASK_CLEAR(LENOVOPMFW_Temp,EEPROM_Token))
1761   1          {
1762   2              if ( (eUpdateEEPROMCnt==0) && (WinFlashMark != 0xFC) )
1763   2              {
1764   3                      eEEPROMData=Read_Eflash_Byte(EEPROMA2,(EEPROMA1_B03|0x00),0xF1);
1765   3                      CURRENT_STATUS &= 0x3F;
1766   3                      CURRENT_STATUS |= ( eEEPROMData & 0xC0);
1767   3                      if ( eEEPROMData != 0xC0 )
1768   3                      {
1769   4                              eEEPROMBank= 0x00;
1770   4                              eEEPROMAddrsss = 0xF1;
1771   4                              eEEPROMData = 0xC0;
1772   4                          Update_EEPROMMark();
1773   4      
1774   4                      }
1775   3              }
1776   2      
1777   2          }
1778   1      }
1779          
1780          void Update_16ByteEEPROM(void)
1781          {
1782   1              BYTE i,j;
1783   1      
1784   1              CacheDma(1,FSCEHighLevel);
1785   1          DisableAllInterrupt();
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 30  

1786   1      
1787   1              if (Read_Eflash_Byte(EEPROMA2,EEPROMM1_16Byte_end ,0xF0) != 0xFF)
1788   1              {
1789   2                      Erase_Eflash_1K(EEPROMA2,EEPROMA1_16Byte,0x00);
1790   2              }
1791   1      
1792   1              for (i=0; i<4 ;i++) // 01B800 ~ 01BC00
1793   1              {
1794   2                      for (j=0; j< 0x10 ;j++)
1795   2                      {
1796   3                              eEEPROMData = Read_Eflash_Byte(EEPROMA2,(EEPROMA1_16Byte + i),(j*16));
1797   3                              if(eEEPROMData == 0xFF)
1798   3                                      break;
1799   3                      }
1800   2                      if (eEEPROMData == 0xFF)
1801   2                              break;
1802   2              }
1803   1              Write_Eflash_1Byte(EEPROMA2,(EEPROMA1_16Byte+i),(j*16),j+80);
1804   1              Write_Eflash_1Byte(EEPROMA2,(EEPROMA1_16Byte+i),(j*16)+4,pLastSID);
1805   1              Write_Eflash_1Byte(EEPROMA2,(EEPROMA1_16Byte+i),(j*16)+6,TEMP_Buff_3);//Record CPU average temperature wh
             -en CPU over temperture shuntdown .
1806   1          
1807   1              Write_Eflash_1Byte(EEPROMA2,(EEPROMA1_16Byte+i),(j*16)+8,VGA_TBuff3);//Add record GPU temperature when sh
             -utdown.
1808   1      
1809   1      
1810   1              if(pLastSID == PMIC_Shutdown_ID)
1811   1              {
1812   2                      Write_Eflash_1Byte(EEPROMA2,(EEPROMA1_16Byte+i),(j*16)+10,PowerOVP_REG); 
1813   2                      Write_Eflash_1Byte(EEPROMA2,(EEPROMA1_16Byte+i),(j*16)+11,PowerUVP_REG); 
1814   2                      Write_Eflash_1Byte(EEPROMA2,(EEPROMA1_16Byte+i),(j*16)+12,PowerOCP_REG);
1815   2      
1816   2                      Write_Eflash_1Byte(EEPROMA2,(EEPROMA1_16Byte+i),(j*16)+13,PowerOTP_REG); 
1817   2              } 
1818   1          EnableAllInterrupt();
1819   1      }
1820          
1821          
1822          
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 31  

ASSEMBLY LISTING OF GENERATED OBJECT CODE


             ; FUNCTION Com0205 (BEGIN)
0000         L?0518:
0000 900000      E     MOV     DPTR,#eEEPROMData
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
0005 900000      E     MOV     DPTR,#eFlashA1
0008 E0                MOVX    A,@DPTR
0009 44A0              ORL     A,#0A0H
000B         L?0519:
000B 900000      E     MOV     DPTR,#e256ByteCnt
000E         L?0520:
000E FD                MOV     R5,A
000F         L?0521:
000F E0                MOVX    A,@DPTR
0010 FB                MOV     R3,A
0011 900000      E     MOV     DPTR,#eEEPROMData
0014         L?0522:
0014 E0                MOVX    A,@DPTR
0015 900000      E     MOV     DPTR,#?_Write_Eflash_1Byte?BYTE+03H
0018 F0                MOVX    @DPTR,A
0019 7F01              MOV     R7,#01H
001B 22                RET     
001C         L?0524:
001C         L?0525:
001C 900000      E     MOV     DPTR,#eFlashA1
001F E0                MOVX    A,@DPTR
0020 44A8              ORL     A,#0A8H
0022         L?0526:
0022 FD                MOV     R5,A
0023 900000      E     MOV     DPTR,#e256ByteCnt
0026 E0                MOVX    A,@DPTR
0027 FB                MOV     R3,A
0028 7F01              MOV     R7,#01H
002A 22                RET     
002B         L?0529:
002B         L?0530:
002B 900000      E     MOV     DPTR,#eFlashA1
002E E0                MOVX    A,@DPTR
002F 04                INC     A
0030 F0                MOVX    @DPTR,A
0031 E0                MOVX    A,@DPTR
0032 C3                CLR     C
0033 9404              SUBB    A,#04H
0035 22                RET     
0036         L?0531:
0036         L?0532:
0036 900000      E     MOV     DPTR,#eEEPROMData
0039 EF                MOV     A,R7
003A F0                MOVX    @DPTR,A
003B 900000      E     MOV     DPTR,#eFlashA1
003E E0                MOVX    A,@DPTR
003F 22                RET     
0040         L?0534:
0040         L?0535:
0040 900000      R     MOV     DPTR,#i
0043         L?0536:
0043 E0                MOVX    A,@DPTR
0044 24B8              ADD     A,#0B8H
0046 FD                MOV     R5,A
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 32  

0047 A3                INC     DPTR
0048 E0                MOVX    A,@DPTR
0049 C4                SWAP    A
004A 54F0              ANL     A,#0F0H
004C 22                RET     
004D         L?0537:
004D 900000      E     MOV     DPTR,#eUpdatepDevStusCnt
0050 E0                MOVX    A,@DPTR
0051 04                INC     A
0052         L?0538:
0052 F0                MOVX    @DPTR,A
0053 7407              MOV     A,#07H
0055         L?0539:
0055 900000      E     MOV     DPTR,#eEEPROMBank
0058 F0                MOVX    @DPTR,A
0059 900000      E     MOV     DPTR,#eEEPROMAddrsss
005C 22                RET     
005D         L?0541:
005D         L?0542:
005D 900000      E     MOV     DPTR,#e256ByteCnt
0060 E0                MOVX    A,@DPTR
0061 04                INC     A
0062 F0                MOVX    @DPTR,A
0063 E0                MOVX    A,@DPTR
0064 22                RET     
0065         L?0545:
0065         L?0546:
0065 900000      E     MOV     DPTR,#AdapterIDOn_Flag
0068 7401              MOV     A,#01H
006A F0                MOVX    @DPTR,A
006B 900000      E     MOV     DPTR,#ADPIDON10MS_NUM
006E 740A              MOV     A,#0AH
0070 F0                MOVX    @DPTR,A
0071 22                RET     
0072         L?0547:
0072 F0                MOVX    @DPTR,A
0073 900000      R     MOV     DPTR,#nPort
0076 E0                MOVX    A,@DPTR
0077 FF                MOV     R7,A
0078 120000      R     LCALL   _GetData2
007B 900000      E     MOV     DPTR,#CmdData2
007E E0                MOVX    A,@DPTR
007F 900000      E     MOV     DPTR,#cTargetGauge
0082 F0                MOVX    @DPTR,A
0083 E0                MOVX    A,@DPTR
0084 D3                SETB    C
0085 9464              SUBB    A,#064H
0087 22                RET     
0088         L?0549:
0088 900000      E     MOV     DPTR,#pProject0
008B E0                MOVX    A,@DPTR
008C 54EF              ANL     A,#0EFH
008E F0                MOVX    @DPTR,A
008F 900000      E     MOV     DPTR,#uMBGPU
0092 7402              MOV     A,#02H
0094 F0                MOVX    @DPTR,A
0095 900000      E     MOV     DPTR,#uPJID
0098 22                RET     
0099         L?0550:
0099 900000      E     MOV     DPTR,#uReserve07
009C E0                MOVX    A,@DPTR
009D 54BF              ANL     A,#0BFH
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 33  

009F F0                MOVX    @DPTR,A
00A0 E0                MOVX    A,@DPTR
00A1 547F              ANL     A,#07FH
00A3 F0                MOVX    @DPTR,A
00A4 900000      E     MOV     DPTR,#Thro_Status2
00A7 E0                MOVX    A,@DPTR
00A8 22                RET     
00A9         L?0551:
00A9 900000      E     MOV     DPTR,#cBattFlag0
00AC E0                MOVX    A,@DPTR
00AD 54FD              ANL     A,#0FDH
00AF         L?0552:
00AF F0                MOVX    @DPTR,A
00B0 E0                MOVX    A,@DPTR
00B1 54FE              ANL     A,#0FEH
00B3 F0                MOVX    @DPTR,A
00B4 E0                MOVX    A,@DPTR
00B5 22                RET     
00B6         L?0555:
00B6         L?0556:
00B6 900000      E     MOV     DPTR,#CURRENT_STATUS
00B9 E0                MOVX    A,@DPTR
00BA 543F              ANL     A,#03FH
00BC F0                MOVX    @DPTR,A
00BD E0                MOVX    A,@DPTR
00BE 22                RET     
00BF         L?0558:
00BF         L?0559:
00BF 900000      E     MOV     DPTR,#WinFlashMark
00C2 E0                MOVX    A,@DPTR
00C3 64FC              XRL     A,#0FCH
00C5 22                RET     
00C6         L?0561:
00C6 E0                MOVX    A,@DPTR
00C7 24B8              ADD     A,#0B8H
00C9 FD                MOV     R5,A
00CA EF                MOV     A,R7
00CB C4                SWAP    A
00CC 54F0              ANL     A,#0F0H
00CE FB                MOV     R3,A
00CF 7F01              MOV     R7,#01H
00D1 22                RET     
00D2         L?0563:
00D2         L?0564:
00D2 AB00        E     MOV     R3,KBHIData
00D4 AD00        E     MOV     R5,KBHIData1
00D6 7F60              MOV     R7,#060H
00D8 22                RET     
00D9         L?0565:
00D9 900000      E     MOV     DPTR,#SysStatus
00DC E0                MOVX    A,@DPTR
00DD 4480              ORL     A,#080H
00DF F0                MOVX    @DPTR,A
00E0 D200        E     SETB    Ccb42_DISAB_KEY
00E2 22                RET     
00E3         L?0566:
00E3         L?0567:
00E3 900000      E     MOV     DPTR,#cKBStatus
00E6 E0                MOVX    A,@DPTR
00E7 54FC              ANL     A,#0FCH
00E9 22                RET     
00EA         L?0568:
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 34  

00EA         L?0569:
00EA 900000      E     MOV     DPTR,#eEEPROMData
00ED EF                MOV     A,R7
00EE F0                MOVX    @DPTR,A
00EF E0                MOVX    A,@DPTR
00F0 22                RET     
00F1         L?0570:
00F1         L?0571:
00F1 900000      E     MOV     DPTR,#SysPowState
00F4 E0                MOVX    A,@DPTR
00F5 6410              XRL     A,#010H
00F7 22                RET     
             ; FUNCTION Com0205 (END)

             ; FUNCTION Cmd_B4 (BEGIN)
                                           ; SOURCE LINE # 13
                                           ; SOURCE LINE # 14
                                           ; SOURCE LINE # 16
0000 900000      E     MOV     DPTR,#nStopChgStat3H
0003 E0                MOVX    A,@DPTR
0004 4410              ORL     A,#010H
0006 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 17
0007 900000      E     MOV     DPTR,#GPCRA5
000A 7440              MOV     A,#040H
000C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 18
000D 900000      E     MOV     DPTR,#GPDRA
0010 E0                MOVX    A,@DPTR
0011 4420              ORL     A,#020H
0013 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 20
0014 900000      E     MOV     DPTR,#CHGIC_ptr
0017 7402              MOV     A,#02H
0019 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 21
001A 120000      E     LCALL   WriteSmartChgIC
                                           ; SOURCE LINE # 22
001D E4                CLR     A
001E FF                MOV     R7,A
001F 020000      E     LJMP    _RamProgram
             ; FUNCTION Cmd_B4 (END)

             ; FUNCTION _GetData2 (BEGIN)
                                           ; SOURCE LINE # 25
;---- Variable 'nPort' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 26
                                           ; SOURCE LINE # 27
0000 C28E              CLR     TR1
                                           ; SOURCE LINE # 28
0002 C2AB              CLR     ET1
                                           ; SOURCE LINE # 29
0004 00                NOP     
                                           ; SOURCE LINE # 30
0005 00                NOP     
                                           ; SOURCE LINE # 31
0006 00                NOP     
                                           ; SOURCE LINE # 32
0007 00                NOP     
                                           ; SOURCE LINE # 33
0008 758DC4            MOV     TH1,#0C4H
                                           ; SOURCE LINE # 34
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 35  

000B 758B1B            MOV     TL1,#01BH
                                           ; SOURCE LINE # 35
000E C28F              CLR     TF1
                                           ; SOURCE LINE # 36
0010 D28E              SETB    TR1
0012         ?C0002:
                                           ; SOURCE LINE # 38
0012 208F33            JB      TF1,?C0003
                                           ; SOURCE LINE # 39
                                           ; SOURCE LINE # 40
0015 EF                MOV     A,R7
0016 6460              XRL     A,#060H
0018 7015              JNZ     ?C0004
                                           ; SOURCE LINE # 41
                                           ; SOURCE LINE # 42
001A 900000      E     MOV     DPTR,#KBHISR
001D E0                MOVX    A,@DPTR
001E 30E1F1            JNB     ACC.1,?C0002
                                           ; SOURCE LINE # 43
                                           ; SOURCE LINE # 44
0021 E0                MOVX    A,@DPTR
0022 20E323            JB      ACC.3,?C0437
                                           ; SOURCE LINE # 45
                                           ; SOURCE LINE # 46
0025 900000      E     MOV     DPTR,#KBHIDIR
0028 E0                MOVX    A,@DPTR
0029 900000      E     MOV     DPTR,#CmdData2
002C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 47
002D         ?C0006:
                                           ; SOURCE LINE # 48
                                           ; SOURCE LINE # 49
                                           ; SOURCE LINE # 50
002D 8019              SJMP    ?C0437
                                           ; SOURCE LINE # 52
                                           ; SOURCE LINE # 53
002F         ?C0004:
                                           ; SOURCE LINE # 54
002F EF                MOV     A,R7
0030 B462DF            CJNE    A,#062H,?C0002
                                           ; SOURCE LINE # 55
                                           ; SOURCE LINE # 56
0033 900000      E     MOV     DPTR,#PM1STS
0036 E0                MOVX    A,@DPTR
0037 30E1D8            JNB     ACC.1,?C0002
                                           ; SOURCE LINE # 57
                                           ; SOURCE LINE # 58
003A E0                MOVX    A,@DPTR
003B 20E308            JB      ACC.3,?C0011
                                           ; SOURCE LINE # 59
                                           ; SOURCE LINE # 60
003E 900000      E     MOV     DPTR,#PM1DI
0041 E0                MOVX    A,@DPTR
0042 900000      E     MOV     DPTR,#CmdData2
0045 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 61
0046         ?C0011:
                                           ; SOURCE LINE # 62
0046         ?C0436:
                                           ; SOURCE LINE # 63
                                           ; SOURCE LINE # 64
0046 8000              SJMP    ?C0437
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 36  

                                           ; SOURCE LINE # 66
                                           ; SOURCE LINE # 67
                                           ; SOURCE LINE # 68
0048         ?C0003:
                                           ; SOURCE LINE # 69
0048         ?C0437:
0048 C28E              CLR     TR1
                                           ; SOURCE LINE # 70
004A C28F              CLR     TF1
                                           ; SOURCE LINE # 71
004C D2AB              SETB    ET1
                                           ; SOURCE LINE # 72
004E         ?C0007:
004E 22                RET     
             ; FUNCTION _GetData2 (END)

             ; FUNCTION _Hook_60Port (BEGIN)
                                           ; SOURCE LINE # 80
;---- Variable 'KBHICmd' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 81
                                           ; SOURCE LINE # 84
0000 EF                MOV     A,R7
0001 120000      E     LCALL   ?C?CCASE
0004 0000        R     DW      ?C0013
0006 40                DB      040H
0007 0000        R     DW      ?C0014
0009 41                DB      041H
000A 0000        R     DW      ?C0019
000C 42                DB      042H
000D 0000        R     DW      ?C0020
000F 43                DB      043H
0010 0000        R     DW      ?C0021
0012 45                DB      045H
0013 0000        R     DW      ?C0022
0015 46                DB      046H
0016 0000        R     DW      ?C0023
0018 47                DB      047H
0019 0000        R     DW      ?C0025
001B 4B                DB      04BH
001C 0000        R     DW      ?C0034
001E 4C                DB      04CH
001F 0000        R     DW      ?C0038
0021 4D                DB      04DH
0022 0000        R     DW      ?C0041
0024 4E                DB      04EH
0025 0000        R     DW      ?C0042
0027 52                DB      052H
0028 0000        R     DW      ?C0049
002A 53                DB      053H
002B 0000        R     DW      ?C0052
002D 58                DB      058H
002E 0000        R     DW      ?C0053
0030 59                DB      059H
0031 0000        R     DW      ?C0054
0033 5C                DB      05CH
0034 0000        R     DW      ?C0055
0036 5D                DB      05DH
0037 0000        R     DW      ?C0056
0039 71                DB      071H
003A 0000        R     DW      ?C0057
003C 72                DB      072H
003D 0000        R     DW      ?C0058
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 37  

003F 7A                DB      07AH
0040 0000        R     DW      ?C0059
0042 7B                DB      07BH
0043 0000        R     DW      ?C0061
0045 7E                DB      07EH
0046 0000        R     DW      ?C0063
0048 97                DB      097H
0049 0000        R     DW      ?C0064
004B B0                DB      0B0H
004C 0000        R     DW      ?C0067
004E B3                DB      0B3H
004F 0000        R     DW      ?C0065
0051 BC                DB      0BCH
0052 0000              DW      00H
0054 0000        R     DW      ?C0069
                                           ; SOURCE LINE # 85
                                           ; SOURCE LINE # 86
0056         ?C0013:
                                           ; SOURCE LINE # 87
0056 AF00        E     MOV     R7,KBHIData
0058 020000      R     LJMP    _Cmd_40
                                           ; SOURCE LINE # 88
                                           ; SOURCE LINE # 89
005B         ?C0014:
                                           ; SOURCE LINE # 90
005B E500        E     MOV     A,KBHIData
005D B4A005            CJNE    A,#0A0H,?C0015
0060 7F60              MOV     R7,#060H
0062 120000      R     LCALL   _Cmd_41_A0
0065         ?C0015:
                                           ; SOURCE LINE # 91
0065 E500        E     MOV     A,KBHIData
0067 B4A105            CJNE    A,#0A1H,?C0016
006A 7F60              MOV     R7,#060H
006C 120000      R     LCALL   _Cmd_41_A1
006F         ?C0016:
                                           ; SOURCE LINE # 92
006F E500        E     MOV     A,KBHIData
0071 B4A205            CJNE    A,#0A2H,?C0017
0074 7F60              MOV     R7,#060H
0076 120000      R     LCALL   _Cmd_41_A2
0079         ?C0017:
                                           ; SOURCE LINE # 93
0079 E500        E     MOV     A,KBHIData
007B 64A3              XRL     A,#0A3H
007D 6003              JZ      $ + 5H
007F 020000      R     LJMP    ?C0069
0082 7F60              MOV     R7,#060H
0084 020000      R     LJMP    _Cmd_41_A3
                                           ; SOURCE LINE # 94
                                           ; SOURCE LINE # 95
0087         ?C0019:
                                           ; SOURCE LINE # 96
0087 AF00        E     MOV     R7,KBHIData
0089 020000      R     LJMP    _Cmd_42
                                           ; SOURCE LINE # 97
                                           ; SOURCE LINE # 98
008C         ?C0020:
                                           ; SOURCE LINE # 99
008C AD00        E     MOV     R5,KBHIData
008E 7F60              MOV     R7,#060H
0090 020000      R     LJMP    _Cmd_43
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 38  

                                           ; SOURCE LINE # 100
                                           ; SOURCE LINE # 101
0093         ?C0021:
                                           ; SOURCE LINE # 102
0093 AD00        E     MOV     R5,KBHIData
0095 7F60              MOV     R7,#060H
0097 020000      R     LJMP    _Cmd_45
                                           ; SOURCE LINE # 103
                                           ; SOURCE LINE # 105
009A         ?C0022:
                                           ; SOURCE LINE # 106
009A AD00        E     MOV     R5,KBHIData
009C 7F60              MOV     R7,#060H
009E 020000      R     LJMP    _Cmd_46
                                           ; SOURCE LINE # 107
                                           ; SOURCE LINE # 108
00A1         ?C0023:
                                           ; SOURCE LINE # 109
00A1 AD00        E     MOV     R5,KBHIData
00A3 7F60              MOV     R7,#060H
00A5 020000      R     LJMP    _Cmd_47
                                           ; SOURCE LINE # 110
                                           ; SOURCE LINE # 111
                                           ; SOURCE LINE # 112
                                           ; SOURCE LINE # 113
00A8         ?C0025:
                                           ; SOURCE LINE # 114
00A8 E500        E     MOV     A,KBHIStep
00AA B40402            CJNE    A,#04H,?C0026
                                           ; SOURCE LINE # 115
                                           ; SOURCE LINE # 116
                                           ; SOURCE LINE # 117
00AD 805D              SJMP    ?C0438
                                           ; SOURCE LINE # 118
00AF         ?C0026:
                                           ; SOURCE LINE # 119
00AF E500        E     MOV     A,KBHIStep
00B1 B40316            CJNE    A,#03H,?C0027
                                           ; SOURCE LINE # 120
                                           ; SOURCE LINE # 121
00B4 900000      E     MOV     DPTR,#eEEPROMAddrsss
00B7 E500        E     MOV     A,KBHIData
00B9 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 122
00BA E0                MOVX    A,@DPTR
00BB 64E0              XRL     A,#0E0H
00BD 6003              JZ      $ + 5H
00BF 020000      R     LJMP    ?C0069
                                           ; SOURCE LINE # 123
                                           ; SOURCE LINE # 124
00C2 900000      E     MOV     DPTR,#MBID_Reload
00C5 E0                MOVX    A,@DPTR
00C6 4401              ORL     A,#01H
00C8 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 125
                                           ; SOURCE LINE # 126
00C9 22                RET     
                                           ; SOURCE LINE # 127
00CA         ?C0027:
                                           ; SOURCE LINE # 128
00CA E500        E     MOV     A,KBHIStep
00CC B40216            CJNE    A,#02H,?C0029
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 39  

                                           ; SOURCE LINE # 129
                                           ; SOURCE LINE # 130
00CF 900000      E     MOV     DPTR,#eEEPROMBank
00D2 E500        E     MOV     A,KBHIData
00D4 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 131
00D5 E0                MOVX    A,@DPTR
00D6 6407              XRL     A,#07H
00D8 6003              JZ      $ + 5H
00DA 020000      R     LJMP    ?C0069
                                           ; SOURCE LINE # 132
                                           ; SOURCE LINE # 133
00DD 900000      E     MOV     DPTR,#MBID_Reload
00E0 E0                MOVX    A,@DPTR
00E1 4402              ORL     A,#02H
00E3 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 134
                                           ; SOURCE LINE # 135
00E4 22                RET     
                                           ; SOURCE LINE # 136
00E5         ?C0029:
                                           ; SOURCE LINE # 137
00E5 E500        E     MOV     A,KBHIStep
00E7 B4010A            CJNE    A,#01H,?C0031
                                           ; SOURCE LINE # 138
                                           ; SOURCE LINE # 139
                                           ; SOURCE LINE # 140
                                           ; SOURCE LINE # 141
                                           ; SOURCE LINE # 142
00EA 120000      R     LCALL   L?0543
                                           ; SOURCE LINE # 143
00ED E4                CLR     A
00EE FD                MOV     R5,A
00EF 7F60              MOV     R7,#060H
00F1 120000      E     LCALL   _Data2PortDirect
                                           ; SOURCE LINE # 144
00F4         ?C0031:
                                           ; SOURCE LINE # 146
00F4 900000      E     MOV     DPTR,#MBID_Reload
00F7 E0                MOVX    A,@DPTR
00F8 5403              ANL     A,#03H
00FA FF                MOV     R7,A
00FB BF0303            CJNE    R7,#03H,?C0032
                                           ; SOURCE LINE # 147
                                           ; SOURCE LINE # 148
00FE E4                CLR     A
00FF F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 149
0100 22                RET     
0101         ?C0032:
                                           ; SOURCE LINE # 151
                                           ; SOURCE LINE # 152
0101 E4                CLR     A
0102 900000      E     MOV     DPTR,#MBID_Reload
0105 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 153
                                           ; SOURCE LINE # 154
0106 22                RET     
                                           ; SOURCE LINE # 156
0107         ?C0034:
                                           ; SOURCE LINE # 157
0107 E500        E     MOV     A,KBHIStep
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 40  

0109 B40305            CJNE    A,#03H,?C0035
                                           ; SOURCE LINE # 158
                                           ; SOURCE LINE # 159
010C         ?C0438:
010C 900000      R     MOV     DPTR,#i
                                           ; SOURCE LINE # 160
010F 8022              SJMP    ?C0440
                                           ; SOURCE LINE # 161
0111         ?C0035:
                                           ; SOURCE LINE # 162
0111 E500        E     MOV     A,KBHIStep
0113 B40205            CJNE    A,#02H,?C0036
                                           ; SOURCE LINE # 163
                                           ; SOURCE LINE # 164
0116 900000      E     MOV     DPTR,#eEEPROMAddrsss
0119         ?C0439:
                                           ; SOURCE LINE # 165
0119 8018              SJMP    ?C0440
                                           ; SOURCE LINE # 166
011B         ?C0036:
                                           ; SOURCE LINE # 167
011B E500        E     MOV     A,KBHIStep
011D 6401              XRL     A,#01H
011F 6003              JZ      $ + 5H
0121 020000      R     LJMP    ?C0069
                                           ; SOURCE LINE # 168
                                           ; SOURCE LINE # 169
0124 E500        E     MOV     A,KBHIData
                                           ; SOURCE LINE # 170
0126 120000      R     LCALL   L?0539
                                           ; SOURCE LINE # 171
                                           ; SOURCE LINE # 172
0129 801F              SJMP    ?C0441
                                           ; SOURCE LINE # 174
012B         ?C0038:
                                           ; SOURCE LINE # 175
012B E500        E     MOV     A,KBHIStep
012D B40207            CJNE    A,#02H,?C0039
                                           ; SOURCE LINE # 176
                                           ; SOURCE LINE # 177
0130 900000      E     MOV     DPTR,#eEEPROMAddrsss
0133         ?C0440:
0133 E500        E     MOV     A,KBHIData
0135 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 178
0136 22                RET     
                                           ; SOURCE LINE # 179
0137         ?C0039:
                                           ; SOURCE LINE # 180
0137 E500        E     MOV     A,KBHIStep
0139 6401              XRL     A,#01H
013B 6003              JZ      $ + 5H
013D 020000      R     LJMP    ?C0069
                                           ; SOURCE LINE # 181
                                           ; SOURCE LINE # 182
                                           ; SOURCE LINE # 183
                                           ; SOURCE LINE # 184
                                           ; SOURCE LINE # 185
0140 120000      R     LCALL   L?0543
                                           ; SOURCE LINE # 186
                                           ; SOURCE LINE # 187
0143 22                RET     
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 41  

                                           ; SOURCE LINE # 188
0144         ?C0041:
                                           ; SOURCE LINE # 189
0144 900000      E     MOV     DPTR,#eEEPROMAddrsss
0147 E500        E     MOV     A,KBHIData
0149 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 190
014A         ?C0441:
014A E0                MOVX    A,@DPTR
014B FD                MOV     R5,A
014C 7F60              MOV     R7,#060H
014E 020000      R     LJMP    _Cmd_4E
                                           ; SOURCE LINE # 191
                                           ; SOURCE LINE # 192
0151         ?C0042:
                                           ; SOURCE LINE # 193
0151 E500        E     MOV     A,KBHIData
0153 B4A005            CJNE    A,#0A0H,?C0043
0156 7F60              MOV     R7,#060H
0158 120000      R     LCALL   _Cmd_52_A0
015B         ?C0043:
                                           ; SOURCE LINE # 194
015B E500        E     MOV     A,KBHIData
015D B4A305            CJNE    A,#0A3H,?C0044
0160 7F60              MOV     R7,#060H
0162 120000      R     LCALL   _Cmd_52_A3
0165         ?C0044:
                                           ; SOURCE LINE # 195
0165 E500        E     MOV     A,KBHIData
0167 B4A405            CJNE    A,#0A4H,?C0045
016A 7F60              MOV     R7,#060H
016C 120000      R     LCALL   _Cmd_52_A4
016F         ?C0045:
                                           ; SOURCE LINE # 196
016F E500        E     MOV     A,KBHIData
0171 B4A505            CJNE    A,#0A5H,?C0046
0174 7F60              MOV     R7,#060H
0176 120000      R     LCALL   _Cmd_52_A5
0179         ?C0046:
                                           ; SOURCE LINE # 197
0179 E500        E     MOV     A,KBHIData
017B B4A605            CJNE    A,#0A6H,?C0047
017E 7F60              MOV     R7,#060H
0180 120000      R     LCALL   _Cmd_52_A6
0183         ?C0047:
                                           ; SOURCE LINE # 198
0183 E500        E     MOV     A,KBHIData
0185 64A7              XRL     A,#0A7H
0187 6003              JZ      $ + 5H
0189 020000      R     LJMP    ?C0069
018C 7F60              MOV     R7,#060H
018E 020000      R     LJMP    _Cmd_52_A7
                                           ; SOURCE LINE # 199
                                           ; SOURCE LINE # 200
0191         ?C0049:
                                           ; SOURCE LINE # 201
0191 E500        E     MOV     A,KBHIStep
0193 6401              XRL     A,#01H
0195 707A              JNZ     ?C0069
                                           ; SOURCE LINE # 202
                                           ; SOURCE LINE # 203
0197 900000      R     MOV     DPTR,#?_Cmd_53?BYTE+03H
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 42  

019A E500        E     MOV     A,KBHIData
019C F0                MOVX    @DPTR,A
019D AB00        E     MOV     R3,KBHIData1
019F AD00        E     MOV     R5,KBHIData2
01A1 7F60              MOV     R7,#060H
01A3 020000      R     LJMP    _Cmd_53
                                           ; SOURCE LINE # 204
                                           ; SOURCE LINE # 205
                                           ; SOURCE LINE # 206
                                           ; SOURCE LINE # 207
                                           ; SOURCE LINE # 208
01A6         ?C0052:
                                           ; SOURCE LINE # 209
01A6 AF00        E     MOV     R7,KBHIData
01A8 020000      R     LJMP    _Cmd_58
                                           ; SOURCE LINE # 210
                                           ; SOURCE LINE # 211
01AB         ?C0053:
                                           ; SOURCE LINE # 212
01AB E4                CLR     A
01AC FB                MOV     R3,A
01AD AD00        E     MOV     R5,KBHIData
01AF 7F60              MOV     R7,#060H
01B1 020000      R     LJMP    _Cmd_59
                                           ; SOURCE LINE # 213
                                           ; SOURCE LINE # 214
01B4         ?C0054:
                                           ; SOURCE LINE # 215
01B4 7F60              MOV     R7,#060H
01B6 020000      R     LJMP    _Cmd_5C
                                           ; SOURCE LINE # 216
                                           ; SOURCE LINE # 217
01B9         ?C0055:
                                           ; SOURCE LINE # 218
01B9 AF00        E     MOV     R7,KBHIData
01BB 020000      R     LJMP    _Cmd_5D
                                           ; SOURCE LINE # 219
                                           ; SOURCE LINE # 220
01BE         ?C0056:
                                           ; SOURCE LINE # 221
01BE AF00        E     MOV     R7,KBHIData
01C0 020000      R     LJMP    _Cmd_71
                                           ; SOURCE LINE # 222
                                           ; SOURCE LINE # 223
01C3         ?C0057:
                                           ; SOURCE LINE # 224
01C3 AF00        E     MOV     R7,KBHIData
01C5 020000      R     LJMP    _Cmd_72
                                           ; SOURCE LINE # 225
                                           ; SOURCE LINE # 226
01C8         ?C0058:
                                           ; SOURCE LINE # 227
01C8 AD00        E     MOV     R5,KBHIData
01CA 7F60              MOV     R7,#060H
01CC 020000      R     LJMP    _Cmd_7A
                                           ; SOURCE LINE # 228
                                           ; SOURCE LINE # 229
01CF         ?C0059:
                                           ; SOURCE LINE # 230
01CF E500        E     MOV     A,KBHIStep
01D1 6401              XRL     A,#01H
01D3 703C              JNZ     ?C0069
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 43  

                                           ; SOURCE LINE # 231
                                           ; SOURCE LINE # 232
01D5 120000      R     LCALL   L?0563
01D8 020000      R     LJMP    _Cmd_7B
                                           ; SOURCE LINE # 233
                                           ; SOURCE LINE # 234
                                           ; SOURCE LINE # 236
01DB         ?C0061:
                                           ; SOURCE LINE # 237
01DB E500        E     MOV     A,KBHIStep
01DD 6401              XRL     A,#01H
01DF 7030              JNZ     ?C0069
                                           ; SOURCE LINE # 238
                                           ; SOURCE LINE # 239
01E1 120000      R     LCALL   L?0563
01E4 020000      R     LJMP    _Cmd_7E
                                           ; SOURCE LINE # 240
                                           ; SOURCE LINE # 241
                                           ; SOURCE LINE # 242
01E7         ?C0063:
                                           ; SOURCE LINE # 243
01E7 AF00        E     MOV     R7,KBHIData
01E9 020000      R     LJMP    _Cmd_97
                                           ; SOURCE LINE # 244
                                           ; SOURCE LINE # 245
01EC         ?C0064:
                                           ; SOURCE LINE # 246
01EC AD00        E     MOV     R5,KBHIData
01EE 7F60              MOV     R7,#060H
01F0 020000      R     LJMP    _Cmd_B0
                                           ; SOURCE LINE # 247
                                           ; SOURCE LINE # 248
01F3         ?C0065:
                                           ; SOURCE LINE # 249
01F3 900000      E     MOV     DPTR,#GPCRD5
01F6 7480              MOV     A,#080H
01F8 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 250
01F9 900000      E     MOV     DPTR,#USB_Delay
01FC E500        E     MOV     A,KBHIData
01FE F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 251
01FF E0                MOVX    A,@DPTR
0200 700F              JNZ     ?C0069
                                           ; SOURCE LINE # 252
0202 740A              MOV     A,#0AH
0204 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 253
0205 22                RET     
                                           ; SOURCE LINE # 254
0206         ?C0067:
                                           ; SOURCE LINE # 255
0206 E500        E     MOV     A,KBHIStep
0208 B40106            CJNE    A,#01H,?C0069
                                           ; SOURCE LINE # 256
                                           ; SOURCE LINE # 257
020B 120000      R     LCALL   L?0564
020E 120000      R     LCALL   _Cmd_B3
                                           ; SOURCE LINE # 258
                                           ; SOURCE LINE # 259
                                           ; SOURCE LINE # 260
                                           ; SOURCE LINE # 261
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 44  

0211         ?C0069:
0211 22                RET     
0212         L?0543:
0212 900000      E     MOV     DPTR,#eEEPROMData
0215 E500        E     MOV     A,KBHIData
0217 F0                MOVX    @DPTR,A
0218 900000      E     MOV     DPTR,#LENOVOPMFW_Temp
021B E0                MOVX    A,@DPTR
021C 4410              ORL     A,#010H
021E F0                MOVX    @DPTR,A
021F 120000      R     LCALL   Update_EEPROMMark
0222 900000      E     MOV     DPTR,#LENOVOPMFW_Temp
0225 E0                MOVX    A,@DPTR
0226 54EF              ANL     A,#0EFH
0228 F0                MOVX    @DPTR,A
0229 22                RET     
             ; FUNCTION _Hook_60Port (END)

             ; FUNCTION _Hook_64Port (BEGIN)
                                           ; SOURCE LINE # 266
;---- Variable 'KBHICmd' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 267
                                           ; SOURCE LINE # 268
0000 EF                MOV     A,R7
0001 120000      E     LCALL   ?C?CCASE
0004 0000        R     DW      ?C0105
0006 40                DB      040H
0007 0000        R     DW      ?C0105
0009 41                DB      041H
000A 0000        R     DW      ?C0105
000C 42                DB      042H
000D 0000        R     DW      ?C0105
000F 43                DB      043H
0010 0000        R     DW      ?C0075
0012 44                DB      044H
0013 0000        R     DW      ?C0105
0015 45                DB      045H
0016 0000        R     DW      ?C0105
0018 46                DB      046H
0019 0000        R     DW      ?C0105
001B 47                DB      047H
001C 0000        R     DW      ?C0079
001E 49                DB      049H
001F 0000        R     DW      ?C0080
0021 4B                DB      04BH
0022 0000        R     DW      ?C0081
0024 4C                DB      04CH
0025 0000        R     DW      ?C0082
0027 4D                DB      04DH
0028 0000        R     DW      ?C0105
002A 4E                DB      04EH
002B 0000        R     DW      ?C0084
002D 4F                DB      04FH
002E 0000        R     DW      ?C0085
0030 50                DB      050H
0031 0000        R     DW      ?C0086
0033 51                DB      051H
0034 0000        R     DW      ?C0105
0036 52                DB      052H
0037 0000        R     DW      ?C0088
0039 53                DB      053H
003A 0000        R     DW      ?C0105
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 45  

003C 58                DB      058H
003D 0000        R     DW      ?C0105
003F 59                DB      059H
0040 0000        R     DW      ?C0105
0042 5D                DB      05DH
0043 0000        R     DW      ?C0094
0045 5E                DB      05EH
0046 0000        R     DW      ?C0095
0048 5F                DB      05FH
0049 0000        R     DW      ?C0096
004B 71                DB      071H
004C 0000        R     DW      ?C0105
004E 72                DB      072H
004F 0000        R     DW      ?C0098
0051 75                DB      075H
0052 0000        R     DW      ?C0111
0054 77                DB      077H
0055 0000        R     DW      ?C0105
0057 7A                DB      07AH
0058 0000        R     DW      ?C0100
005A 7B                DB      07BH
005B 0000        R     DW      ?C0102
005D 7C                DB      07CH
005E 0000        R     DW      ?C0103
0060 7D                DB      07DH
0061 0000        R     DW      ?C0101
0063 7E                DB      07EH
0064 0000        R     DW      ?C0105
0066 97                DB      097H
0067 0000        R     DW      ?C0105
0069 B0                DB      0B0H
006A 0000        R     DW      ?C0106
006C B1                DB      0B1H
006D 0000        R     DW      ?C0107
006F B2                DB      0B2H
0070 0000        R     DW      ?C0108
0072 B3                DB      0B3H
0073 0000        R     DW      ?C0109
0075 B4                DB      0B4H
0076 0000        R     DW      ?C0105
0078 BC                DB      0BCH
0079 0000              DW      00H
007B 0000        R     DW      ?C0114
                                           ; SOURCE LINE # 269
                                           ; SOURCE LINE # 270
                                           ; SOURCE LINE # 273
                                           ; SOURCE LINE # 276
                                           ; SOURCE LINE # 279
                                           ; SOURCE LINE # 282
007D         ?C0075:
                                           ; SOURCE LINE # 283
007D 7F60              MOV     R7,#060H
007F 020000      R     LJMP    _Cmd_44
                                           ; SOURCE LINE # 284
                                           ; SOURCE LINE # 285
                                           ; SOURCE LINE # 288
                                           ; SOURCE LINE # 291
                                           ; SOURCE LINE # 294
0082         ?C0079:
                                           ; SOURCE LINE # 295
0082 7F60              MOV     R7,#060H
0084 020000      R     LJMP    _Cmd_49
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 46  

                                           ; SOURCE LINE # 296
                                           ; SOURCE LINE # 297
0087         ?C0080:
                                           ; SOURCE LINE # 298
0087 750004      E     MOV     KBHIStep,#04H
                                           ; SOURCE LINE # 299
008A 22                RET     
                                           ; SOURCE LINE # 300
008B         ?C0081:
                                           ; SOURCE LINE # 301
008B 750003      E     MOV     KBHIStep,#03H
                                           ; SOURCE LINE # 302
008E 22                RET     
                                           ; SOURCE LINE # 303
008F         ?C0082:
                                           ; SOURCE LINE # 304
                                           ; SOURCE LINE # 305
008F 8058              SJMP    ?C0460
                                           ; SOURCE LINE # 306
                                           ; SOURCE LINE # 309
0091         ?C0084:
                                           ; SOURCE LINE # 310
0091 020000      R     LJMP    Erase_EEPROMAll
                                           ; SOURCE LINE # 311
                                           ; SOURCE LINE # 313
0094         ?C0085:
                                           ; SOURCE LINE # 314
0094 900000      E     MOV     DPTR,#ACPI_HOTKEY
0097 E0                MOVX    A,@DPTR
0098 4440              ORL     A,#040H
009A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 315
009B 22                RET     
                                           ; SOURCE LINE # 316
009C         ?C0086:
                                           ; SOURCE LINE # 317
009C 7F60              MOV     R7,#060H
009E 020000      R     LJMP    _Cmd_51
                                           ; SOURCE LINE # 318
                                           ; SOURCE LINE # 319
                                           ; SOURCE LINE # 322
00A1         ?C0088:
                                           ; SOURCE LINE # 323
00A1         ?C0449:
                                           ; SOURCE LINE # 324
00A1 8046              SJMP    ?C0460
                                           ; SOURCE LINE # 325
                                           ; SOURCE LINE # 326
                                           ; SOURCE LINE # 327
                                           ; SOURCE LINE # 330
                                           ; SOURCE LINE # 333
                                           ; SOURCE LINE # 334
                                           ; SOURCE LINE # 335
                                           ; SOURCE LINE # 338
00A3         ?C0094:
                                           ; SOURCE LINE # 340
00A3 020000      E     LJMP    Unlock_ShipMode
                                           ; SOURCE LINE # 342
                                           ; SOURCE LINE # 343
00A6         ?C0095:
                                           ; SOURCE LINE # 345
00A6 900000      E     MOV     DPTR,#ShipModeEn
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 47  

00A9 74A5              MOV     A,#0A5H
00AB F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 346
00AC 7D5A              MOV     R5,#05AH
00AE 7F60              MOV     R7,#060H
00B0 120000      E     LCALL   _Data2PortDirect
                                           ; SOURCE LINE # 347
00B3 7FA5              MOV     R7,#0A5H
00B5 020000      E     LJMP    _RamDebug
                                           ; SOURCE LINE # 349
                                           ; SOURCE LINE # 350
00B8         ?C0096:
                                           ; SOURCE LINE # 351
00B8         ?C0452:
                                           ; SOURCE LINE # 352
00B8 802F              SJMP    ?C0460
                                           ; SOURCE LINE # 353
                                           ; SOURCE LINE # 356
00BA         ?C0098:
                                           ; SOURCE LINE # 357
00BA 020000      R     LJMP    Cmd_75
                                           ; SOURCE LINE # 358
                                           ; SOURCE LINE # 359
                                           ; SOURCE LINE # 362
00BD         ?C0100:
                                           ; SOURCE LINE # 363
00BD         ?C0456:
                                           ; SOURCE LINE # 364
00BD 802A              SJMP    ?C0460
                                           ; SOURCE LINE # 366
00BF         ?C0101:
                                           ; SOURCE LINE # 367
00BF         ?C0459:
                                           ; SOURCE LINE # 368
00BF 8028              SJMP    ?C0460
                                           ; SOURCE LINE # 370
00C1         ?C0102:
                                           ; SOURCE LINE # 371
00C1 900000      E     MOV     DPTR,#Bioswatchdog
00C4 7401              MOV     A,#01H
00C6 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 372
00C7 E4                CLR     A
00C8 900000      E     MOV     DPTR,#Bioswatchdogtime
                                           ; SOURCE LINE # 373
                                           ; SOURCE LINE # 374
00CB 8004              SJMP    ?C0461
                                           ; SOURCE LINE # 375
00CD         ?C0103:
                                           ; SOURCE LINE # 376
00CD E4                CLR     A
00CE 900000      E     MOV     DPTR,#Bioswatchdog
00D1         ?C0461:
00D1 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 377
00D2 7D55              MOV     R5,#055H
00D4 7F60              MOV     R7,#060H
00D6 020000      E     LJMP    _Data2PortDirect
                                           ; SOURCE LINE # 378
                                           ; SOURCE LINE # 380
                                           ; SOURCE LINE # 383
00D9         ?C0105:
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 48  

                                           ; SOURCE LINE # 384
00D9         ?C0462:
                                           ; SOURCE LINE # 385
00D9 8015              SJMP    ?C0463
                                           ; SOURCE LINE # 387
00DB         ?C0106:
                                           ; SOURCE LINE # 388
00DB 7DB1              MOV     R5,#0B1H
00DD 7F60              MOV     R7,#060H
00DF 020000      R     LJMP    _Cmd_B1
                                           ; SOURCE LINE # 389
                                           ; SOURCE LINE # 390
00E2         ?C0107:
                                           ; SOURCE LINE # 391
00E2 7DB2              MOV     R5,#0B2H
00E4 7F60              MOV     R7,#060H
00E6 020000      R     LJMP    _Cmd_B2
                                           ; SOURCE LINE # 392
                                           ; SOURCE LINE # 394
00E9         ?C0108:
                                           ; SOURCE LINE # 395
00E9         ?C0460:
00E9 750002      E     MOV     KBHIStep,#02H
                                           ; SOURCE LINE # 396
00EC 22                RET     
                                           ; SOURCE LINE # 397
00ED         ?C0109:
                                           ; SOURCE LINE # 398
00ED 020000      R     LJMP    Cmd_B4
                                           ; SOURCE LINE # 399
                                           ; SOURCE LINE # 400
00F0         ?C0463:
00F0 750001      E     MOV     KBHIStep,#01H
                                           ; SOURCE LINE # 402
00F3 22                RET     
                                           ; SOURCE LINE # 403
00F4         ?C0111:
                                           ; SOURCE LINE # 404
00F4 120000      E     LCALL   DisableAllInterrupt
                                           ; SOURCE LINE # 405
00F7 E4                CLR     A
00F8 FB                MOV     R3,A
00F9 7D20              MOV     R5,#020H
00FB 7F01              MOV     R7,#01H
00FD 120000      E     LCALL   _Erase_Eflash_1K
                                           ; SOURCE LINE # 406
0100 120000      E     LCALL   EnableAllInterrupt
                                           ; SOURCE LINE # 407
                                           ; SOURCE LINE # 408
                                           ; SOURCE LINE # 410
                                           ; SOURCE LINE # 412
                                           ; SOURCE LINE # 413
                                           ; SOURCE LINE # 414
                                           ; SOURCE LINE # 415
0103         ?C0114:
0103 22                RET     
             ; FUNCTION _Hook_64Port (END)

             ; FUNCTION _Hook_Keyboard_Cmd (BEGIN)
                                           ; SOURCE LINE # 420
0000 900000      R     MOV     DPTR,#kbcmd
0003 EF                MOV     A,R7
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 49  

0004 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 421
                                           ; SOURCE LINE # 423
0005 22                RET     
             ; FUNCTION _Hook_Keyboard_Cmd (END)

             ; FUNCTION _Hook_Keyboard_Cmd_Parameter (BEGIN)
                                           ; SOURCE LINE # 429
0000 900000      R     MOV     DPTR,#kbcmdp
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 430
                                           ; SOURCE LINE # 432
0005 22                RET     
             ; FUNCTION _Hook_Keyboard_Cmd_Parameter (END)

             ; FUNCTION _Hook_Mouse_D4Cmd (BEGIN)
                                           ; SOURCE LINE # 437
0000 900000      R     MOV     DPTR,#mscmd
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 438
                                           ; SOURCE LINE # 440
0005 22                RET     
             ; FUNCTION _Hook_Mouse_D4Cmd (END)

             ; FUNCTION _Hook_Mouse_90Cmd (BEGIN)
                                           ; SOURCE LINE # 445
0000 900000      R     MOV     DPTR,#mscmd
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 446
                                           ; SOURCE LINE # 448
0005 22                RET     
             ; FUNCTION _Hook_Mouse_90Cmd (END)

             ; FUNCTION _Hook_Mouse_91Cmd (BEGIN)
                                           ; SOURCE LINE # 453
0000 900000      R     MOV     DPTR,#mscmd
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 454
                                           ; SOURCE LINE # 456
0005 22                RET     
             ; FUNCTION _Hook_Mouse_91Cmd (END)

             ; FUNCTION _Hook_Mouse_92Cmd (BEGIN)
                                           ; SOURCE LINE # 461
0000 900000      R     MOV     DPTR,#mscmd
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 462
                                           ; SOURCE LINE # 464
0005 22                RET     
             ; FUNCTION _Hook_Mouse_92Cmd (END)

             ; FUNCTION _Hook_Mouse_93Cmd (BEGIN)
                                           ; SOURCE LINE # 469
0000 900000      R     MOV     DPTR,#mscmd
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 470
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 50  

                                           ; SOURCE LINE # 472
0005 22                RET     
             ; FUNCTION _Hook_Mouse_93Cmd (END)

             ; FUNCTION _Cmd_40 (BEGIN)
                                           ; SOURCE LINE # 474
;---- Variable 'sCount' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 475
                                           ; SOURCE LINE # 476
0000 900000      E     MOV     DPTR,#AutoTimer
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 477
0005 7F40              MOV     R7,#040H
0007 120000      E     LCALL   _RamDebug
                                           ; SOURCE LINE # 478
000A 900000      E     MOV     DPTR,#AutoTimer
000D E0                MOVX    A,@DPTR
000E FF                MOV     R7,A
000F 120000      E     LCALL   _RamDebug
                                           ; SOURCE LINE # 479
0012 900000      E     MOV     DPTR,#ACPI_HOTKEY
0015 E0                MOVX    A,@DPTR
0016 4440              ORL     A,#040H
0018 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 480
0019 22                RET     
             ; FUNCTION _Cmd_40 (END)

             ; FUNCTION _Cmd_41_A0 (BEGIN)
                                           ; SOURCE LINE # 482
;---- Variable 'nPort' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 483
                                           ; SOURCE LINE # 484
0000 7D01              MOV     R5,#01H
0002 020000      E     LJMP    _Data2PortDirect
             ; FUNCTION _Cmd_41_A0 (END)

             ; FUNCTION _Cmd_41_A1 (BEGIN)
                                           ; SOURCE LINE # 487
0000 900000      R     MOV     DPTR,#nPort
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 488
                                           ; SOURCE LINE # 489
0005 7D43              MOV     R5,#043H
0007 120000      E     LCALL   _Data2Port
                                           ; SOURCE LINE # 490
000A 7D4F              MOV     R5,#04FH
                                           ; SOURCE LINE # 491
000C 120000      R     LCALL   L?0533
000F 7D4D              MOV     R5,#04DH
0011 120000      E     LCALL   _MultiB2Port
                                           ; SOURCE LINE # 492
0014 7D50              MOV     R5,#050H
                                           ; SOURCE LINE # 493
0016 120000      R     LCALL   L?0533
0019 7D41              MOV     R5,#041H
001B 120000      E     LCALL   _MultiB2Port
                                           ; SOURCE LINE # 494
001E 900000      R     MOV     DPTR,#nPort
0021 E0                MOVX    A,@DPTR
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 51  

0022 FF                MOV     R7,A
0023 7D4C              MOV     R5,#04CH
0025 020000      E     LJMP    _Data2PortDirect
                                           ; SOURCE LINE # 495
0028         L?0533:
0028 900000      R     MOV     DPTR,#nPort
002B E0                MOVX    A,@DPTR
002C FF                MOV     R7,A
002D 120000      E     LCALL   _MultiB2Port
0030 900000      R     MOV     DPTR,#nPort
0033 E0                MOVX    A,@DPTR
0034 FF                MOV     R7,A
0035 22                RET     
             ; FUNCTION _Cmd_41_A1 (END)

             ; FUNCTION _Cmd_41_A2 (BEGIN)
                                           ; SOURCE LINE # 497
;---- Variable 'nPort' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 498
                                           ; SOURCE LINE # 499
0000 E4                CLR     A
0001 FD                MOV     R5,A
0002 020000      E     LJMP    _Data2PortDirect
             ; FUNCTION _Cmd_41_A2 (END)

             ; FUNCTION _Cmd_41_A3 (BEGIN)
                                           ; SOURCE LINE # 502
;---- Variable 'nPort' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 503
                                           ; SOURCE LINE # 504
0000 E4                CLR     A
0001 FD                MOV     R5,A
0002 020000      E     LJMP    _Data2PortDirect
             ; FUNCTION _Cmd_41_A3 (END)

             ; FUNCTION _Cmd_42 (BEGIN)
                                           ; SOURCE LINE # 507
;---- Variable 'eFlashBank' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 508
                                           ; SOURCE LINE # 509
0000 900000      E     MOV     DPTR,#eEEPROMBank
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 510
0005 22                RET     
             ; FUNCTION _Cmd_42 (END)

             ; FUNCTION _Cmd_43 (BEGIN)
                                           ; SOURCE LINE # 512
;---- Variable 'nData' assigned to Register 'R5' ----
;---- Variable 'nPort' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 513
                                           ; SOURCE LINE # 514
0000 7404              MOV     A,#04H
0002 8D82              MOV     DPL,R5
0004 F583              MOV     DPH,A
0006 E0                MOVX    A,@DPTR
0007 FD                MOV     R5,A
0008 020000      E     LJMP    _Data2PortDirect
             ; FUNCTION _Cmd_43 (END)

             ; FUNCTION _Cmd_44 (BEGIN)
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 52  

                                           ; SOURCE LINE # 517
0000 900000      R     MOV     DPTR,#nPort
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 518
                                           ; SOURCE LINE # 519
0005 7D02              MOV     R5,#02H
0007 120000      E     LCALL   _Data2Port
                                           ; SOURCE LINE # 520
000A 900000      R     MOV     DPTR,#nPort
000D E0                MOVX    A,@DPTR
000E FF                MOV     R7,A
000F E4                CLR     A
0010 FD                MOV     R5,A
0011 020000      E     LJMP    _Data2PortDirect
             ; FUNCTION _Cmd_44 (END)

             ; FUNCTION _Cmd_45 (BEGIN)
                                           ; SOURCE LINE # 523
0000 900000      R     MOV     DPTR,#nPort
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
;---- Variable 'sCount' assigned to Register 'R5' ----
                                           ; SOURCE LINE # 524
                                           ; SOURCE LINE # 525
0005 ED                MOV     A,R5
0006 120000      E     LCALL   ?C?CCASE
0009 0000        R     DW      ?C0131
000B 20                DB      020H
000C 0000        R     DW      ?C0132
000E 21                DB      021H
000F 0000        R     DW      ?C0133
0011 80                DB      080H
0012 0000        R     DW      ?C0134
0014 81                DB      081H
0015 0000        R     DW      ?C0135
0017 82                DB      082H
0018 0000        R     DW      ?C0136
001A 83                DB      083H
001B 0000        R     DW      ?C0137
001D 8E                DB      08EH
001E 0000        R     DW      ?C0139
0020 8F                DB      08FH
0021 0000        R     DW      ?C0141
0023 90                DB      090H
0024 0000        R     DW      ?C0142
0026 91                DB      091H
0027 0000        R     DW      ?C0143
0029 A2                DB      0A2H
002A 0000        R     DW      ?C0144
002C A3                DB      0A3H
002D 0000        R     DW      ?C0145
002F A4                DB      0A4H
0030 0000        R     DW      ?C0146
0032 A5                DB      0A5H
0033 0000        R     DW      ?C0147
0035 A6                DB      0A6H
0036 0000        R     DW      ?C0148
0038 A7                DB      0A7H
0039 0000        R     DW      ?C0149
003B A8                DB      0A8H
003C 0000        R     DW      ?C0150
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 53  

003E A9                DB      0A9H
003F 0000        R     DW      ?C0151
0041 AA                DB      0AAH
0042 0000        R     DW      ?C0152
0044 AB                DB      0ABH
0045 0000        R     DW      ?C0153
0047 AE                DB      0AEH
0048 0000        R     DW      ?C0154
004A AF                DB      0AFH
004B 0000        R     DW      ?C0155
004D B0                DB      0B0H
004E 0000        R     DW      ?C0156
0050 B1                DB      0B1H
0051 0000        R     DW      ?C0157
0053 B2                DB      0B2H
0054 0000        R     DW      ?C0158
0056 BD                DB      0BDH
0057 0000        R     DW      ?C0159
0059 BE                DB      0BEH
005A 0000        R     DW      ?C0160
005C BF                DB      0BFH
005D 0000        R     DW      ?C0161
005F CF                DB      0CFH
0060 0000        R     DW      ?C0164
0062 D4                DB      0D4H
0063 0000        R     DW      ?C0165
0065 E7                DB      0E7H
0066 0000        R     DW      ?C0167
0068 E9                DB      0E9H
0069 0000        R     DW      ?C0168
006B EA                DB      0EAH
006C 0000        R     DW      ?C0169
006E EB                DB      0EBH
006F 0000        R     DW      ?C0170
0071 F0                DB      0F0H
0072 0000        R     DW      ?C0172
0074 F1                DB      0F1H
0075 0000              DW      00H
0077 0000        R     DW      ?C0174
                                           ; SOURCE LINE # 526
                                           ; SOURCE LINE # 537
0079         ?C0131:
                                           ; SOURCE LINE # 538
0079 900000      E     MOV     DPTR,#pProject4
                                           ; SOURCE LINE # 539
007C 020000      R     LJMP    ?C0464
                                           ; SOURCE LINE # 540
007F         ?C0132:
                                           ; SOURCE LINE # 541
007F 900000      E     MOV     DPTR,#pProject4
                                           ; SOURCE LINE # 542
0082 020000      R     LJMP    ?C0465
                                           ; SOURCE LINE # 544
0085         ?C0133:
                                           ; SOURCE LINE # 545
0085 900000      E     MOV     DPTR,#GPCRG6
0088 7440              MOV     A,#040H
008A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 546
008B 900000      E     MOV     DPTR,#GPDRG
                                           ; SOURCE LINE # 547
008E 8011              SJMP    ?C0466
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 54  

                                           ; SOURCE LINE # 548
0090         ?C0134:
                                           ; SOURCE LINE # 549
0090 900000      E     MOV     DPTR,#GPDRG
0093 E0                MOVX    A,@DPTR
0094 54BF              ANL     A,#0BFH
0096 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 550
0097 900000      E     MOV     DPTR,#GPCRG6
009A 7482              MOV     A,#082H
009C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 551
009D 22                RET     
                                           ; SOURCE LINE # 553
009E         ?C0135:
                                           ; SOURCE LINE # 554
009E 900000      E     MOV     DPTR,#SYS_STATUS
00A1         ?C0466:
00A1 E0                MOVX    A,@DPTR
00A2 4440              ORL     A,#040H
00A4 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 555
00A5 22                RET     
                                           ; SOURCE LINE # 557
00A6         ?C0136:
                                           ; SOURCE LINE # 558
                                           ; SOURCE LINE # 559
00A6 120000      R     LCALL   L?0565
                                           ; SOURCE LINE # 560
00A9 7800        E     MOV     R0,#LOW Flag
00AB E6                MOV     A,@R0
00AC 4401              ORL     A,#01H
00AE F6                MOV     @R0,A
                                           ; SOURCE LINE # 561
00AF 120000      E     LCALL   Lock_Scan
                                           ; SOURCE LINE # 562
00B2 7DF5              MOV     R5,#0F5H
00B4 7F02              MOV     R7,#02H
00B6 020000      E     LJMP    _ECSend2Port
                                           ; SOURCE LINE # 563
                                           ; SOURCE LINE # 566
00B9         ?C0137:
                                           ; SOURCE LINE # 567
00B9 900000      E     MOV     DPTR,#EMStatusBit
00BC E0                MOVX    A,@DPTR
00BD 30E103            JNB     ACC.1,$ + 6H
00C0 020000      R     LJMP    ?C0174
                                           ; SOURCE LINE # 568
                                           ; SOURCE LINE # 569
00C3 E0                MOVX    A,@DPTR
00C4 4402              ORL     A,#02H
                                           ; SOURCE LINE # 570
                                           ; SOURCE LINE # 571
                                           ; SOURCE LINE # 572
                                           ; SOURCE LINE # 573
                                           ; SOURCE LINE # 574
                                           ; SOURCE LINE # 575
                                           ; SOURCE LINE # 576
                                           ; SOURCE LINE # 577
00C6 800D              SJMP    ?C0467
                                           ; SOURCE LINE # 579
00C8         ?C0139:
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 55  

                                           ; SOURCE LINE # 580
00C8 900000      E     MOV     DPTR,#EMStatusBit
00CB E0                MOVX    A,@DPTR
00CC 20E103            JB      ACC.1,$ + 6H
00CF 020000      R     LJMP    ?C0174
                                           ; SOURCE LINE # 581
                                           ; SOURCE LINE # 582
00D2 E0                MOVX    A,@DPTR
00D3 54FD              ANL     A,#0FDH
00D5         ?C0467:
                                           ; SOURCE LINE # 583
                                           ; SOURCE LINE # 584
00D5 120000      R     LCALL   L?0538
00D8 74E4              MOV     A,#0E4H
00DA F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 585
00DB 900000      E     MOV     DPTR,#EMStatusBit
00DE E0                MOVX    A,@DPTR
00DF 900000      E     MOV     DPTR,#eEEPROMData
00E2 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 586
00E3 900000      E     MOV     DPTR,#LENOVOPMFW_Temp
00E6 E0                MOVX    A,@DPTR
00E7 4410              ORL     A,#010H
00E9 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 587
00EA 120000      R     LCALL   Update_EEPROMMark
                                           ; SOURCE LINE # 588
00ED 900000      E     MOV     DPTR,#LENOVOPMFW_Temp
00F0 E0                MOVX    A,@DPTR
00F1 54EF              ANL     A,#0EFH
00F3 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 589
                                           ; SOURCE LINE # 590
00F4 22                RET     
                                           ; SOURCE LINE # 592
00F5         ?C0141:
                                           ; SOURCE LINE # 593
                                           ; SOURCE LINE # 594
00F5 120000      R     LCALL   L?0555
00F8 4440              ORL     A,#040H
                                           ; SOURCE LINE # 595
                                           ; SOURCE LINE # 596
00FA 8005              SJMP    ?C0468
                                           ; SOURCE LINE # 597
00FC         ?C0142:
                                           ; SOURCE LINE # 598
                                           ; SOURCE LINE # 599
00FC 120000      R     LCALL   L?0555
00FF 4480              ORL     A,#080H
0101         ?C0468:
0101 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 600
0102 020000      R     LJMP    Chk_UEFIStatus
                                           ; SOURCE LINE # 601
                                           ; SOURCE LINE # 603
0105         ?C0143:
                                           ; SOURCE LINE # 604
0105 900000      E     MOV     DPTR,#DEVICEMODULE
                                           ; SOURCE LINE # 605
0108 020000      R     LJMP    ?C0469
                                           ; SOURCE LINE # 607
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 56  

010B         ?C0144:
                                           ; SOURCE LINE # 608
010B 900000      E     MOV     DPTR,#DEVICEMODULE
010E E0                MOVX    A,@DPTR
010F 547F              ANL     A,#07FH
0111 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 609
0112 22                RET     
                                           ; SOURCE LINE # 611
0113         ?C0145:
                                           ; SOURCE LINE # 612
0113 900000      R     MOV     DPTR,#nPort
0116 E0                MOVX    A,@DPTR
0117 FF                MOV     R7,A
0118 900000      E     MOV     DPTR,#DEVICEMODULE
                                           ; SOURCE LINE # 613
011B 020000      R     LJMP    ?C0475
                                           ; SOURCE LINE # 615
011E         ?C0146:
                                           ; SOURCE LINE # 616
011E 900000      E     MOV     DPTR,#DEVICEMODULE
0121 E0                MOVX    A,@DPTR
0122 54FB              ANL     A,#0FBH
                                           ; SOURCE LINE # 617
                                           ; SOURCE LINE # 618
0124 8006              SJMP    ?C0471
                                           ; SOURCE LINE # 620
0126         ?C0147:
                                           ; SOURCE LINE # 621
0126 900000      E     MOV     DPTR,#DEVICEMODULE
0129 E0                MOVX    A,@DPTR
012A 4404              ORL     A,#04H
012C         ?C0471:
012C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 622
                                           ; SOURCE LINE # 623
012D 801C              SJMP    ?C0472
                                           ; SOURCE LINE # 625
012F         ?C0148:
                                           ; SOURCE LINE # 626
012F 900000      E     MOV     DPTR,#DEVICEMODULE
0132 E0                MOVX    A,@DPTR
0133 54FB              ANL     A,#0FBH
                                           ; SOURCE LINE # 627
                                           ; SOURCE LINE # 628
0135 8006              SJMP    ?C0473
                                           ; SOURCE LINE # 630
0137         ?C0149:
                                           ; SOURCE LINE # 631
0137 900000      E     MOV     DPTR,#DEVICEMODULE
013A E0                MOVX    A,@DPTR
013B 4404              ORL     A,#04H
013D         ?C0473:
013D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 632
                                           ; SOURCE LINE # 633
013E 8003              SJMP    ?C0474
                                           ; SOURCE LINE # 635
0140         ?C0150:
                                           ; SOURCE LINE # 636
0140 900000      E     MOV     DPTR,#LENOVODEVICE
0143         ?C0474:
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 57  

0143 E0                MOVX    A,@DPTR
0144 4408              ORL     A,#08H
0146 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 637
0147 22                RET     
                                           ; SOURCE LINE # 639
0148         ?C0151:
                                           ; SOURCE LINE # 640
0148 900000      E     MOV     DPTR,#LENOVODEVICE
014B         ?C0472:
014B E0                MOVX    A,@DPTR
014C 54F7              ANL     A,#0F7H
014E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 641
014F 22                RET     
                                           ; SOURCE LINE # 643
0150         ?C0152:
                                           ; SOURCE LINE # 644
0150 900000      R     MOV     DPTR,#nPort
0153 E0                MOVX    A,@DPTR
0154 FF                MOV     R7,A
0155 900000      E     MOV     DPTR,#uMBID
0158         ?C0470:
                                           ; SOURCE LINE # 645
0158 806D              SJMP    ?C0475
                                           ; SOURCE LINE # 647
015A         ?C0153:
                                           ; SOURCE LINE # 648
015A 900000      R     MOV     DPTR,#nPort
015D E0                MOVX    A,@DPTR
015E FF                MOV     R7,A
015F 900000      E     MOV     DPTR,#uNovoVPCCount
0162 E0                MOVX    A,@DPTR
0163 FD                MOV     R5,A
0164 120000      E     LCALL   _Data2PortDirect
                                           ; SOURCE LINE # 649
0167 E4                CLR     A
0168 900000      E     MOV     DPTR,#uNovoVPCCount
016B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 650
016C 22                RET     
                                           ; SOURCE LINE # 652
016D         ?C0154:
                                           ; SOURCE LINE # 653
016D 900000      R     MOV     DPTR,#nPort
0170 E0                MOVX    A,@DPTR
0171 FF                MOV     R7,A
0172 900000      E     MOV     DPTR,#uWOVSTATUS
0175 E0                MOVX    A,@DPTR
0176 FD                MOV     R5,A
0177 120000      E     LCALL   _Data2PortDirect
                                           ; SOURCE LINE # 654
017A E4                CLR     A
017B 900000      E     MOV     DPTR,#uWOVSTATUS
017E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 655
017F 22                RET     
                                           ; SOURCE LINE # 656
0180         ?C0155:
                                           ; SOURCE LINE # 657
0180 E4                CLR     A
0181 900000      E     MOV     DPTR,#cCPUKind
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 58  

0184 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 658
0185 22                RET     
                                           ; SOURCE LINE # 659
0186         ?C0156:
                                           ; SOURCE LINE # 660
0186 900000      E     MOV     DPTR,#cCPUKind
0189 7401              MOV     A,#01H
018B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 661
018C 22                RET     
                                           ; SOURCE LINE # 662
018D         ?C0157:
                                           ; SOURCE LINE # 663
018D 900000      E     MOV     DPTR,#cCPUKind
0190 7402              MOV     A,#02H
0192 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 664
0193 22                RET     
                                           ; SOURCE LINE # 665
0194         ?C0158:
                                           ; SOURCE LINE # 666
0194 900000      E     MOV     DPTR,#cCPUKind
0197 7403              MOV     A,#03H
0199 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 667
019A 22                RET     
                                           ; SOURCE LINE # 668
019B         ?C0159:
                                           ; SOURCE LINE # 669
019B 900000      E     MOV     DPTR,#cCPUKind
019E 7404              MOV     A,#04H
01A0 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 670
01A1 22                RET     
                                           ; SOURCE LINE # 671
01A2         ?C0160:
                                           ; SOURCE LINE # 672
01A2 900000      E     MOV     DPTR,#cCPUKind
01A5 7405              MOV     A,#05H
01A7 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 673
01A8 22                RET     
                                           ; SOURCE LINE # 675
01A9         ?C0161:
                                           ; SOURCE LINE # 676
01A9 900000      E     MOV     DPTR,#CombineKeyStatus
01AC E0                MOVX    A,@DPTR
01AD 900000      R     MOV     DPTR,#nPort
01B0 30E006            JNB     ACC.0,?C0162
                                           ; SOURCE LINE # 677
01B3 E0                MOVX    A,@DPTR
01B4 FF                MOV     R7,A
01B5 7D01              MOV     R5,#01H
01B7 8010              SJMP    ?C0477
01B9         ?C0162:
                                           ; SOURCE LINE # 679
01B9 E0                MOVX    A,@DPTR
01BA FF                MOV     R7,A
01BB E4                CLR     A
01BC FD                MOV     R5,A
01BD         ?C0476:
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 59  

                                           ; SOURCE LINE # 680
01BD 800A              SJMP    ?C0477
                                           ; SOURCE LINE # 682
01BF         ?C0164:
                                           ; SOURCE LINE # 683
01BF 900000      R     MOV     DPTR,#nPort
01C2 E0                MOVX    A,@DPTR
01C3 FF                MOV     R7,A
01C4 900000      E     MOV     DPTR,#pDevStus
01C7         ?C0475:
01C7 E0                MOVX    A,@DPTR
01C8 FD                MOV     R5,A
01C9         ?C0477:
01C9 020000      E     LJMP    _Data2PortDirect
                                           ; SOURCE LINE # 684
                                           ; SOURCE LINE # 686
01CC         ?C0165:
                                           ; SOURCE LINE # 687
01CC 900000      E     MOV     DPTR,#pProject0
01CF E0                MOVX    A,@DPTR
01D0 4410              ORL     A,#010H
01D2 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 689
01D3 900000      E     MOV     DPTR,#uMBGPU
01D6 7401              MOV     A,#01H
01D8 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 690
01D9 900000      E     MOV     DPTR,#SYS_STATUS
01DC E0                MOVX    A,@DPTR
01DD 30E73C            JNB     ACC.7,?C0479
                                           ; SOURCE LINE # 691
                                           ; SOURCE LINE # 692
                                           ; SOURCE LINE # 693
01E0 120000      R     LCALL   L?0545
                                           ; SOURCE LINE # 694
01E3         ?C0166:
                                           ; SOURCE LINE # 697
                                           ; SOURCE LINE # 699
01E3 8037              SJMP    ?C0479
                                           ; SOURCE LINE # 701
01E5         ?C0167:
                                           ; SOURCE LINE # 702
01E5 900000      E     MOV     DPTR,#uReserve07
01E8         ?C0464:
01E8 E0                MOVX    A,@DPTR
01E9 54FE              ANL     A,#0FEH
01EB F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 703
01EC 22                RET     
                                           ; SOURCE LINE # 705
01ED         ?C0168:
                                           ; SOURCE LINE # 706
01ED 900000      E     MOV     DPTR,#uReserve07
01F0         ?C0465:
01F0 E0                MOVX    A,@DPTR
01F1 4401              ORL     A,#01H
01F3 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 707
01F4 22                RET     
                                           ; SOURCE LINE # 709
01F5         ?C0169:
                                           ; SOURCE LINE # 710
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 60  

01F5 900000      E     MOV     DPTR,#pProject0
01F8         ?C0469:
01F8 E0                MOVX    A,@DPTR
01F9 4480              ORL     A,#080H
01FB F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 711
01FC 22                RET     
                                           ; SOURCE LINE # 714
01FD         ?C0170:
                                           ; SOURCE LINE # 715
                                           ; SOURCE LINE # 716
                                           ; SOURCE LINE # 717
01FD 120000      R     LCALL   L?0549
0200 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 718
0201 900000      E     MOV     DPTR,#SYS_STATUS
0204 E0                MOVX    A,@DPTR
0205 30E703            JNB     ACC.7,?C0171
                                           ; SOURCE LINE # 719
                                           ; SOURCE LINE # 720
                                           ; SOURCE LINE # 721
0208 120000      R     LCALL   L?0545
                                           ; SOURCE LINE # 722
020B         ?C0171:
                                           ; SOURCE LINE # 724
020B         ?C0478:
                                           ; SOURCE LINE # 726
020B 800F              SJMP    ?C0479
                                           ; SOURCE LINE # 727
020D         ?C0172:
                                           ; SOURCE LINE # 728
                                           ; SOURCE LINE # 729
                                           ; SOURCE LINE # 730
020D 120000      R     LCALL   L?0549
0210 14                DEC     A
0211 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 731
0212 900000      E     MOV     DPTR,#SYS_STATUS
0215 E0                MOVX    A,@DPTR
0216 30E703            JNB     ACC.7,?C0173
                                           ; SOURCE LINE # 732
                                           ; SOURCE LINE # 733
                                           ; SOURCE LINE # 734
0219 120000      R     LCALL   L?0546
                                           ; SOURCE LINE # 735
021C         ?C0173:
                                           ; SOURCE LINE # 737
021C         ?C0479:
021C 120000      E     LCALL   InitChargerIC
                                           ; SOURCE LINE # 739
                                           ; SOURCE LINE # 741
                                           ; SOURCE LINE # 742
021F         ?C0174:
021F 22                RET     
             ; FUNCTION _Cmd_45 (END)

             ; FUNCTION _Cmd_46 (BEGIN)
                                           ; SOURCE LINE # 744
0000 900000      R     MOV     DPTR,#nPort
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
0005 A3                INC     DPTR
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 61  

0006 ED                MOV     A,R5
0007 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 745
                                           ; SOURCE LINE # 747
0008 120000      E     LCALL   ?C?CCASE
000B 0000        R     DW      ?C0176
000D 81                DB      081H
000E 0000        R     DW      ?C0177
0010 82                DB      082H
0011 0000        R     DW      ?C0178
0013 84                DB      084H
0014 0000        R     DW      ?C0179
0016 85                DB      085H
0017 0000        R     DW      ?C0180
0019 86                DB      086H
001A 0000        R     DW      ?C0181
001C 87                DB      087H
001D 0000        R     DW      ?C0182
001F 88                DB      088H
0020 0000              DW      00H
0022 0000        R     DW      ?C0183
                                           ; SOURCE LINE # 748
                                           ; SOURCE LINE # 749
0024         ?C0176:
                                           ; SOURCE LINE # 750
0024 900000      R     MOV     DPTR,#nPort
0027 E0                MOVX    A,@DPTR
0028 FF                MOV     R7,A
0029 900000      E     MOV     DPTR,#nAtmFanSpeed
                                           ; SOURCE LINE # 751
002C 8008              SJMP    ?C0481
                                           ; SOURCE LINE # 752
002E         ?C0177:
                                           ; SOURCE LINE # 753
002E 900000      R     MOV     DPTR,#nPort
0031 E0                MOVX    A,@DPTR
0032 FF                MOV     R7,A
0033 900000      E     MOV     DPTR,#nAtmFan1Speed
0036         ?C0481:
0036 E0                MOVX    A,@DPTR
0037 FD                MOV     R5,A
0038 020000      E     LJMP    _Data2PortDirect
                                           ; SOURCE LINE # 754
                                           ; SOURCE LINE # 755
003B         ?C0178:
                                           ; SOURCE LINE # 756
003B 900000      E     MOV     DPTR,#uReserve07
003E E0                MOVX    A,@DPTR
003F 54BF              ANL     A,#0BFH
0041 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 757
0042 22                RET     
                                           ; SOURCE LINE # 758
0043         ?C0179:
                                           ; SOURCE LINE # 759
0043 900000      E     MOV     DPTR,#HighPerf
                                           ; SOURCE LINE # 760
0046 8009              SJMP    ?C0482
                                           ; SOURCE LINE # 761
0048         ?C0180:
                                           ; SOURCE LINE # 762
0048 E4                CLR     A
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 62  

0049 900000      E     MOV     DPTR,#HighPerf
004C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 763
004D 22                RET     
                                           ; SOURCE LINE # 764
004E         ?C0181:
                                           ; SOURCE LINE # 765
004E 900000      E     MOV     DPTR,#QuiteMode
0051         ?C0482:
0051 7401              MOV     A,#01H
0053 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 766
0054 22                RET     
                                           ; SOURCE LINE # 767
0055         ?C0182:
                                           ; SOURCE LINE # 768
0055 E4                CLR     A
0056 900000      E     MOV     DPTR,#QuiteMode
0059 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 769
005A 22                RET     
                                           ; SOURCE LINE # 770
005B         ?C0183:
                                           ; SOURCE LINE # 771
005B 900000      E     MOV     DPTR,#uReserve07
005E E0                MOVX    A,@DPTR
005F 4440              ORL     A,#040H
0061 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 772
0062 900000      R     MOV     DPTR,#nData
0065 E0                MOVX    A,@DPTR
0066 FD                MOV     R5,A
0067 C3                CLR     C
0068 94A0              SUBB    A,#0A0H
006A 400A              JC      ?C0184
                                           ; SOURCE LINE # 773
                                           ; SOURCE LINE # 774
006C E0                MOVX    A,@DPTR
006D 2460              ADD     A,#060H
006F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 775
0070 E0                MOVX    A,@DPTR
0071 900000      E     MOV     DPTR,#ManualFan2PRM
                                           ; SOURCE LINE # 776
                                           ; SOURCE LINE # 777
                                           ; SOURCE LINE # 778
                                           ; SOURCE LINE # 779
0074 801D              SJMP    ?C0480
0076         ?C0184:
                                           ; SOURCE LINE # 781
                                           ; SOURCE LINE # 782
0076 900000      E     MOV     DPTR,#ManualFanPRM
0079 ED                MOV     A,R5
007A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 783
007B E4                CLR     A
007C 900000      E     MOV     DPTR,#GPCRA5
007F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 784
0080 900000      E     MOV     DPTR,#ManualFanPRM
0083 E0                MOVX    A,@DPTR
0084 2402              ADD     A,#02H
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 63  

0086 900000      E     MOV     DPTR,#DCR5
0089 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 785
008A E4                CLR     A
008B 900000      E     MOV     DPTR,#GPCRD6
008E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 786
008F 900000      E     MOV     DPTR,#ManualFan2PRM
0092 ED                MOV     A,R5
0093         ?C0480:
0093 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 787
0094 E4                CLR     A
0095 900000      E     MOV     DPTR,#GPCRA4
0098 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 788
0099 900000      E     MOV     DPTR,#ManualFanPRM
009C E0                MOVX    A,@DPTR
009D 2402              ADD     A,#02H
009F 900000      E     MOV     DPTR,#DCR4
00A2 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 789
00A3 E4                CLR     A
00A4 900000      E     MOV     DPTR,#GPCRD7
00A7 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 790
                                           ; SOURCE LINE # 796
                                           ; SOURCE LINE # 797
                                           ; SOURCE LINE # 798
00A8         ?C0186:
00A8 22                RET     
             ; FUNCTION _Cmd_46 (END)

             ; FUNCTION _Cmd_47 (BEGIN)
                                           ; SOURCE LINE # 801
0000 900000      R     MOV     DPTR,#nPort
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
;---- Variable 'nData' assigned to Register 'R5' ----
                                           ; SOURCE LINE # 802
                                           ; SOURCE LINE # 803
0005 ED                MOV     A,R5
0006 6480              XRL     A,#080H
0008 6007              JZ      ?C0187
                                           ; SOURCE LINE # 804
                                           ; SOURCE LINE # 805
000A 900000      E     MOV     DPTR,#cOsLedCtrl
000D E0                MOVX    A,@DPTR
000E 4480              ORL     A,#080H
0010 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 806
0011         ?C0187:
                                           ; SOURCE LINE # 807
0011 ED                MOV     A,R5
0012 120000      E     LCALL   ?C?CCASE
0015 0000        R     DW      ?C0189
0017 80                DB      080H
0018 0000        R     DW      ?C0190
001A 81                DB      081H
001B 0000        R     DW      ?C0191
001D 82                DB      082H
001E 0000        R     DW      ?C0192
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 64  

0020 83                DB      083H
0021 0000        R     DW      ?C0193
0023 84                DB      084H
0024 0000        R     DW      ?C0194
0026 85                DB      085H
0027 0000        R     DW      ?C0195
0029 86                DB      086H
002A 0000        R     DW      ?C0196
002C 87                DB      087H
002D 0000        R     DW      ?C0197
002F 88                DB      088H
0030 0000        R     DW      ?C0198
0032 89                DB      089H
0033 0000        R     DW      ?C0199
0035 8A                DB      08AH
0036 0000        R     DW      ?C0200
0038 8B                DB      08BH
0039 0000        R     DW      ?C0201
003B 8C                DB      08CH
003C 0000        R     DW      ?C0202
003E 8D                DB      08DH
003F 0000        R     DW      ?C0203
0041 8E                DB      08EH
0042 0000        R     DW      ?C0204
0044 8F                DB      08FH
0045 0000        R     DW      ?C0205
0047 90                DB      090H
0048 0000        R     DW      ?C0206
004A 91                DB      091H
004B 0000        R     DW      ?C0207
004D 92                DB      092H
004E 0000        R     DW      ?C0208
0050 93                DB      093H
0051 0000        R     DW      ?C0209
0053 94                DB      094H
0054 0000        R     DW      ?C0210
0056 95                DB      095H
0057 0000        R     DW      ?C0211
0059 96                DB      096H
005A 0000              DW      00H
005C 0000        R     DW      ?C0212
                                           ; SOURCE LINE # 808
                                           ; SOURCE LINE # 809
005E         ?C0189:
                                           ; SOURCE LINE # 810
005E E4                CLR     A
005F 900000      E     MOV     DPTR,#cOsLedCtrl
0062 F0                MOVX    @DPTR,A
0063 A3                INC     DPTR
0064 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 811
0065 900000      E     MOV     DPTR,#cOsLed1Ctrl
0068 F0                MOVX    @DPTR,A
0069 A3                INC     DPTR
006A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 812
006B AF00        E     MOV     R7,Led_Data
006D 020000      E     LJMP    _OEM_Write_Leds
                                           ; SOURCE LINE # 813
                                           ; SOURCE LINE # 814
0070         ?C0190:
                                           ; SOURCE LINE # 815
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 65  

0070 900000      E     MOV     DPTR,#cOsLedCtrl
                                           ; SOURCE LINE # 816
0073 8068              SJMP    ?C0490
                                           ; SOURCE LINE # 817
0075         ?C0191:
                                           ; SOURCE LINE # 818
0075 900000      E     MOV     DPTR,#cOsLedCtrl
                                           ; SOURCE LINE # 819
0078 806B              SJMP    ?C0491
                                           ; SOURCE LINE # 820
007A         ?C0192:
                                           ; SOURCE LINE # 821
007A 900000      E     MOV     DPTR,#cOsLedCtrl
                                           ; SOURCE LINE # 822
007D 806E              SJMP    ?C0492
                                           ; SOURCE LINE # 823
007F         ?C0193:
                                           ; SOURCE LINE # 824
007F 900000      E     MOV     DPTR,#cOsLedCtrl
                                           ; SOURCE LINE # 825
0082 807E              SJMP    ?C0495
                                           ; SOURCE LINE # 826
0084         ?C0194:
                                           ; SOURCE LINE # 827
0084 900000      E     MOV     DPTR,#cOsLedCtrl
                                           ; SOURCE LINE # 828
0087 8071              SJMP    ?C0494
                                           ; SOURCE LINE # 829
0089         ?C0195:
                                           ; SOURCE LINE # 830
0089 900000      E     MOV     DPTR,#cOsLedCtrl
                                           ; SOURCE LINE # 831
008C 802D              SJMP    ?C0488
                                           ; SOURCE LINE # 832
008E         ?C0196:
                                           ; SOURCE LINE # 833
008E 900000      E     MOV     DPTR,#cOsLedCtrl
                                           ; SOURCE LINE # 834
0091 803A              SJMP    ?C0489
                                           ; SOURCE LINE # 835
0093         ?C0197:
                                           ; SOURCE LINE # 836
0093 E4                CLR     A
0094 900000      E     MOV     DPTR,#cOsLedCtrl
0097 F0                MOVX    @DPTR,A
0098 A3                INC     DPTR
0099 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 837
009A 900000      E     MOV     DPTR,#cOsLedCtrl
009D E0                MOVX    A,@DPTR
009E 4480              ORL     A,#080H
00A0 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 839
00A1 E4                CLR     A
00A2 900000      E     MOV     DPTR,#cOsLed1Ctrl
00A5 F0                MOVX    @DPTR,A
00A6 A3                INC     DPTR
00A7 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 840
00A8 22                RET     
                                           ; SOURCE LINE # 841
00A9         ?C0198:
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 66  

                                           ; SOURCE LINE # 842
00A9 900000      E     MOV     DPTR,#cOsLedCtrl+01H
00AC         ?C0483:
                                           ; SOURCE LINE # 843
00AC 802F              SJMP    ?C0490
                                           ; SOURCE LINE # 844
00AE         ?C0199:
                                           ; SOURCE LINE # 845
00AE 900000      E     MOV     DPTR,#cOsLedCtrl+01H
00B1         ?C0484:
                                           ; SOURCE LINE # 846
00B1 8032              SJMP    ?C0491
                                           ; SOURCE LINE # 847
00B3         ?C0200:
                                           ; SOURCE LINE # 848
00B3 900000      E     MOV     DPTR,#cOsLedCtrl+01H
00B6         ?C0485:
                                           ; SOURCE LINE # 849
00B6 8035              SJMP    ?C0492
                                           ; SOURCE LINE # 850
00B8         ?C0201:
                                           ; SOURCE LINE # 851
00B8 900000      E     MOV     DPTR,#cOsLedCtrl+01H
00BB         ?C0488:
00BB E0                MOVX    A,@DPTR
00BC 4420              ORL     A,#020H
00BE F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 852
00BF 22                RET     
                                           ; SOURCE LINE # 853
00C0         ?C0202:
                                           ; SOURCE LINE # 854
00C0 900000      E     MOV     DPTR,#cOsLedCtrl+01H
00C3         ?C0486:
                                           ; SOURCE LINE # 855
00C3 803D              SJMP    ?C0495
                                           ; SOURCE LINE # 856
00C5         ?C0203:
                                           ; SOURCE LINE # 857
00C5 900000      E     MOV     DPTR,#cOsLedCtrl+01H
00C8         ?C0487:
                                           ; SOURCE LINE # 858
00C8 8030              SJMP    ?C0494
                                           ; SOURCE LINE # 859
00CA         ?C0204:
                                           ; SOURCE LINE # 860
00CA 900000      E     MOV     DPTR,#cOsLedCtrl+01H
00CD         ?C0489:
00CD E0                MOVX    A,@DPTR
00CE 4440              ORL     A,#040H
00D0 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 861
00D1 22                RET     
                                           ; SOURCE LINE # 862
00D2         ?C0205:
                                           ; SOURCE LINE # 863
00D2 900000      E     MOV     DPTR,#cOsLedCtrl+01H
00D5 E0                MOVX    A,@DPTR
00D6 4480              ORL     A,#080H
00D8 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 864
00D9 22                RET     
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 67  

                                           ; SOURCE LINE # 865
00DA         ?C0206:
                                           ; SOURCE LINE # 866
00DA 900000      E     MOV     DPTR,#cOsLed1Ctrl
00DD         ?C0490:
00DD E0                MOVX    A,@DPTR
00DE 4401              ORL     A,#01H
00E0 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 867
00E1 22                RET     
                                           ; SOURCE LINE # 868
00E2         ?C0207:
                                           ; SOURCE LINE # 869
00E2 900000      E     MOV     DPTR,#cOsLed1Ctrl
00E5         ?C0491:
00E5 E0                MOVX    A,@DPTR
00E6 4402              ORL     A,#02H
00E8 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 870
00E9 22                RET     
                                           ; SOURCE LINE # 871
00EA         ?C0208:
                                           ; SOURCE LINE # 872
00EA 900000      E     MOV     DPTR,#cOsLed1Ctrl
00ED         ?C0492:
00ED E0                MOVX    A,@DPTR
00EE 4404              ORL     A,#04H
00F0 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 873
00F1 22                RET     
                                           ; SOURCE LINE # 874
00F2         ?C0209:
                                           ; SOURCE LINE # 875
00F2 900000      E     MOV     DPTR,#cOsLed1Ctrl
00F5         ?C0493:
                                           ; SOURCE LINE # 876
00F5 800B              SJMP    ?C0495
                                           ; SOURCE LINE # 877
00F7         ?C0210:
                                           ; SOURCE LINE # 878
00F7 900000      E     MOV     DPTR,#cOsLed1Ctrl
00FA         ?C0494:
00FA E0                MOVX    A,@DPTR
00FB 4410              ORL     A,#010H
00FD F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 879
00FE 22                RET     
                                           ; SOURCE LINE # 880
00FF         ?C0211:
                                           ; SOURCE LINE # 881
00FF 900000      E     MOV     DPTR,#cOsLed1Ctrl+01H
0102         ?C0495:
0102 E0                MOVX    A,@DPTR
0103 4408              ORL     A,#08H
0105 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 882
                                           ; SOURCE LINE # 883
                                           ; SOURCE LINE # 884
0106         ?C0212:
0106 22                RET     
             ; FUNCTION _Cmd_47 (END)

C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 68  

             ; FUNCTION _Cmd_49 (BEGIN)
                                           ; SOURCE LINE # 885
;---- Variable 'nPort' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 886
                                           ; SOURCE LINE # 887
0000 900000      E     MOV     DPTR,#ONEKEY_FLAG
0003 E0                MOVX    A,@DPTR
0004 FD                MOV     R5,A
0005 120000      E     LCALL   _Data2PortDirect
                                           ; SOURCE LINE # 888
0008 900000      E     MOV     DPTR,#ONEKEY_FLAG
000B E0                MOVX    A,@DPTR
000C 900000      E     MOV     DPTR,#ONEKEY_TEMP_FLAG
000F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 889
0010 E4                CLR     A
0011 900000      E     MOV     DPTR,#ONEKEY_FLAG
0014 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 890
0015 22                RET     
             ; FUNCTION _Cmd_49 (END)

             ; FUNCTION _Cmd_4A (BEGIN)
                                           ; SOURCE LINE # 892
0000 900000      R     MOV     DPTR,#nPort
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
;---- Variable 'nData' assigned to Register 'R5' ----
                                           ; SOURCE LINE # 893
                                           ; SOURCE LINE # 894
0005 ED                MOV     A,R5
0006 B40110            CJNE    A,#01H,?C0214
                                           ; SOURCE LINE # 895
                                           ; SOURCE LINE # 896
0009 900000      E     MOV     DPTR,#ResetTestFlag
000C 7401              MOV     A,#01H
000E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 897
000F 900000      E     MOV     DPTR,#GPCRI5
0012 E0                MOVX    A,@DPTR
0013 900000      E     MOV     DPTR,#BRAMBK0+07FH
0016 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 898
0017 800A              SJMP    ?C0215
0019         ?C0214:
                                           ; SOURCE LINE # 899
0019 ED                MOV     A,R5
001A B40206            CJNE    A,#02H,?C0215
                                           ; SOURCE LINE # 900
                                           ; SOURCE LINE # 901
001D 900000      E     MOV     DPTR,#ResetTestFlag
0020 7402              MOV     A,#02H
0022 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 902
0023         ?C0215:
                                           ; SOURCE LINE # 903
0023 900000      E     MOV     DPTR,#ResetTestFlag
0026 E0                MOVX    A,@DPTR
0027 900000      E     MOV     DPTR,#BRAMBK0+07EH
002A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 905
002B 900000      E     MOV     DPTR,#WinFlashMark
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 69  

002E 7453              MOV     A,#053H
0030 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 906
0031 900000      E     MOV     DPTR,#WinFlashMark2
0034 7435              MOV     A,#035H
0036 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 907
0037 7F44              MOV     R7,#044H
0039 020000      E     LJMP    _InternalWDTNow
             ; FUNCTION _Cmd_4A (END)

             ; FUNCTION _Cmd_4E (BEGIN)
                                           ; SOURCE LINE # 911
0000 900000      R     MOV     DPTR,#nPort
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
0005 A3                INC     DPTR
0006 ED                MOV     A,R5
0007 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 912
                                           ; SOURCE LINE # 914
0008 900000      E     MOV     DPTR,#eEEPROMBank
000B E0                MOVX    A,@DPTR
000C 6407              XRL     A,#07H
000E 707C              JNZ     ?C0218
0010 900000      R     MOV     DPTR,#nOffSet
0013 E0                MOVX    A,@DPTR
0014 FF                MOV     R7,A
0015 D3                SETB    C
0016 94EF              SUBB    A,#0EFH
0018 4072              JC      ?C0218
001A EF                MOV     A,R7
001B 64F1              XRL     A,#0F1H
001D 606D              JZ      ?C0218
                                           ; SOURCE LINE # 915
                                           ; SOURCE LINE # 916
001F 7F4E              MOV     R7,#04EH
0021 120000      E     LCALL   _RamDebug
                                           ; SOURCE LINE # 917
0024 900000      E     MOV     DPTR,#eEEPROMBank
0027 E0                MOVX    A,@DPTR
0028 FF                MOV     R7,A
0029 120000      E     LCALL   _RamDebug
                                           ; SOURCE LINE # 918
002C 900000      R     MOV     DPTR,#nOffSet
002F E0                MOVX    A,@DPTR
0030 FF                MOV     R7,A
0031 120000      E     LCALL   _RamDebug
                                           ; SOURCE LINE # 919
0034 900000      R     MOV     DPTR,#nOffSet
0037 E0                MOVX    A,@DPTR
0038 540F              ANL     A,#0FH
003A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 920
003B E4                CLR     A
003C A3                INC     DPTR
003D F0                MOVX    @DPTR,A
003E         ?C0219:
                                           ; SOURCE LINE # 921
                                           ; SOURCE LINE # 922
003E E4                CLR     A
003F 900000      R     MOV     DPTR,#j
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 70  

0042 F0                MOVX    @DPTR,A
0043         ?C0222:
0043 900000      R     MOV     DPTR,#j
0046 E0                MOVX    A,@DPTR
0047 FF                MOV     R7,A
0048 C3                CLR     C
0049 9410              SUBB    A,#010H
004B 502A              JNC     ?C0223
                                           ; SOURCE LINE # 923
                                           ; SOURCE LINE # 924
004D 900000      R     MOV     DPTR,#i
0050 120000      R     LCALL   L?0561
0053 120000      E     LCALL   _Read_Eflash_Byte
0056 900000      R     MOV     DPTR,#k
0059 EF                MOV     A,R7
005A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 926
005B F4                CPL     A
005C 6019              JZ      ?C0223
                                           ; SOURCE LINE # 927
                                           ; SOURCE LINE # 928
                                           ; SOURCE LINE # 929
005E         ?C0225:
                                           ; SOURCE LINE # 931
                                           ; SOURCE LINE # 932
005E 900000      R     MOV     DPTR,#i
0061 120000      R     LCALL   L?0536
0064 FF                MOV     R7,A
0065 900000      R     MOV     DPTR,#nOffSet
0068 E0                MOVX    A,@DPTR
0069 4F                ORL     A,R7
006A 120000      R     LCALL   L?0572
006D EF                MOV     A,R7
006E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 933
                                           ; SOURCE LINE # 934
006F         ?C0224:
006F 900000      R     MOV     DPTR,#j
0072 E0                MOVX    A,@DPTR
0073 04                INC     A
0074 F0                MOVX    @DPTR,A
0075 80CC              SJMP    ?C0222
0077         ?C0223:
                                           ; SOURCE LINE # 935
0077 900000      R     MOV     DPTR,#k
007A E0                MOVX    A,@DPTR
007B F4                CPL     A
007C 601E              JZ      ?C0228
                                           ; SOURCE LINE # 936
                                           ; SOURCE LINE # 937
007E         ?C0221:
007E 900000      R     MOV     DPTR,#i
0081 E0                MOVX    A,@DPTR
0082 04                INC     A
0083 F0                MOVX    @DPTR,A
0084 E0                MOVX    A,@DPTR
0085 C3                CLR     C
0086 9404              SUBB    A,#04H
0088 40B4              JC      ?C0219
008A 8010              SJMP    ?C0228
                                           ; SOURCE LINE # 938
008C         ?C0218:
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 71  

                                           ; SOURCE LINE # 940
                                           ; SOURCE LINE # 941
008C 900000      E     MOV     DPTR,#eEEPROMBank
008F E0                MOVX    A,@DPTR
0090 44B0              ORL     A,#0B0H
0092 FD                MOV     R5,A
0093 900000      R     MOV     DPTR,#nOffSet
0096 E0                MOVX    A,@DPTR
0097 120000      R     LCALL   L?0572
009A EF                MOV     A,R7
009B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 942
009C         ?C0228:
                                           ; SOURCE LINE # 943
009C 900000      R     MOV     DPTR,#nPort
009F E0                MOVX    A,@DPTR
00A0 FF                MOV     R7,A
00A1 900000      E     MOV     DPTR,#eEEPROMData
00A4 E0                MOVX    A,@DPTR
00A5 FD                MOV     R5,A
00A6 020000      E     LJMP    _Data2PortDirect
                                           ; SOURCE LINE # 944
00A9         L?0572:
00A9 FB                MOV     R3,A
00AA 7F01              MOV     R7,#01H
00AC 120000      E     LCALL   _Read_Eflash_Byte
00AF 900000      E     MOV     DPTR,#eEEPROMData
00B2 22                RET     
             ; FUNCTION _Cmd_4E (END)

             ; FUNCTION _Cmd_51 (BEGIN)
                                           ; SOURCE LINE # 947
0000 900000      R     MOV     DPTR,#nPort
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 948
0005 7D01              MOV     R5,#01H
0007 120000      E     LCALL   _Data2Port
                                           ; SOURCE LINE # 949
000A 900000      R     MOV     DPTR,#nPort
000D E0                MOVX    A,@DPTR
000E FF                MOV     R7,A
000F 7D1E              MOV     R5,#01EH
0011 120000      E     LCALL   _MultiB2Port
                                           ; SOURCE LINE # 951
0014 900000      R     MOV     DPTR,#nPort
0017 E0                MOVX    A,@DPTR
0018 FF                MOV     R7,A
0019 E4                CLR     A
001A FD                MOV     R5,A
001B 020000      E     LJMP    _Data2PortDirect
             ; FUNCTION _Cmd_51 (END)

             ; FUNCTION _Cmd_52_A0 (BEGIN)
                                           ; SOURCE LINE # 954
0000 900000      R     MOV     DPTR,#nPort
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 955
0005 7D44              MOV     R5,#044H
0007 120000      E     LCALL   _Data2Port
                                           ; SOURCE LINE # 956
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 72  

000A 7D53              MOV     R5,#053H
                                           ; SOURCE LINE # 957
000C 120000      R     LCALL   L?0548
000F 7D33              MOV     R5,#033H
0011 120000      E     LCALL   _MultiB2Port
                                           ; SOURCE LINE # 958
0014 7D31              MOV     R5,#031H
                                           ; SOURCE LINE # 959
0016 120000      R     LCALL   L?0548
0019 7D32              MOV     R5,#032H
001B 020000      E     LJMP    _Data2PortDirect
                                           ; SOURCE LINE # 960
001E         L?0548:
001E 900000      R     MOV     DPTR,#nPort
0021 E0                MOVX    A,@DPTR
0022 FF                MOV     R7,A
0023 120000      E     LCALL   _MultiB2Port
0026 900000      R     MOV     DPTR,#nPort
0029 E0                MOVX    A,@DPTR
002A FF                MOV     R7,A
002B 22                RET     
             ; FUNCTION _Cmd_52_A0 (END)

             ; FUNCTION _Cmd_52_A3 (BEGIN)
                                           ; SOURCE LINE # 962
;---- Variable 'nPort' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 963
0000 7D1A              MOV     R5,#01AH
0002 020000      E     LJMP    _Data2PortDirect
             ; FUNCTION _Cmd_52_A3 (END)

             ; FUNCTION _Cmd_52_A4 (BEGIN)
                                           ; SOURCE LINE # 966
0000 900000      R     MOV     DPTR,#nPort
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 967
                                           ; SOURCE LINE # 968
0005 900000      E     MOV     DPTR,#SYS_MISC1
0008 E0                MOVX    A,@DPTR
0009 900000      R     MOV     DPTR,#nPort
000C 30E617            JNB     ACC.6,?C0233
                                           ; SOURCE LINE # 969
                                           ; SOURCE LINE # 970
000F E0                MOVX    A,@DPTR
0010 FF                MOV     R7,A
0011 7D80              MOV     R5,#080H
0013 120000      E     LCALL   _Data2PortDirect
                                           ; SOURCE LINE # 971
0016 900000      E     MOV     DPTR,#SYS_MISC1
0019 E0                MOVX    A,@DPTR
001A 4420              ORL     A,#020H
001C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 972
001D E0                MOVX    A,@DPTR
001E 54BF              ANL     A,#0BFH
0020 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 973
0021 E0                MOVX    A,@DPTR
0022 54F7              ANL     A,#0F7H
0024 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 974
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 73  

0025 22                RET     
0026         ?C0233:
                                           ; SOURCE LINE # 976
                                           ; SOURCE LINE # 977
0026 E0                MOVX    A,@DPTR
0027 FF                MOV     R7,A
0028 E4                CLR     A
0029 FD                MOV     R5,A
002A 120000      E     LCALL   _Data2PortDirect
                                           ; SOURCE LINE # 978
002D 900000      E     MOV     DPTR,#SYS_MISC1
0030 E0                MOVX    A,@DPTR
0031 54DF              ANL     A,#0DFH
0033 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 979
                                           ; SOURCE LINE # 980
0034         ?C0235:
0034 22                RET     
             ; FUNCTION _Cmd_52_A4 (END)

             ; FUNCTION _Cmd_52_A5 (BEGIN)
                                           ; SOURCE LINE # 982
;---- Variable 'nPort' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 983
                                           ; SOURCE LINE # 984
0000 7D23              MOV     R5,#023H
0002 020000      E     LJMP    _Data2PortDirect
             ; FUNCTION _Cmd_52_A5 (END)

             ; FUNCTION _Cmd_52_A6 (BEGIN)
                                           ; SOURCE LINE # 988
;---- Variable 'nPort' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 989
                                           ; SOURCE LINE # 990
0000 7D01              MOV     R5,#01H
0002 020000      E     LJMP    _Data2PortDirect
             ; FUNCTION _Cmd_52_A6 (END)

             ; FUNCTION _Cmd_52_A7 (BEGIN)
                                           ; SOURCE LINE # 993
;---- Variable 'nPort' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 994
                                           ; SOURCE LINE # 995
0000 7DB8              MOV     R5,#0B8H
0002 020000      E     LJMP    _Data2PortDirect
             ; FUNCTION _Cmd_52_A7 (END)

             ; FUNCTION _Cmd_53 (BEGIN)
                                           ; SOURCE LINE # 999
0000 900000      R     MOV     DPTR,#nPort
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
;---- Variable 'nDataM' assigned to Register 'R3' ----
;---- Variable 'nDataH' assigned to Register 'R5' ----
                                           ; SOURCE LINE # 1000
                                           ; SOURCE LINE # 1001
0005 CF                XCH     A,R7
0006 ED                MOV     A,R5
0007 CF                XCH     A,R7
0008 CE                XCH     A,R6
0009 EB                MOV     A,R3
000A CE                XCH     A,R6
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 74  

000B CD                XCH     A,R5
000C EE                MOV     A,R6
000D CD                XCH     A,R5
000E 900000      R     MOV     DPTR,#nDataL
0011 E0                MOVX    A,@DPTR
0012 FB                MOV     R3,A
0013 120000      E     LCALL   _Read_Eflash_Byte
0016 900000      E     MOV     DPTR,#eEEPROMData
0019 EF                MOV     A,R7
001A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1002
001B 900000      R     MOV     DPTR,#nPort
001E E0                MOVX    A,@DPTR
001F FF                MOV     R7,A
0020 900000      E     MOV     DPTR,#eEEPROMData
0023 E0                MOVX    A,@DPTR
0024 FD                MOV     R5,A
0025 020000      E     LJMP    _Data2PortDirect
             ; FUNCTION _Cmd_53 (END)

             ; FUNCTION _Cmd_55 (BEGIN)
                                           ; SOURCE LINE # 1006
;---- Variable 'nData' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 1007
                                           ; SOURCE LINE # 1008
0000 EF                MOV     A,R7
0001 B4B705            CJNE    A,#0B7H,?C0240
                                           ; SOURCE LINE # 1009
                                           ; SOURCE LINE # 1010
0004 900000      E     MOV     DPTR,#PWR_LED_Debug
                                           ; SOURCE LINE # 1011
0007 8011              SJMP    ?C0496
0009         ?C0240:
                                           ; SOURCE LINE # 1012
0009 EF                MOV     A,R7
000A B4B806            CJNE    A,#0B8H,?C0242
                                           ; SOURCE LINE # 1013
                                           ; SOURCE LINE # 1014
000D E4                CLR     A
000E 900000      E     MOV     DPTR,#PWR_LED_Debug
0011 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1015
0012 22                RET     
0013         ?C0242:
                                           ; SOURCE LINE # 1016
0013 EF                MOV     A,R7
0014 B4B906            CJNE    A,#0B9H,?C0245
                                           ; SOURCE LINE # 1017
                                           ; SOURCE LINE # 1018
0017 900000      E     MOV     DPTR,#bios_check
001A         ?C0496:
001A 7401              MOV     A,#01H
001C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1019
                                           ; SOURCE LINE # 1020
001D         ?C0245:
001D 22                RET     
             ; FUNCTION _Cmd_55 (END)

             ; FUNCTION _Cmd_58 (BEGIN)
                                           ; SOURCE LINE # 1023
0000 900000      R     MOV     DPTR,#sCount
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 75  

0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1024
                                           ; SOURCE LINE # 1032
0005 22                RET     
             ; FUNCTION _Cmd_58 (END)

             ; FUNCTION _Cmd_59 (BEGIN)
                                           ; SOURCE LINE # 1034
0000 900000      R     MOV     DPTR,#nPort
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
0005 900000      R     MOV     DPTR,#nData2
0008 EB                MOV     A,R3
0009 F0                MOVX    @DPTR,A
000A 900000      R     MOV     DPTR,#nData
000D ED                MOV     A,R5
000E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1035
                                           ; SOURCE LINE # 1036
000F 120000      E     LCALL   ?C?CCASE
0012 0000        R     DW      ?C0248
0014 60                DB      060H
0015 0000        R     DW      ?C0249
0017 64                DB      064H
0018 0000        R     DW      ?C0250
001A 65                DB      065H
001B 0000        R     DW      ?C0251
001D 6E                DB      06EH
001E 0000        R     DW      ?C0252
0020 76                DB      076H
0021 0000        R     DW      ?C0253
0023 77                DB      077H
0024 0000        R     DW      ?C0254
0026 7A                DB      07AH
0027 0000        R     DW      ?C0255
0029 7B                DB      07BH
002A 0000        R     DW      ?C0256
002C 7C                DB      07CH
002D 0000        R     DW      ?C0257
002F 7D                DB      07DH
0030 0000        R     DW      ?C0258
0032 80                DB      080H
0033 0000        R     DW      ?C0260
0035 81                DB      081H
0036 0000        R     DW      ?C0262
0038 82                DB      082H
0039 0000        R     DW      ?C0263
003B 94                DB      094H
003C 0000        R     DW      ?C0264
003E 95                DB      095H
003F 0000        R     DW      ?C0265
0041 9A                DB      09AH
0042 0000        R     DW      ?C0266
0044 9B                DB      09BH
0045 0000        R     DW      ?C0267
0047 9C                DB      09CH
0048 0000        R     DW      ?C0268
004A 9D                DB      09DH
004B 0000        R     DW      ?C0269
004D 9E                DB      09EH
004E 0000        R     DW      ?C0270
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 76  

0050 A2                DB      0A2H
0051 0000        R     DW      ?C0271
0053 A3                DB      0A3H
0054 0000        R     DW      ?C0272
0056 A4                DB      0A4H
0057 0000        R     DW      ?C0273
0059 B9                DB      0B9H
005A 0000        R     DW      ?C0274
005C BA                DB      0BAH
005D 0000        R     DW      ?C0275
005F C1                DB      0C1H
0060 0000        R     DW      ?C0276
0062 C2                DB      0C2H
0063 0000        R     DW      ?C0277
0065 D2                DB      0D2H
0066 0000        R     DW      ?C0278
0068 D7                DB      0D7H
0069 0000        R     DW      ?C0279
006B D8                DB      0D8H
006C 0000        R     DW      ?C0280
006E D9                DB      0D9H
006F 0000        R     DW      ?C0281
0071 DA                DB      0DAH
0072 0000        R     DW      ?C0282
0074 E1                DB      0E1H
0075 0000        R     DW      ?C0283
0077 E2                DB      0E2H
0078 0000        R     DW      ?C0284
007A E4                DB      0E4H
007B 0000        R     DW      ?C0285
007D E5                DB      0E5H
007E 0000        R     DW      ?C0286
0080 E6                DB      0E6H
0081 0000        R     DW      ?C0287
0083 E7                DB      0E7H
0084 0000        R     DW      ?C0288
0086 E8                DB      0E8H
0087 0000        R     DW      ?C0289
0089 E9                DB      0E9H
008A 0000        R     DW      ?C0293
008C F6                DB      0F6H
008D 0000        R     DW      ?C0293
008F F7                DB      0F7H
0090 0000        R     DW      ?C0293
0092 F8                DB      0F8H
0093 0000        R     DW      ?C0293
0095 F9                DB      0F9H
0096 0000              DW      00H
0098 0000        R     DW      ?C0303
                                           ; SOURCE LINE # 1037
                                           ; SOURCE LINE # 1038
009A         ?C0248:
                                           ; SOURCE LINE # 1039
009A 900000      E     MOV     DPTR,#cCmd
                                           ; SOURCE LINE # 1040
009D 020000      R     LJMP    ?C0506
                                           ; SOURCE LINE # 1041
00A0         ?C0249:
                                           ; SOURCE LINE # 1042
00A0 900000      E     MOV     DPTR,#cCmd
00A3 E0                MOVX    A,@DPTR
00A4 4440              ORL     A,#040H
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 77  

00A6 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1043
00A7 900000      E     MOV     DPTR,#DEBOUNCE_CONT1
                                           ; SOURCE LINE # 1044
00AA 020000      R     LJMP    ?C0498
                                           ; SOURCE LINE # 1046
00AD         ?C0250:
                                           ; SOURCE LINE # 1047
00AD 900000      E     MOV     DPTR,#cCmd
00B0 E0                MOVX    A,@DPTR
00B1 54BF              ANL     A,#0BFH
00B3 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1048
00B4 900000      E     MOV     DPTR,#DEBOUNCE_CONT1
00B7 7464              MOV     A,#064H
00B9 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1049
00BA 22                RET     
                                           ; SOURCE LINE # 1051
00BB         ?C0251:
                                           ; SOURCE LINE # 1052
00BB 900000      R     MOV     DPTR,#nData
00BE E0                MOVX    A,@DPTR
00BF 900000      E     MOV     DPTR,#uCritBattWakeThre
00C2 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1053
00C3 E0                MOVX    A,@DPTR
00C4 4401              ORL     A,#01H
00C6 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1054
00C7 900000      E     MOV     DPTR,#uIffsCnt
00CA 7428              MOV     A,#028H
00CC F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1055
00CD 22                RET     
                                           ; SOURCE LINE # 1057
00CE         ?C0252:
                                           ; SOURCE LINE # 1058
                                           ; SOURCE LINE # 1059
                                           ; SOURCE LINE # 1060
00CE 120000      R     LCALL   L?0550
00D1 54EF              ANL     A,#0EFH
00D3 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1061
00D4 22                RET     
                                           ; SOURCE LINE # 1062
00D5         ?C0253:
                                           ; SOURCE LINE # 1063
                                           ; SOURCE LINE # 1064
                                           ; SOURCE LINE # 1065
00D5 120000      R     LCALL   L?0550
00D8 4410              ORL     A,#010H
00DA F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1066
00DB 22                RET     
                                           ; SOURCE LINE # 1068
00DC         ?C0254:
                                           ; SOURCE LINE # 1069
00DC 900000      E     MOV     DPTR,#pDevStus
00DF E0                MOVX    A,@DPTR
00E0 4408              ORL     A,#08H
00E2 F0                MOVX    @DPTR,A
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 78  

                                           ; SOURCE LINE # 1070
00E3 020000      E     LJMP    EnablePS2Port_2
                                           ; SOURCE LINE # 1071
                                           ; SOURCE LINE # 1072
00E6         ?C0255:
                                           ; SOURCE LINE # 1073
00E6 900000      E     MOV     DPTR,#pDevStus
00E9 E0                MOVX    A,@DPTR
00EA 54F7              ANL     A,#0F7H
00EC F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1074
00ED 020000      E     LJMP    DisablePS2Port_2
                                           ; SOURCE LINE # 1075
                                           ; SOURCE LINE # 1077
00F0         ?C0256:
                                           ; SOURCE LINE # 1078
00F0 900000      E     MOV     DPTR,#SysStatus
00F3 E0                MOVX    A,@DPTR
00F4 547F              ANL     A,#07FH
00F6 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1079
00F7 C200        E     CLR     Ccb42_DISAB_KEY
                                           ; SOURCE LINE # 1080
00F9 7800        E     MOV     R0,#LOW Flag
00FB E6                MOV     A,@R0
00FC 54FE              ANL     A,#0FEH
00FE F6                MOV     @R0,A
                                           ; SOURCE LINE # 1081
00FF 020000      E     LJMP    Unlock_Scan
                                           ; SOURCE LINE # 1082
                                           ; SOURCE LINE # 1084
0102         ?C0257:
                                           ; SOURCE LINE # 1085
                                           ; SOURCE LINE # 1086
0102 120000      R     LCALL   L?0565
                                           ; SOURCE LINE # 1087
                                           ; SOURCE LINE # 1088
                                           ; SOURCE LINE # 1089
0105 020000      R     LJMP    ?C0499
                                           ; SOURCE LINE # 1091
0108         ?C0258:
                                           ; SOURCE LINE # 1092
0108 900000      E     MOV     DPTR,#cBattFlag0
010B E0                MOVX    A,@DPTR
010C 4402              ORL     A,#02H
                                           ; SOURCE LINE # 1093
                                           ; SOURCE LINE # 1094
010E 120000      R     LCALL   L?0552
0111 54FB              ANL     A,#0FBH
                                           ; SOURCE LINE # 1095
                                           ; SOURCE LINE # 1096
                                           ; SOURCE LINE # 1097
0113 120000      R     LCALL   L?0547
0116 5003              JNC     $ + 5H
0118 020000      R     LJMP    ?C0303
                                           ; SOURCE LINE # 1098
011B E4                CLR     A
011C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1099
011D 22                RET     
                                           ; SOURCE LINE # 1101
011E         ?C0260:
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 79  

                                           ; SOURCE LINE # 1102
                                           ; SOURCE LINE # 1103
                                           ; SOURCE LINE # 1104
011E 120000      R     LCALL   L?0551
0121 4404              ORL     A,#04H
                                           ; SOURCE LINE # 1105
                                           ; SOURCE LINE # 1106
                                           ; SOURCE LINE # 1107
0123 120000      R     LCALL   L?0547
0126 5003              JNC     $ + 5H
0128 020000      R     LJMP    ?C0303
                                           ; SOURCE LINE # 1108
012B E4                CLR     A
012C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1109
012D 22                RET     
                                           ; SOURCE LINE # 1110
012E         ?C0262:
                                           ; SOURCE LINE # 1111
                                           ; SOURCE LINE # 1112
                                           ; SOURCE LINE # 1113
012E 120000      R     LCALL   L?0551
0131 54FB              ANL     A,#0FBH
0133 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1115
0134 900000      E     MOV     DPTR,#ACOFF_SOURCE
0137 E0                MOVX    A,@DPTR
0138 54FB              ANL     A,#0FBH
013A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1116
013B 020000      E     LJMP    BATT_LEN_OFF
                                           ; SOURCE LINE # 1118
                                           ; SOURCE LINE # 1120
013E         ?C0263:
                                           ; SOURCE LINE # 1121
013E 900000      E     MOV     DPTR,#cCmd
0141 E0                MOVX    A,@DPTR
0142 4420              ORL     A,#020H
0144 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1122
0145 900000      E     MOV     DPTR,#GPDRJ
                                           ; SOURCE LINE # 1123
0148 020000      R     LJMP    ?C0505
                                           ; SOURCE LINE # 1124
014B         ?C0264:
                                           ; SOURCE LINE # 1125
014B 900000      E     MOV     DPTR,#cCmd
014E E0                MOVX    A,@DPTR
014F 54DF              ANL     A,#0DFH
0151 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1126
0152 900000      E     MOV     DPTR,#GPDRJ
                                           ; SOURCE LINE # 1127
0155 020000      R     LJMP    ?C0504
                                           ; SOURCE LINE # 1129
0158         ?C0265:
                                           ; SOURCE LINE # 1130
0158 900000      E     MOV     DPTR,#cBattFlag0
015B E0                MOVX    A,@DPTR
015C 4480              ORL     A,#080H
015E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1131
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 80  

015F 900000      E     MOV     DPTR,#ACOFF_SOURCE
0162 E0                MOVX    A,@DPTR
0163 4408              ORL     A,#08H
0165 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1132
0166 900000      E     MOV     DPTR,#SYS_STATUS
0169 E0                MOVX    A,@DPTR
016A 547F              ANL     A,#07FH
016C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1134
016D 120000      E     LCALL   BATT_LEN_ON
                                           ; SOURCE LINE # 1135
0170 7F38              MOV     R7,#038H
                                           ; SOURCE LINE # 1136
0172 801A              SJMP    ?C0502
                                           ; SOURCE LINE # 1137
0174         ?C0266:
                                           ; SOURCE LINE # 1138
0174 900000      E     MOV     DPTR,#cBattFlag0
0177 E0                MOVX    A,@DPTR
0178 547F              ANL     A,#07FH
017A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1139
017B 900000      E     MOV     DPTR,#ACOFF_SOURCE
017E E0                MOVX    A,@DPTR
017F 54F7              ANL     A,#0F7H
0181 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1140
0182 900000      E     MOV     DPTR,#SYS_STATUS
0185 E0                MOVX    A,@DPTR
0186 4480              ORL     A,#080H
0188 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1141
0189 120000      E     LCALL   BATT_LEN_OFF
                                           ; SOURCE LINE # 1142
018C 7F37              MOV     R7,#037H
018E         ?C0502:
018E 020000      E     LJMP    _ECSMI_SCIEvent
                                           ; SOURCE LINE # 1143
                                           ; SOURCE LINE # 1145
0191         ?C0267:
                                           ; SOURCE LINE # 1146
0191 900000      E     MOV     DPTR,#cDev
0194 E0                MOVX    A,@DPTR
0195 4408              ORL     A,#08H
                                           ; SOURCE LINE # 1147
                                           ; SOURCE LINE # 1149
0197 8006              SJMP    ?C0503
                                           ; SOURCE LINE # 1151
0199         ?C0268:
                                           ; SOURCE LINE # 1152
0199 900000      E     MOV     DPTR,#cDev
019C E0                MOVX    A,@DPTR
019D 54F7              ANL     A,#0F7H
019F         ?C0503:
019F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1153
01A0 900000      R     MOV     DPTR,#nPort
01A3 E0                MOVX    A,@DPTR
01A4 FF                MOV     R7,A
01A5 7D55              MOV     R5,#055H
01A7 020000      E     LJMP    _Data2PortDirect
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 81  

                                           ; SOURCE LINE # 1155
                                           ; SOURCE LINE # 1157
01AA         ?C0269:
                                           ; SOURCE LINE # 1158
01AA         ?C0499:
01AA 7800        E     MOV     R0,#LOW Flag
01AC E6                MOV     A,@R0
01AD 4401              ORL     A,#01H
01AF F6                MOV     @R0,A
                                           ; SOURCE LINE # 1159
01B0 020000      E     LJMP    Lock_Scan
                                           ; SOURCE LINE # 1160
                                           ; SOURCE LINE # 1162
01B3         ?C0270:
                                           ; SOURCE LINE # 1163
01B3 900000      E     MOV     DPTR,#SysStatus
01B6 E0                MOVX    A,@DPTR
01B7 4402              ORL     A,#02H
01B9 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1164
01BA 7F04              MOV     R7,#04H
01BC 120000      E     LCALL   _ProcessSID
                                           ; SOURCE LINE # 1165
01BF 900000      E     MOV     DPTR,#PWSeqStep
01C2 7401              MOV     A,#01H
01C4 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1166
01C5 E4                CLR     A
01C6 900000      E     MOV     DPTR,#PowSeqDelay
01C9 F0                MOVX    @DPTR,A
01CA A3                INC     DPTR
01CB F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1167
01CC 7F0A              MOV     R7,#0AH
01CE 120000      E     LCALL   _RamDebug
                                           ; SOURCE LINE # 1168
01D1 900000      E     MOV     DPTR,#SysPowState
01D4         ?C0498:
01D4 7405              MOV     A,#05H
01D6 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1169
01D7 22                RET     
                                           ; SOURCE LINE # 1171
01D8         ?C0271:
                                           ; SOURCE LINE # 1172
01D8 900000      E     MOV     DPTR,#cBattInform
01DB         ?C0501:
                                           ; SOURCE LINE # 1173
01DB 8064              SJMP    ?C0504
                                           ; SOURCE LINE # 1174
01DD         ?C0272:
                                           ; SOURCE LINE # 1175
01DD 900000      E     MOV     DPTR,#cBattInform
01E0         ?C0500:
                                           ; SOURCE LINE # 1176
01E0 8050              SJMP    ?C0505
                                           ; SOURCE LINE # 1178
01E2         ?C0273:
                                           ; SOURCE LINE # 1179
01E2 900000      E     MOV     DPTR,#uReserve07
01E5         ?C0497:
                                           ; SOURCE LINE # 1180
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 82  

01E5 8034              SJMP    ?C0506
                                           ; SOURCE LINE # 1181
01E7         ?C0274:
                                           ; SOURCE LINE # 1182
01E7 900000      E     MOV     DPTR,#uReserve07
                                           ; SOURCE LINE # 1183
01EA 800B              SJMP    ?C0507
                                           ; SOURCE LINE # 1185
01EC         ?C0275:
                                           ; SOURCE LINE # 1186
01EC 900000      E     MOV     DPTR,#cBattFlag0
01EF E0                MOVX    A,@DPTR
01F0 4408              ORL     A,#08H
01F2 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1187
01F3 22                RET     
                                           ; SOURCE LINE # 1188
01F4         ?C0276:
                                           ; SOURCE LINE # 1189
01F4 900000      E     MOV     DPTR,#cBattFlag0
01F7         ?C0507:
01F7 E0                MOVX    A,@DPTR
01F8 54F7              ANL     A,#0F7H
01FA F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1190
01FB 22                RET     
                                           ; SOURCE LINE # 1192
01FC         ?C0277:
                                           ; SOURCE LINE # 1193
01FC 900000      E     MOV     DPTR,#DCR6
01FF 747F              MOV     A,#07FH
0201 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1194
0202 900000      E     MOV     DPTR,#PWM_LEDBeep_CNT
                                           ; SOURCE LINE # 1195
0205 020000      R     LJMP    ?C0508
                                           ; SOURCE LINE # 1197
0208         ?C0278:
                                           ; SOURCE LINE # 1198
0208 900000      E     MOV     DPTR,#nStopChgStat3L
020B E0                MOVX    A,@DPTR
020C 4420              ORL     A,#020H
020E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1199
020F 22                RET     
                                           ; SOURCE LINE # 1201
0210         ?C0279:
                                           ; SOURCE LINE # 1202
0210 900000      E     MOV     DPTR,#nStopChgStat3L
0213 E0                MOVX    A,@DPTR
0214 54DF              ANL     A,#0DFH
0216 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1203
0217 22                RET     
                                           ; SOURCE LINE # 1205
0218         ?C0280:
                                           ; SOURCE LINE # 1206
0218 900000      E     MOV     DPTR,#KBHISR
021B         ?C0506:
021B E0                MOVX    A,@DPTR
021C 4404              ORL     A,#04H
021E F0                MOVX    @DPTR,A
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 83  

                                           ; SOURCE LINE # 1207
021F 22                RET     
                                           ; SOURCE LINE # 1209
0220         ?C0281:
                                           ; SOURCE LINE # 1210
0220 900000      E     MOV     DPTR,#KBHISR
0223 E0                MOVX    A,@DPTR
0224 54FB              ANL     A,#0FBH
0226 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1211
0227 22                RET     
                                           ; SOURCE LINE # 1213
0228         ?C0282:
                                           ; SOURCE LINE # 1214
0228 900000      E     MOV     DPTR,#cCmd
022B E0                MOVX    A,@DPTR
022C 54F7              ANL     A,#0F7H
022E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1215
022F 900000      E     MOV     DPTR,#OEMControl
0232         ?C0505:
0232 E0                MOVX    A,@DPTR
0233 54FD              ANL     A,#0FDH
0235 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1217
0236 22                RET     
                                           ; SOURCE LINE # 1219
0237         ?C0283:
                                           ; SOURCE LINE # 1220
0237 900000      E     MOV     DPTR,#cCmd
023A E0                MOVX    A,@DPTR
023B 4408              ORL     A,#08H
023D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1221
023E 900000      E     MOV     DPTR,#OEMControl
0241         ?C0504:
0241 E0                MOVX    A,@DPTR
0242 4402              ORL     A,#02H
0244 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1223
0245 22                RET     
                                           ; SOURCE LINE # 1225
0246         ?C0284:
                                           ; SOURCE LINE # 1226
0246 900000      E     MOV     DPTR,#cKBStatus
0249 E0                MOVX    A,@DPTR
024A 4403              ORL     A,#03H
                                           ; SOURCE LINE # 1227
                                           ; SOURCE LINE # 1228
024C 8015              SJMP    ?C0511
                                           ; SOURCE LINE # 1229
024E         ?C0285:
                                           ; SOURCE LINE # 1230
024E 120000      R     LCALL   L?0566
0251         ?C0509:
                                           ; SOURCE LINE # 1231
                                           ; SOURCE LINE # 1232
0251 8010              SJMP    ?C0511
                                           ; SOURCE LINE # 1233
0253         ?C0286:
                                           ; SOURCE LINE # 1234
0253 120000      R     LCALL   L?0566
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 84  

0256 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1235
0257 E0                MOVX    A,@DPTR
0258 4402              ORL     A,#02H
025A         ?C0510:
                                           ; SOURCE LINE # 1236
                                           ; SOURCE LINE # 1237
025A 8007              SJMP    ?C0511
                                           ; SOURCE LINE # 1238
025C         ?C0287:
                                           ; SOURCE LINE # 1239
025C 120000      R     LCALL   L?0567
025F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1240
0260 E0                MOVX    A,@DPTR
0261 4401              ORL     A,#01H
0263         ?C0511:
0263 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1241
0264 020000      E     LJMP    LoadKBMatrixToRAM
                                           ; SOURCE LINE # 1242
                                           ; SOURCE LINE # 1244
0267         ?C0288:
                                           ; SOURCE LINE # 1245
0267 900000      E     MOV     DPTR,#SYS_MISC1
026A E0                MOVX    A,@DPTR
026B 4480              ORL     A,#080H
026D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1246
026E E4                CLR     A
026F 900000      E     MOV     DPTR,#Bioswatchdog
0272 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1247
0273 900000      E     MOV     DPTR,#Bioswatchdogtime
0276 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1248
0277 22                RET     
                                           ; SOURCE LINE # 1249
0278         ?C0289:
                                           ; SOURCE LINE # 1250
0278 900000      E     MOV     DPTR,#SYS_MISC1
027B E0                MOVX    A,@DPTR
027C 547F              ANL     A,#07FH
027E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1251
027F 22                RET     
                                           ; SOURCE LINE # 1253
                                           ; SOURCE LINE # 1254
                                           ; SOURCE LINE # 1255
                                           ; SOURCE LINE # 1256
0280         ?C0293:
                                           ; SOURCE LINE # 1257
0280 900000      E     MOV     DPTR,#SYS_MISC1
0283 E0                MOVX    A,@DPTR
0284 30E707            JNB     ACC.7,?C0294
                                           ; SOURCE LINE # 1258
                                           ; SOURCE LINE # 1259
0287 900000      E     MOV     DPTR,#cSysActionFlag
028A         ?C0508:
028A 7404              MOV     A,#04H
028C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1260
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 85  

028D 22                RET     
028E         ?C0294:
                                           ; SOURCE LINE # 1262
                                           ; SOURCE LINE # 1263
028E 900000      R     MOV     DPTR,#nData
0291 E0                MOVX    A,@DPTR
0292 FF                MOV     R7,A
0293 B4F602            CJNE    A,#0F6H,?C0296
                                           ; SOURCE LINE # 1264
0296 8004              SJMP    ?C0512
0298         ?C0296:
                                           ; SOURCE LINE # 1265
0298 EF                MOV     A,R7
0299 B4F707            CJNE    A,#0F7H,?C0298
                                           ; SOURCE LINE # 1266
029C         ?C0512:
029C 900000      E     MOV     DPTR,#cSysActionFlag
029F 7403              MOV     A,#03H
02A1 F0                MOVX    @DPTR,A
02A2 22                RET     
02A3         ?C0298:
                                           ; SOURCE LINE # 1267
02A3 EF                MOV     A,R7
02A4 B4F807            CJNE    A,#0F8H,?C0300
                                           ; SOURCE LINE # 1268
02A7 900000      E     MOV     DPTR,#cSysActionFlag
02AA 7402              MOV     A,#02H
02AC F0                MOVX    @DPTR,A
02AD 22                RET     
02AE         ?C0300:
                                           ; SOURCE LINE # 1269
02AE EF                MOV     A,R7
02AF B4F906            CJNE    A,#0F9H,?C0303
                                           ; SOURCE LINE # 1270
02B2 900000      E     MOV     DPTR,#cSysActionFlag
02B5 7401              MOV     A,#01H
02B7 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1271
                                           ; SOURCE LINE # 1273
                                           ; SOURCE LINE # 1274
                                           ; SOURCE LINE # 1275
02B8         ?C0303:
02B8 22                RET     
             ; FUNCTION _Cmd_59 (END)

             ; FUNCTION _Cmd_5C (BEGIN)
                                           ; SOURCE LINE # 1277
;---- Variable 'nPort' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 1278
                                           ; SOURCE LINE # 1280
0000 900000      E     MOV     DPTR,#nBrightValue
0003 E0                MOVX    A,@DPTR
0004 FD                MOV     R5,A
0005 020000      E     LJMP    _Data2PortDirect
             ; FUNCTION _Cmd_5C (END)

             ; FUNCTION _Cmd_5D (BEGIN)
                                           ; SOURCE LINE # 1283
;---- Variable 'sCount' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 1284
                                           ; SOURCE LINE # 1285
0000 900000      E     MOV     DPTR,#nBrightValue
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 86  

0003 E0                MOVX    A,@DPTR
0004 6F                XRL     A,R7
0005 6032              JZ      ?C0312
                                           ; SOURCE LINE # 1286
                                           ; SOURCE LINE # 1287
0007 900000      E     MOV     DPTR,#SYS_STATUS
000A E0                MOVX    A,@DPTR
000B 5407              ANL     A,#07H
000D C3                CLR     C
000E 9404              SUBB    A,#04H
0010 4018              JC      ?C0306
0012 E0                MOVX    A,@DPTR
0013 5407              ANL     A,#07H
0015 D3                SETB    C
0016 9406              SUBB    A,#06H
0018 5010              JNC     ?C0306
                                           ; SOURCE LINE # 1288
                                           ; SOURCE LINE # 1289
001A EF                MOV     A,R7
001B C3                CLR     C
001C 9415              SUBB    A,#015H
001E 900000      E     MOV     DPTR,#nBrightValue
0021 4004              JC      ?C0307
                                           ; SOURCE LINE # 1290
                                           ; SOURCE LINE # 1291
0023 7414              MOV     A,#014H
0025 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1292
0026 22                RET     
0027         ?C0307:
                                           ; SOURCE LINE # 1294
                                           ; SOURCE LINE # 1295
0027 EF                MOV     A,R7
0028 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1296
                                           ; SOURCE LINE # 1297
0029 22                RET     
002A         ?C0306:
                                           ; SOURCE LINE # 1299
                                           ; SOURCE LINE # 1300
002A EF                MOV     A,R7
002B C3                CLR     C
002C 940A              SUBB    A,#0AH
002E 900000      E     MOV     DPTR,#nBrightValue
0031 4004              JC      ?C0310
                                           ; SOURCE LINE # 1301
                                           ; SOURCE LINE # 1302
0033 7409              MOV     A,#09H
0035 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1303
0036 22                RET     
0037         ?C0310:
                                           ; SOURCE LINE # 1305
                                           ; SOURCE LINE # 1306
0037 EF                MOV     A,R7
0038 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1307
                                           ; SOURCE LINE # 1308
                                           ; SOURCE LINE # 1309
                                           ; SOURCE LINE # 1310
0039         ?C0312:
0039 22                RET     
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 87  

             ; FUNCTION _Cmd_5D (END)

             ; FUNCTION _Cmd_71 (BEGIN)
                                           ; SOURCE LINE # 1311
;---- Variable 'nData' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 1312
                                           ; SOURCE LINE # 1316
0000 900000      E     MOV     DPTR,#uMBID
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1317
0005 020000      E     LJMP    LoadKBMatrixToRAM
             ; FUNCTION _Cmd_71 (END)

             ; FUNCTION _Cmd_72 (BEGIN)
                                           ; SOURCE LINE # 1321
;---- Variable 'nData' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 1322
                                           ; SOURCE LINE # 1323
0000 EF                MOV     A,R7
0001 247F              ADD     A,#07FH
0003 600A              JZ      ?C0316
0005 04                INC     A
0006 700C              JNZ     ?C0317
                                           ; SOURCE LINE # 1324
                                           ; SOURCE LINE # 1325
0008         ?C0315:
                                           ; SOURCE LINE # 1326
0008 900000      E     MOV     DPTR,#testtoolflag
000B 7401              MOV     A,#01H
000D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1327
000E 22                RET     
                                           ; SOURCE LINE # 1328
000F         ?C0316:
                                           ; SOURCE LINE # 1329
000F E4                CLR     A
0010 900000      E     MOV     DPTR,#testtoolflag
0013 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1330
                                           ; SOURCE LINE # 1331
                                           ; SOURCE LINE # 1333
0014         ?C0317:
0014 22                RET     
             ; FUNCTION _Cmd_72 (END)

             ; FUNCTION Cmd_75 (BEGIN)
                                           ; SOURCE LINE # 1337
                                           ; SOURCE LINE # 1338
                                           ; SOURCE LINE # 1339
0000 900000      E     MOV     DPTR,#PCH_ColdBoot_TimeOut
0003 7414              MOV     A,#014H
0005 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1340
0006 22                RET     
             ; FUNCTION Cmd_75 (END)

             ; FUNCTION _Cmd_7A (BEGIN)
                                           ; SOURCE LINE # 1344
0000 900000      R     MOV     DPTR,#nPort
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 88  

0005 A3                INC     DPTR
0006 ED                MOV     A,R5
0007 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1345
                                           ; SOURCE LINE # 1346
0008 7FAA              MOV     R7,#0AAH
000A 120000      E     LCALL   _RamDebug
                                           ; SOURCE LINE # 1347
000D 900000      R     MOV     DPTR,#nData
0010 E0                MOVX    A,@DPTR
0011 FF                MOV     R7,A
0012 120000      E     LCALL   _RamDebug
                                           ; SOURCE LINE # 1348
0015 900000      R     MOV     DPTR,#nData
0018 E0                MOVX    A,@DPTR
0019 24EF              ADD     A,#0EFH
001B 600F              JZ      ?C0321
001D 14                DEC     A
001E 602D              JZ      ?C0324
0020 2402              ADD     A,#02H
0022 7030              JNZ     ?C0326
                                           ; SOURCE LINE # 1349
                                           ; SOURCE LINE # 1350
0024         ?C0320:
                                           ; SOURCE LINE # 1351
0024 900000      E     MOV     DPTR,#pProject0
0027 E0                MOVX    A,@DPTR
0028 4402              ORL     A,#02H
002A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1352
002B 22                RET     
                                           ; SOURCE LINE # 1353
002C         ?C0321:
                                           ; SOURCE LINE # 1354
002C 900000      E     MOV     DPTR,#pProject0
002F E0                MOVX    A,@DPTR
0030 900000      R     MOV     DPTR,#nPort
0033 30E30B            JNB     ACC.3,?C0322
                                           ; SOURCE LINE # 1355
                                           ; SOURCE LINE # 1356
0036 E0                MOVX    A,@DPTR
0037 FF                MOV     R7,A
0038 7D01              MOV     R5,#01H
003A 120000      E     LCALL   _Data2Port
                                           ; SOURCE LINE # 1357
003D 7F01              MOV     R7,#01H
                                           ; SOURCE LINE # 1358
003F 8009              SJMP    ?C0513
0041         ?C0322:
                                           ; SOURCE LINE # 1360
                                           ; SOURCE LINE # 1361
0041 E0                MOVX    A,@DPTR
0042 FF                MOV     R7,A
0043 E4                CLR     A
0044 FD                MOV     R5,A
0045 120000      E     LCALL   _Data2Port
                                           ; SOURCE LINE # 1362
0048 7F10              MOV     R7,#010H
004A         ?C0513:
004A 020000      E     LJMP    _RamDebug
                                           ; SOURCE LINE # 1363
                                           ; SOURCE LINE # 1364
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 89  

                                           ; SOURCE LINE # 1365
004D         ?C0324:
                                           ; SOURCE LINE # 1366
004D 900000      E     MOV     DPTR,#pProject0
0050 E0                MOVX    A,@DPTR
0051 4420              ORL     A,#020H
0053 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1367
                                           ; SOURCE LINE # 1368
                                           ; SOURCE LINE # 1369
                                           ; SOURCE LINE # 1370
                                           ; SOURCE LINE # 1371
0054         ?C0326:
0054 22                RET     
             ; FUNCTION _Cmd_7A (END)

             ; FUNCTION _Cmd_7B (BEGIN)
                                           ; SOURCE LINE # 1372
0000 900000      R     MOV     DPTR,#nPort
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
0005 A3                INC     DPTR
0006 ED                MOV     A,R5
0007 F0                MOVX    @DPTR,A
0008 A3                INC     DPTR
0009 EB                MOV     A,R3
000A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1373
                                           ; SOURCE LINE # 1375
000B E4                CLR     A
000C A3                INC     DPTR
000D F0                MOVX    @DPTR,A
000E A3                INC     DPTR
000F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1376
0010 7FAB              MOV     R7,#0ABH
0012 120000      E     LCALL   _RamDebug
                                           ; SOURCE LINE # 1377
0015 900000      R     MOV     DPTR,#nDataH
0018 E0                MOVX    A,@DPTR
0019 FF                MOV     R7,A
001A 120000      E     LCALL   _RamDebug
                                           ; SOURCE LINE # 1378
001D 900000      R     MOV     DPTR,#nDataL
0020 E0                MOVX    A,@DPTR
0021 FF                MOV     R7,A
0022 120000      E     LCALL   _RamDebug
                                           ; SOURCE LINE # 1379
0025 900000      R     MOV     DPTR,#nDataH
0028 E0                MOVX    A,@DPTR
0029 24DF              ADD     A,#0DFH
002B 6016              JZ      ?C0329
002D 14                DEC     A
002E 6026              JZ      ?C0330
0030 2402              ADD     A,#02H
0032 7046              JNZ     ?C0327
                                           ; SOURCE LINE # 1380
                                           ; SOURCE LINE # 1381
0034         ?C0328:
                                           ; SOURCE LINE # 1382
0034 900000      R     MOV     DPTR,#nDataL
0037 E0                MOVX    A,@DPTR
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 90  

0038 25E0              ADD     A,ACC
003A FE                MOV     R6,A
003B A3                INC     DPTR
003C E0                MOVX    A,@DPTR
003D 4E                ORL     A,R6
003E F0                MOVX    @DPTR,A
003F A3                INC     DPTR
0040 E0                MOVX    A,@DPTR
                                           ; SOURCE LINE # 1383
                                           ; SOURCE LINE # 1384
                                           ; SOURCE LINE # 1385
0041 801E              SJMP    ?C0515
                                           ; SOURCE LINE # 1386
0043         ?C0329:
                                           ; SOURCE LINE # 1387
0043 900000      R     MOV     DPTR,#nDataL
0046 E0                MOVX    A,@DPTR
0047 75F020            MOV     B,#020H
004A A4                MUL     AB
004B FF                MOV     R7,A
004C A3                INC     DPTR
004D E0                MOVX    A,@DPTR
004E 45F0              ORL     A,B
0050 F0                MOVX    @DPTR,A
0051 A3                INC     DPTR
0052 E0                MOVX    A,@DPTR
0053 4F                ORL     A,R7
0054         ?C0514:
                                           ; SOURCE LINE # 1388
                                           ; SOURCE LINE # 1389
                                           ; SOURCE LINE # 1390
0054 800B              SJMP    ?C0515
                                           ; SOURCE LINE # 1391
0056         ?C0330:
                                           ; SOURCE LINE # 1392
0056 900000      R     MOV     DPTR,#nDataL
0059 E0                MOVX    A,@DPTR
005A FF                MOV     R7,A
005B A3                INC     DPTR
005C E0                MOVX    A,@DPTR
005D F0                MOVX    @DPTR,A
005E A3                INC     DPTR
005F E0                MOVX    A,@DPTR
0060 4F                ORL     A,R7
0061         ?C0515:
0061 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1393
0062 900000      R     MOV     DPTR,#FUDateTemp
0065 E0                MOVX    A,@DPTR
0066 FF                MOV     R7,A
0067 900000      E     MOV     DPTR,#batteryFirstUsedDateH
006A E0                MOVX    A,@DPTR
006B 4F                ORL     A,R7
006C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1394
006D 900000      R     MOV     DPTR,#FUDateTemp
0070 E0                MOVX    A,@DPTR
0071 A3                INC     DPTR
0072 E0                MOVX    A,@DPTR
0073 FF                MOV     R7,A
0074 900000      E     MOV     DPTR,#batteryFirstUsedDateL
0077 E0                MOVX    A,@DPTR
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 91  

0078 4F                ORL     A,R7
0079 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1395
                                           ; SOURCE LINE # 1396
                                           ; SOURCE LINE # 1397
                                           ; SOURCE LINE # 1398
007A         ?C0327:
                                           ; SOURCE LINE # 1400
007A 900000      E     MOV     DPTR,#batteryFirstUsedDateH
007D E0                MOVX    A,@DPTR
007E FF                MOV     R7,A
007F 120000      E     LCALL   _RamDebug
                                           ; SOURCE LINE # 1401
0082 900000      E     MOV     DPTR,#batteryFirstUsedDateL
0085 E0                MOVX    A,@DPTR
0086 FF                MOV     R7,A
0087 020000      E     LJMP    _RamDebug
             ; FUNCTION _Cmd_7B (END)

             ; FUNCTION _Cmd_7E (BEGIN)
                                           ; SOURCE LINE # 1405
0000 900000      R     MOV     DPTR,#nDataH
0003 ED                MOV     A,R5
0004 F0                MOVX    @DPTR,A
0005 A3                INC     DPTR
0006 EB                MOV     A,R3
0007 F0                MOVX    @DPTR,A
;---- Variable 'nPort' assigned to Register 'R4' ----
0008 CC                XCH     A,R4
0009 EF                MOV     A,R7
000A CC                XCH     A,R4
                                           ; SOURCE LINE # 1406
                                           ; SOURCE LINE # 1408
000B 900000      R     MOV     DPTR,#nDataH
000E E0                MOVX    A,@DPTR
000F FE                MOV     R6,A
0010 A3                INC     DPTR
0011 E0                MOVX    A,@DPTR
0012 FB                MOV     R3,A
0013 EB                MOV     A,R3
0014 F582              MOV     DPL,A
0016 8E83              MOV     DPH,R6
0018 E0                MOVX    A,@DPTR
0019 900000      R     MOV     DPTR,#temp
001C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1409
001D CF                XCH     A,R7
001E EC                MOV     A,R4
001F CF                XCH     A,R7
0020 E0                MOVX    A,@DPTR
0021 FD                MOV     R5,A
0022 020000      E     LJMP    _Data2PortDirect
             ; FUNCTION _Cmd_7E (END)

             ; FUNCTION _Cmd_97 (BEGIN)
                                           ; SOURCE LINE # 1413
0000 900000      R     MOV     DPTR,#nData
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1414
                                           ; SOURCE LINE # 1415
0005 900000      E     MOV     DPTR,#uReserve07
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 92  

0008 E0                MOVX    A,@DPTR
0009 4410              ORL     A,#010H
000B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1416
000C 7F97              MOV     R7,#097H
000E 120000      E     LCALL   _RamDebug
                                           ; SOURCE LINE # 1417
0011 900000      R     MOV     DPTR,#nData
0014 E0                MOVX    A,@DPTR
0015 FF                MOV     R7,A
0016 120000      E     LCALL   _RamDebug
                                           ; SOURCE LINE # 1418
0019 900000      R     MOV     DPTR,#nData
001C E0                MOVX    A,@DPTR
001D 24FE              ADD     A,#0FEH
001F 6013              JZ      ?C0338
0021 04                INC     A
0022 7035              JNZ     ?C0340
                                           ; SOURCE LINE # 1419
                                           ; SOURCE LINE # 1420
                                           ; SOURCE LINE # 1421
                                           ; SOURCE LINE # 1422
0024         ?C0336:
                                           ; SOURCE LINE # 1423
0024 900000      E     MOV     DPTR,#pDevStus
0027 E0                MOVX    A,@DPTR
0028 54F7              ANL     A,#0F7H
002A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1424
002B 900000      E     MOV     DPTR,#StatusKeeper
002E E0                MOVX    A,@DPTR
002F 30E527            JNB     ACC.5,?C0340
                                           ; SOURCE LINE # 1425
                                           ; SOURCE LINE # 1426
                                           ; SOURCE LINE # 1427
                                           ; SOURCE LINE # 1428
                                           ; SOURCE LINE # 1429
                                           ; SOURCE LINE # 1430
                                           ; SOURCE LINE # 1431
0032 800E              SJMP    ?C0516
                                           ; SOURCE LINE # 1432
0034         ?C0338:
                                           ; SOURCE LINE # 1433
0034 900000      E     MOV     DPTR,#pDevStus
0037 E0                MOVX    A,@DPTR
0038 4408              ORL     A,#08H
003A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1434
003B 900000      E     MOV     DPTR,#StatusKeeper
003E E0                MOVX    A,@DPTR
003F 30E517            JNB     ACC.5,?C0340
                                           ; SOURCE LINE # 1435
                                           ; SOURCE LINE # 1436
0042         ?C0516:
0042 900000      E     MOV     DPTR,#uVPCeventSource
0045 7420              MOV     A,#020H
0047 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1437
0048 E4                CLR     A
0049 900000      E     MOV     DPTR,#uVPCeventSource2
004C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1438
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 93  

004D 7F44              MOV     R7,#044H
004F 120000      E     LCALL   _ECSMI_SCIEvent
                                           ; SOURCE LINE # 1439
0052 900000      E     MOV     DPTR,#StatusKeeper
0055 E0                MOVX    A,@DPTR
0056 54DF              ANL     A,#0DFH
0058 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1440
                                           ; SOURCE LINE # 1441
                                           ; SOURCE LINE # 1442
                                           ; SOURCE LINE # 1443
0059         ?C0340:
0059 22                RET     
             ; FUNCTION _Cmd_97 (END)

             ; FUNCTION _Cmd_B0 (BEGIN)
                                           ; SOURCE LINE # 1445
;---- Variable 'nData' assigned to Register 'R5' ----
;---- Variable 'nPort' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 1446
                                           ; SOURCE LINE # 1447
0000 7404              MOV     A,#04H
0002 8D82              MOV     DPL,R5
0004 F583              MOV     DPH,A
0006 E0                MOVX    A,@DPTR
0007 FD                MOV     R5,A
0008 020000      E     LJMP    _Data2PortDirect
             ; FUNCTION _Cmd_B0 (END)

             ; FUNCTION _Cmd_B1 (BEGIN)
                                           ; SOURCE LINE # 1450
;---- Variable 'nData' assigned to Register 'R5' ----
;---- Variable 'nPort' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 1451
                                           ; SOURCE LINE # 1452
0000 ED                MOV     A,R5
0001 244F              ADD     A,#04FH
0003 7008              JNZ     ?C0345
                                           ; SOURCE LINE # 1453
                                           ; SOURCE LINE # 1454
0005         ?C0343:
                                           ; SOURCE LINE # 1455
0005 900000      E     MOV     DPTR,#P80CMOSSts
0008 E0                MOVX    A,@DPTR
0009 FD                MOV     R5,A
000A 120000      E     LCALL   _Data2PortDirect
                                           ; SOURCE LINE # 1456
                                           ; SOURCE LINE # 1457
                                           ; SOURCE LINE # 1458
                                           ; SOURCE LINE # 1459
                                           ; SOURCE LINE # 1461
000D         ?C0345:
000D 22                RET     
             ; FUNCTION _Cmd_B1 (END)

             ; FUNCTION _Cmd_B2 (BEGIN)
                                           ; SOURCE LINE # 1462
0000 900000      R     MOV     DPTR,#nPort
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
;---- Variable 'nData' assigned to Register 'R5' ----
                                           ; SOURCE LINE # 1463
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 94  

                                           ; SOURCE LINE # 1464
0005 ED                MOV     A,R5
0006 244E              ADD     A,#04EH
0008 704C              JNZ     ?C0349
                                           ; SOURCE LINE # 1465
                                           ; SOURCE LINE # 1466
000A         ?C0347:
                                           ; SOURCE LINE # 1467
000A 900000      R     MOV     DPTR,#nPort
000D E0                MOVX    A,@DPTR
000E FF                MOV     R7,A
000F 900000      E     MOV     DPTR,#P80Index
0012 E0                MOVX    A,@DPTR
0013 FD                MOV     R5,A
0014 120000      E     LCALL   _Data2Port
                                           ; SOURCE LINE # 1468
0017 900000      R     MOV     DPTR,#nPort
001A E0                MOVX    A,@DPTR
001B 900000      E     MOV     DPTR,#P80CMOS
                                           ; SOURCE LINE # 1469
001E 120000      R     LCALL   L?0528
0021 900000      E     MOV     DPTR,#P80CMOS+01H
                                           ; SOURCE LINE # 1470
0024 120000      R     LCALL   L?0573
0027 900000      E     MOV     DPTR,#P80CMOS+02H
                                           ; SOURCE LINE # 1471
002A 120000      R     LCALL   L?0528
002D 900000      E     MOV     DPTR,#P80CMOS+03H
                                           ; SOURCE LINE # 1472
0030 120000      R     LCALL   L?0573
0033 900000      E     MOV     DPTR,#P80CMOS+04H
                                           ; SOURCE LINE # 1473
0036 120000      R     LCALL   L?0544
0039 900000      E     MOV     DPTR,#P80CMOS+05H
                                           ; SOURCE LINE # 1474
003C 120000      R     LCALL   L?0544
003F FF                MOV     R7,A
0040 900000      E     MOV     DPTR,#P80CMOS+06H
0043 E0                MOVX    A,@DPTR
0044 FD                MOV     R5,A
0045 120000      E     LCALL   _Data2PortDirect
                                           ; SOURCE LINE # 1476
0048 900000      E     MOV     DPTR,#P80CMOSSts
004B E0                MOVX    A,@DPTR
004C 54FE              ANL     A,#0FEH
004E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1477
004F 900000      E     MOV     DPTR,#ACPI_HOTKEY
0052 E0                MOVX    A,@DPTR
0053 54BF              ANL     A,#0BFH
0055 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1478
                                           ; SOURCE LINE # 1479
                                           ; SOURCE LINE # 1480
                                           ; SOURCE LINE # 1481
                                           ; SOURCE LINE # 1483
0056         ?C0349:
0056 22                RET     
0057         L?0528:
0057 FF                MOV     R7,A
0058 E0                MOVX    A,@DPTR
0059 FD                MOV     R5,A
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 95  

005A 120000      E     LCALL   _MultiB2Port
005D 900000      R     MOV     DPTR,#nPort
0060 E0                MOVX    A,@DPTR
0061 FF                MOV     R7,A
0062 22                RET     
0063         L?0544:
0063 FF                MOV     R7,A
0064 E0                MOVX    A,@DPTR
0065 FD                MOV     R5,A
0066 120000      E     LCALL   _MultiB2Port
0069 900000      R     MOV     DPTR,#nPort
006C E0                MOVX    A,@DPTR
006D 22                RET     
006E         L?0573:
006E E0                MOVX    A,@DPTR
006F FD                MOV     R5,A
0070 120000      E     LCALL   _MultiB2Port
0073 900000      R     MOV     DPTR,#nPort
0076 E0                MOVX    A,@DPTR
0077 22                RET     
             ; FUNCTION _Cmd_B2 (END)

             ; FUNCTION _Cmd_B3 (BEGIN)
                                           ; SOURCE LINE # 1485
0000 900000      R     MOV     DPTR,#nPort
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
;---- Variable 'nDataH' assigned to Register 'R5' ----
;---- Variable 'nDataL' assigned to Register 'R3' ----
                                           ; SOURCE LINE # 1486
                                           ; SOURCE LINE # 1487
0005 E4                CLR     A
0006 900000      E     MOV     DPTR,#cSPIEEPROM
0009 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1489
000A ED                MOV     A,R5
000B 540F              ANL     A,#0FH
000D FD                MOV     R5,A
                                           ; SOURCE LINE # 1490
000E FE                MOV     R6,A
000F 7C00              MOV     R4,#00H
0011 E4                CLR     A
0012 2B                ADD     A,R3
0013 F500        E     MOV     ITempW01+01H,A
0015 EC                MOV     A,R4
0016 3E                ADDC    A,R6
0017 F500        E     MOV     ITempW01,A
                                           ; SOURCE LINE # 1491
0019 7FB3              MOV     R7,#0B3H
001B 120000      E     LCALL   _RamDebug
                                           ; SOURCE LINE # 1492
001E AE00        E     MOV     R6,ITempW01
0020 AF00        E     MOV     R7,ITempW01+01H
0022 8F82              MOV     DPL,R7
0024 8E83              MOV     DPH,R6
0026 E0                MOVX    A,@DPTR
0027 FF                MOV     R7,A
0028 120000      E     LCALL   _RamDebug
                                           ; SOURCE LINE # 1493
002B 900000      R     MOV     DPTR,#nPort
002E E0                MOVX    A,@DPTR
002F FF                MOV     R7,A
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 96  

0030 AC00        E     MOV     R4,ITempW01
0032 AD00        E     MOV     R5,ITempW01+01H
0034 8D82              MOV     DPL,R5
0036 8C83              MOV     DPH,R4
0038 E0                MOVX    A,@DPTR
0039 FD                MOV     R5,A
003A 020000      E     LJMP    _Data2PortDirect
             ; FUNCTION _Cmd_B3 (END)

             ; FUNCTION Update_EEPROM (BEGIN)
                                           ; SOURCE LINE # 1496
                                           ; SOURCE LINE # 1497
                                           ; SOURCE LINE # 1499
0000 7C00        E     MOV     R4,#HIGH _FSCEHighLevel
0002 7D00        E     MOV     R5,#LOW _FSCEHighLevel
0004 7F01              MOV     R7,#01H
0006 120000      E     LCALL   _CacheDma
                                           ; SOURCE LINE # 1501
0009 120000      E     LCALL   DisableAllInterrupt
                                           ; SOURCE LINE # 1502
000C 900000      E     MOV     DPTR,#eEEPROMBank
000F E0                MOVX    A,@DPTR
0010 C3                CLR     C
0011 9404              SUBB    A,#04H
0013 5005              JNC     ?C0351
                                           ; SOURCE LINE # 1503
                                           ; SOURCE LINE # 1504
0015 7DA8              MOV     R5,#0A8H
0017 120000      R     LCALL   L?0553
                                           ; SOURCE LINE # 1505
001A         ?C0351:
                                           ; SOURCE LINE # 1506
001A 900000      E     MOV     DPTR,#eEEPROMBank
001D E0                MOVX    A,@DPTR
001E D3                SETB    C
001F 9403              SUBB    A,#03H
0021 400A              JC      ?C0352
0023 E0                MOVX    A,@DPTR
0024 9408              SUBB    A,#08H
0026 5005              JNC     ?C0352
                                           ; SOURCE LINE # 1507
                                           ; SOURCE LINE # 1508
0028 7DAC              MOV     R5,#0ACH
002A 120000      R     LCALL   L?0553
                                           ; SOURCE LINE # 1509
002D         ?C0352:
                                           ; SOURCE LINE # 1510
002D 900000      E     MOV     DPTR,#eEEPROMBank
0030 E0                MOVX    A,@DPTR
0031 44A8              ORL     A,#0A8H
0033 900000      E     MOV     DPTR,#eEEPROMAddrsss
0036 120000      R     LCALL   L?0520
0039 120000      E     LCALL   _Write_Eflash_1Byte
                                           ; SOURCE LINE # 1512
003C 900000      E     MOV     DPTR,#eEEPROMBank
003F E0                MOVX    A,@DPTR
0040 C3                CLR     C
0041 9404              SUBB    A,#04H
0043 5057              JNC     ?C0353
                                           ; SOURCE LINE # 1513
                                           ; SOURCE LINE # 1514
0045 E4                CLR     A
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 97  

0046 900000      E     MOV     DPTR,#eFlashA1
0049 F0                MOVX    @DPTR,A
004A         ?C0354:
                                           ; SOURCE LINE # 1515
                                           ; SOURCE LINE # 1516
004A E4                CLR     A
004B 900000      E     MOV     DPTR,#e256ByteCnt
004E F0                MOVX    @DPTR,A
004F         ?C0359:
                                           ; SOURCE LINE # 1518
                                           ; SOURCE LINE # 1519
004F 120000      R     LCALL   L?0524
0052 120000      E     LCALL   _Read_Eflash_Byte
                                           ; SOURCE LINE # 1520
0055 120000      R     LCALL   L?0568
0058 F4                CPL     A
0059 7017              JNZ     ?C0360
                                           ; SOURCE LINE # 1521
                                           ; SOURCE LINE # 1522
005B 900000      E     MOV     DPTR,#eFlashA1
005E E0                MOVX    A,@DPTR
005F 44A0              ORL     A,#0A0H
0061 120000      R     LCALL   L?0526
0064 120000      E     LCALL   _Read_Eflash_Byte
                                           ; SOURCE LINE # 1523
0067 120000      R     LCALL   L?0531
006A 44A8              ORL     A,#0A8H
006C 120000      R     LCALL   L?0519
006F 120000      E     LCALL   _Write_Eflash_1Byte
                                           ; SOURCE LINE # 1524
0072         ?C0360:
                                           ; SOURCE LINE # 1525
                                           ; SOURCE LINE # 1526
0072 120000      R     LCALL   L?0541
0075 70D8              JNZ     ?C0359
                                           ; SOURCE LINE # 1527
0077 120000      R     LCALL   L?0529
007A 40CE              JC      ?C0354
007C         ?C0355:
                                           ; SOURCE LINE # 1529
007C 7DA0              MOV     R5,#0A0H
                                           ; SOURCE LINE # 1530
007E 120000      R     LCALL   L?0560
0081         ?C0361:
                                           ; SOURCE LINE # 1531
                                           ; SOURCE LINE # 1532
0081 E4                CLR     A
0082 900000      E     MOV     DPTR,#e256ByteCnt
0085 F0                MOVX    @DPTR,A
0086         ?C0366:
                                           ; SOURCE LINE # 1534
                                           ; SOURCE LINE # 1535
0086 120000      R     LCALL   L?0524
0089 120000      E     LCALL   _Read_Eflash_Byte
                                           ; SOURCE LINE # 1536
008C 120000      R     LCALL   L?0518
008F 120000      E     LCALL   _Write_Eflash_1Byte
                                           ; SOURCE LINE # 1537
                                           ; SOURCE LINE # 1538
0092 120000      R     LCALL   L?0541
0095 70EF              JNZ     ?C0366
                                           ; SOURCE LINE # 1539
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 98  

0097 120000      R     LCALL   L?0529
009A 40E5              JC      ?C0361
                                           ; SOURCE LINE # 1540
009C         ?C0353:
                                           ; SOURCE LINE # 1541
009C 900000      E     MOV     DPTR,#eEEPROMBank
009F E0                MOVX    A,@DPTR
00A0 D3                SETB    C
00A1 9403              SUBB    A,#03H
00A3 405B              JC      ?C0367
00A5 E0                MOVX    A,@DPTR
00A6 9408              SUBB    A,#08H
00A8 5056              JNC     ?C0367
                                           ; SOURCE LINE # 1542
                                           ; SOURCE LINE # 1543
00AA E4                CLR     A
00AB 900000      E     MOV     DPTR,#eFlashA1
00AE F0                MOVX    @DPTR,A
00AF         ?C0368:
                                           ; SOURCE LINE # 1544
                                           ; SOURCE LINE # 1545
00AF E4                CLR     A
00B0 900000      E     MOV     DPTR,#e256ByteCnt
00B3 F0                MOVX    @DPTR,A
00B4         ?C0373:
                                           ; SOURCE LINE # 1547
                                           ; SOURCE LINE # 1548
00B4 900000      E     MOV     DPTR,#eFlashA1
00B7 E0                MOVX    A,@DPTR
00B8 44A4              ORL     A,#0A4H
00BA 120000      R     LCALL   L?0526
00BD 120000      E     LCALL   _Read_Eflash_Byte
                                           ; SOURCE LINE # 1549
00C0 120000      R     LCALL   L?0531
00C3 44AC              ORL     A,#0ACH
00C5 120000      R     LCALL   L?0519
00C8 120000      E     LCALL   _Write_Eflash_1Byte
                                           ; SOURCE LINE # 1550
                                           ; SOURCE LINE # 1551
00CB 120000      R     LCALL   L?0542
00CE 70E4              JNZ     ?C0373
                                           ; SOURCE LINE # 1552
00D0 120000      R     LCALL   L?0530
00D3 40DA              JC      ?C0368
00D5         ?C0369:
                                           ; SOURCE LINE # 1554
00D5 7DA4              MOV     R5,#0A4H
                                           ; SOURCE LINE # 1555
00D7 120000      R     LCALL   L?0560
00DA         ?C0374:
                                           ; SOURCE LINE # 1556
                                           ; SOURCE LINE # 1557
00DA E4                CLR     A
00DB 900000      E     MOV     DPTR,#e256ByteCnt
00DE F0                MOVX    @DPTR,A
00DF         ?C0379:
                                           ; SOURCE LINE # 1559
                                           ; SOURCE LINE # 1560
00DF 900000      E     MOV     DPTR,#eFlashA1
00E2 E0                MOVX    A,@DPTR
00E3 44AC              ORL     A,#0ACH
00E5 120000      R     LCALL   L?0526
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 99  

00E8 120000      E     LCALL   _Read_Eflash_Byte
                                           ; SOURCE LINE # 1561
00EB 120000      R     LCALL   L?0532
00EE 44A4              ORL     A,#0A4H
00F0 120000      R     LCALL   L?0519
00F3 120000      E     LCALL   _Write_Eflash_1Byte
                                           ; SOURCE LINE # 1562
                                           ; SOURCE LINE # 1563
00F6 120000      R     LCALL   L?0542
00F9 70E4              JNZ     ?C0379
                                           ; SOURCE LINE # 1564
00FB 120000      R     LCALL   L?0530
00FE 40DA              JC      ?C0374
                                           ; SOURCE LINE # 1565
0100         ?C0367:
                                           ; SOURCE LINE # 1566
0100 020000      E     LJMP    EnableAllInterrupt
                                           ; SOURCE LINE # 1567
0103         L?0553:
0103 E4                CLR     A
0104 FB                MOV     R3,A
0105 7F01              MOV     R7,#01H
0107 120000      E     LCALL   _Erase_Eflash_1K
010A 22                RET     
010B         L?0560:
010B E4                CLR     A
010C FB                MOV     R3,A
010D 7F01              MOV     R7,#01H
010F 120000      E     LCALL   _Erase_Eflash_1K
0112 E4                CLR     A
0113 900000      E     MOV     DPTR,#eFlashA1
0116 F0                MOVX    @DPTR,A
0117 22                RET     
             ; FUNCTION Update_EEPROM (END)

             ; FUNCTION Update_EEPROMMark (BEGIN)
                                           ; SOURCE LINE # 1570
                                           ; SOURCE LINE # 1571
                                           ; SOURCE LINE # 1572
0000 7C00        E     MOV     R4,#HIGH _FSCEHighLevel
0002 7D00        E     MOV     R5,#LOW _FSCEHighLevel
0004 7F01              MOV     R7,#01H
0006 120000      E     LCALL   _CacheDma
                                           ; SOURCE LINE # 1573
0009 120000      E     LCALL   DisableAllInterrupt
                                           ; SOURCE LINE # 1575
000C 7BFF              MOV     R3,#0FFH
000E 7DA3              MOV     R5,#0A3H
0010 7F01              MOV     R7,#01H
0012 120000      E     LCALL   _Read_Eflash_Byte
0015 EF                MOV     A,R7
0016 F4                CPL     A
0017 702A              JNZ     ?C0381
                                           ; SOURCE LINE # 1576
                                           ; SOURCE LINE # 1577
0019 FB                MOV     R3,A
001A 7DA8              MOV     R5,#0A8H
001C 7F01              MOV     R7,#01H
001E 120000      E     LCALL   _Erase_Eflash_1K
                                           ; SOURCE LINE # 1578
0021 7DA0              MOV     R5,#0A0H
0023 120000      R     LCALL   L?0554
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 100 

                                           ; SOURCE LINE # 1580
0026 7DAC              MOV     R5,#0ACH
0028 120000      R     LCALL   L?0554
                                           ; SOURCE LINE # 1581
002B E4                CLR     A
002C FB                MOV     R3,A
002D 7DA4              MOV     R5,#0A4H
002F 7F01              MOV     R7,#01H
0031 120000      E     LCALL   _Erase_Eflash_1K
                                           ; SOURCE LINE # 1583
0034 900000      E     MOV     DPTR,#?_Write_Eflash_1Byte?BYTE+03H
0037 74AA              MOV     A,#0AAH
0039 F0                MOVX    @DPTR,A
003A 7BFF              MOV     R3,#0FFH
003C 7DA3              MOV     R5,#0A3H
003E 7F01              MOV     R7,#01H
0040 120000      E     LCALL   _Write_Eflash_1Byte
                                           ; SOURCE LINE # 1584
0043         ?C0381:
                                           ; SOURCE LINE # 1586
0043 900000      E     MOV     DPTR,#eEEPROMBank
0046 E0                MOVX    A,@DPTR
0047 44A0              ORL     A,#0A0H
0049 FD                MOV     R5,A
004A 900000      E     MOV     DPTR,#eEEPROMAddrsss
004D 120000      R     LCALL   L?0521
0050 120000      E     LCALL   _Write_Eflash_1Byte
                                           ; SOURCE LINE # 1587
0053 900000      E     MOV     DPTR,#eEEPROMBank
0056 E0                MOVX    A,@DPTR
0057 44A8              ORL     A,#0A8H
0059 FD                MOV     R5,A
005A 900000      E     MOV     DPTR,#eEEPROMAddrsss
005D E0                MOVX    A,@DPTR
005E FB                MOV     R3,A
005F E4                CLR     A
0060 900000      E     MOV     DPTR,#?_Write_Eflash_1Byte?BYTE+03H
0063 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1589
0064 120000      R     LCALL   L?0557
0067 7029              JNZ     ?C0382
0069 900000      E     MOV     DPTR,#eEEPROMAddrsss
006C E0                MOVX    A,@DPTR
006D 64EB              XRL     A,#0EBH
006F 6021              JZ      ?C0382
                                           ; SOURCE LINE # 1590
                                           ; SOURCE LINE # 1591
0071 900000      E     MOV     DPTR,#eEEPROMBank
0074 E0                MOVX    A,@DPTR
0075 44A0              ORL     A,#0A0H
0077 FD                MOV     R5,A
0078 900000      E     MOV     DPTR,#?_Write_Eflash_1Byte?BYTE+03H
007B 74AA              MOV     A,#0AAH
007D F0                MOVX    @DPTR,A
007E 7BEB              MOV     R3,#0EBH
                                           ; SOURCE LINE # 1592
0080 120000      R     LCALL   L?0557
0083 44A8              ORL     A,#0A8H
0085 FD                MOV     R5,A
0086 E4                CLR     A
0087 900000      E     MOV     DPTR,#?_Write_Eflash_1Byte?BYTE+03H
008A F0                MOVX    @DPTR,A
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 101 

008B 7BEB              MOV     R3,#0EBH
008D 7F01              MOV     R7,#01H
008F 120000      E     LCALL   _Write_Eflash_1Byte
                                           ; SOURCE LINE # 1593
0092         ?C0382:
                                           ; SOURCE LINE # 1595
0092 900000      E     MOV     DPTR,#eUpdateEEPROMCnt
0095 7401              MOV     A,#01H
0097 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1596
0098 900000      E     MOV     DPTR,#cSPIEEPROM
009B E0                MOVX    A,@DPTR
009C 4404              ORL     A,#04H
009E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1597
009F 120000      R     LCALL   Update_EEPROMB07
                                           ; SOURCE LINE # 1598
00A2 020000      E     LJMP    EnableAllInterrupt
                                           ; SOURCE LINE # 1599
00A5         L?0554:
00A5 E4                CLR     A
00A6 FB                MOV     R3,A
00A7 7F01              MOV     R7,#01H
00A9 120000      E     LCALL   _Erase_Eflash_1K
00AC 22                RET     
00AD         L?0557:
00AD 7F01              MOV     R7,#01H
00AF 120000      E     LCALL   _Write_Eflash_1Byte
00B2 900000      E     MOV     DPTR,#eEEPROMBank
00B5 E0                MOVX    A,@DPTR
00B6 22                RET     
             ; FUNCTION Update_EEPROMMark (END)

             ; FUNCTION Erase_EEPROMAll (BEGIN)
                                           ; SOURCE LINE # 1601
                                           ; SOURCE LINE # 1602
                                           ; SOURCE LINE # 1603
0000 7C00        E     MOV     R4,#HIGH _FSCEHighLevel
0002 7D00        E     MOV     R5,#LOW _FSCEHighLevel
0004 7F01              MOV     R7,#01H
0006 120000      E     LCALL   _CacheDma
                                           ; SOURCE LINE # 1605
0009 120000      E     LCALL   DisableAllInterrupt
                                           ; SOURCE LINE # 1607
000C 7DA8              MOV     R5,#0A8H
                                           ; SOURCE LINE # 1608
000E 120000      R     LCALL   L?0540
0011 7DA0              MOV     R5,#0A0H
0013 7F01              MOV     R7,#01H
0015 120000      E     LCALL   _Erase_Eflash_1K
                                           ; SOURCE LINE # 1610
0018 7DAC              MOV     R5,#0ACH
                                           ; SOURCE LINE # 1611
001A 120000      R     LCALL   L?0540
001D 7DA4              MOV     R5,#0A4H
001F 7F01              MOV     R7,#01H
0021 120000      E     LCALL   _Erase_Eflash_1K
                                           ; SOURCE LINE # 1613
0024 E4                CLR     A
0025 FB                MOV     R3,A
0026 7DB0              MOV     R5,#0B0H
0028 7F01              MOV     R7,#01H
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 102 

002A 120000      E     LCALL   _Erase_Eflash_1K
                                           ; SOURCE LINE # 1614
002D E4                CLR     A
002E FB                MOV     R3,A
002F 7DB4              MOV     R5,#0B4H
0031 7F01              MOV     R7,#01H
0033 120000      E     LCALL   _Erase_Eflash_1K
                                           ; SOURCE LINE # 1615
0036 020000      E     LJMP    EnableAllInterrupt
                                           ; SOURCE LINE # 1616
0039         L?0540:
0039 E4                CLR     A
003A FB                MOV     R3,A
003B 7F01              MOV     R7,#01H
003D 120000      E     LCALL   _Erase_Eflash_1K
0040 E4                CLR     A
0041 FB                MOV     R3,A
0042 22                RET     
             ; FUNCTION Erase_EEPROMAll (END)

             ; FUNCTION Update_EEPROMB07 (BEGIN)
                                           ; SOURCE LINE # 1618
                                           ; SOURCE LINE # 1619
                                           ; SOURCE LINE # 1620
0000 900000      E     MOV     DPTR,#SysPowState
0003 E0                MOVX    A,@DPTR
0004 7004              JNZ     ?C0387
0006 7F01              MOV     R7,#01H
0008 8002              SJMP    ?C0388
000A         ?C0387:
000A 7F00              MOV     R7,#00H
000C         ?C0388:
000C EF                MOV     A,R7
000D 6410              XRL     A,#010H
000F 7003              JNZ     $ + 5H
0011 020000      R     LJMP    ?C0389
0014 900000      E     MOV     DPTR,#WinFlashMark
0017 E0                MOVX    A,@DPTR
0018 B4FC0B            CJNE    A,#0FCH,?C0385
001B 900000      E     MOV     DPTR,#WinFlashMark1
001E E0                MOVX    A,@DPTR
001F 6455              XRL     A,#055H
0021 7003              JNZ     $ + 5H
0023 020000      R     LJMP    ?C0389
0026         ?C0385:
                                           ; SOURCE LINE # 1623
0026 900000      E     MOV     DPTR,#eUpdateEEPROMCnt
0029 E0                MOVX    A,@DPTR
002A 7003              JNZ     $ + 5H
002C 020000      R     LJMP    ?C0389
002F         ?C0390:
                                           ; SOURCE LINE # 1626
002F 900000      E     MOV     DPTR,#eUpdateEEPROMCnt
0032 E0                MOVX    A,@DPTR
0033 14                DEC     A
0034 F0                MOVX    @DPTR,A
0035         ?C0391:
                                           ; SOURCE LINE # 1628
0035 900000      E     MOV     DPTR,#eUpdateEEPROMCnt
0038 E0                MOVX    A,@DPTR
0039 6003              JZ      $ + 5H
003B 020000      R     LJMP    ?C0389
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 103 

003E         ?C0392:
                                           ; SOURCE LINE # 1631
003E 7C00        E     MOV     R4,#HIGH _FSCEHighLevel
0040 7D00        E     MOV     R5,#LOW _FSCEHighLevel
0042 7F01              MOV     R7,#01H
0044 120000      E     LCALL   _CacheDma
                                           ; SOURCE LINE # 1633
0047 120000      E     LCALL   DisableAllInterrupt
                                           ; SOURCE LINE # 1636
004A 120000      E     LCALL   ResetInternalWDT
                                           ; SOURCE LINE # 1640
004D E4                CLR     A
004E 900000      E     MOV     DPTR,#eFlashA1
0051 F0                MOVX    @DPTR,A
0052         ?C0393:
                                           ; SOURCE LINE # 1641
                                           ; SOURCE LINE # 1642
0052 E4                CLR     A
0053 900000      E     MOV     DPTR,#e256ByteCnt
0056 F0                MOVX    @DPTR,A
0057         ?C0398:
                                           ; SOURCE LINE # 1644
                                           ; SOURCE LINE # 1645
0057 120000      R     LCALL   L?0525
005A 120000      E     LCALL   _Read_Eflash_Byte
                                           ; SOURCE LINE # 1646
005D 120000      R     LCALL   L?0568
0060 6012              JZ      ?C0399
                                           ; SOURCE LINE # 1647
                                           ; SOURCE LINE # 1648
0062 900000      E     MOV     DPTR,#eFlashA1
0065 E0                MOVX    A,@DPTR
0066 44B0              ORL     A,#0B0H
0068 120000      R     LCALL   L?0526
006B 120000      E     LCALL   _Read_Eflash_Byte
                                           ; SOURCE LINE # 1649
006E 120000      R     LCALL   L?0518
0071 120000      E     LCALL   _Write_Eflash_1Byte
                                           ; SOURCE LINE # 1650
0074         ?C0399:
                                           ; SOURCE LINE # 1652
0074 900000      E     MOV     DPTR,#eFlashA1
0077 E0                MOVX    A,@DPTR
0078 44AC              ORL     A,#0ACH
007A 120000      R     LCALL   L?0526
007D 120000      E     LCALL   _Read_Eflash_Byte
                                           ; SOURCE LINE # 1653
0080 120000      R     LCALL   L?0569
0083 6017              JZ      ?C0400
                                           ; SOURCE LINE # 1654
                                           ; SOURCE LINE # 1655
0085 900000      E     MOV     DPTR,#eFlashA1
0088 E0                MOVX    A,@DPTR
0089 44B4              ORL     A,#0B4H
008B 120000      R     LCALL   L?0526
008E 120000      E     LCALL   _Read_Eflash_Byte
                                           ; SOURCE LINE # 1656
0091 120000      R     LCALL   L?0532
0094 44A4              ORL     A,#0A4H
0096 120000      R     LCALL   L?0519
0099 120000      E     LCALL   _Write_Eflash_1Byte
                                           ; SOURCE LINE # 1657
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 104 

009C         ?C0400:
                                           ; SOURCE LINE # 1658
                                           ; SOURCE LINE # 1659
009C 120000      R     LCALL   L?0542
009F 70B6              JNZ     ?C0398
                                           ; SOURCE LINE # 1660
00A1 120000      R     LCALL   L?0530
00A4 40AC              JC      ?C0393
00A6         ?C0394:
                                           ; SOURCE LINE # 1662
00A6 7DB0              MOV     R5,#0B0H
00A8 120000      R     LCALL   L?0562
                                           ; SOURCE LINE # 1663
00AB 7DB4              MOV     R5,#0B4H
00AD 120000      R     LCALL   L?0562
                                           ; SOURCE LINE # 1665
00B0 E4                CLR     A
00B1 900000      E     MOV     DPTR,#eFlashA1
00B4 F0                MOVX    @DPTR,A
00B5         ?C0401:
                                           ; SOURCE LINE # 1666
                                           ; SOURCE LINE # 1667
00B5 E4                CLR     A
00B6 900000      E     MOV     DPTR,#e256ByteCnt
00B9 F0                MOVX    @DPTR,A
00BA         ?C0406:
                                           ; SOURCE LINE # 1669
                                           ; SOURCE LINE # 1670
00BA 900000      E     MOV     DPTR,#eFlashA1
00BD E0                MOVX    A,@DPTR
00BE 44A0              ORL     A,#0A0H
00C0 120000      R     LCALL   L?0526
00C3 120000      E     LCALL   _Read_Eflash_Byte
                                           ; SOURCE LINE # 1671
00C6 120000      R     LCALL   L?0532
00C9 44B0              ORL     A,#0B0H
00CB 120000      R     LCALL   L?0519
00CE 120000      E     LCALL   _Write_Eflash_1Byte
                                           ; SOURCE LINE # 1673
00D1 900000      E     MOV     DPTR,#eFlashA1
00D4 E0                MOVX    A,@DPTR
00D5 44A4              ORL     A,#0A4H
00D7 120000      R     LCALL   L?0526
00DA 120000      E     LCALL   _Read_Eflash_Byte
                                           ; SOURCE LINE # 1674
00DD 120000      R     LCALL   L?0532
00E0 44B4              ORL     A,#0B4H
00E2 120000      R     LCALL   L?0519
00E5 120000      E     LCALL   _Write_Eflash_1Byte
                                           ; SOURCE LINE # 1676
                                           ; SOURCE LINE # 1678
00E8 120000      R     LCALL   L?0542
00EB 70CD              JNZ     ?C0406
                                           ; SOURCE LINE # 1679
00ED 120000      R     LCALL   L?0530
00F0 40C3              JC      ?C0401
00F2         ?C0402:
                                           ; SOURCE LINE # 1682
00F2 E4                CLR     A
00F3 FB                MOV     R3,A
00F4 7DA0              MOV     R5,#0A0H
00F6 7F01              MOV     R7,#01H
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 105 

00F8 120000      E     LCALL   _Erase_Eflash_1K
                                           ; SOURCE LINE # 1683
00FB 900000      E     MOV     DPTR,#cSPIEEPROM
00FE E0                MOVX    A,@DPTR
00FF 54FB              ANL     A,#0FBH
0101 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1685
0102 120000      E     LCALL   EnableAllInterrupt
                                           ; SOURCE LINE # 1686
0105         ?C0389:
0105 22                RET     
0106         L?0562:
0106 E4                CLR     A
0107 FB                MOV     R3,A
0108 7F01              MOV     R7,#01H
010A 120000      E     LCALL   _Erase_Eflash_1K
010D 22                RET     
             ; FUNCTION Update_EEPROMB07 (END)

             ; FUNCTION Chk_pDevStus (BEGIN)
                                           ; SOURCE LINE # 1689
                                           ; SOURCE LINE # 1690
                                           ; SOURCE LINE # 1691
0000 900000      E     MOV     DPTR,#LENOVOPMFW_Temp
0003 E0                MOVX    A,@DPTR
0004 20E448            JB      ACC.4,?C0410
                                           ; SOURCE LINE # 1692
                                           ; SOURCE LINE # 1693
0007 120000      R     LCALL   L?0570
000A 7043              JNZ     ?C0410
000C 900000      E     MOV     DPTR,#eUpdateEEPROMCnt
000F E0                MOVX    A,@DPTR
0010 703D              JNZ     ?C0410
0012 120000      R     LCALL   L?0558
0015 6038              JZ      ?C0410
                                           ; SOURCE LINE # 1694
                                           ; SOURCE LINE # 1695
0017 7BE1              MOV     R3,#0E1H
0019 7DB7              MOV     R5,#0B7H
001B 7F01              MOV     R7,#01H
001D 120000      E     LCALL   _Read_Eflash_Byte
0020 900000      E     MOV     DPTR,#eEEPROMData
0023 EF                MOV     A,R7
0024 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1696
0025 900000      E     MOV     DPTR,#pDevStus
0028 E0                MOVX    A,@DPTR
0029 FF                MOV     R7,A
002A 900000      E     MOV     DPTR,#eEEPROMData
002D E0                MOVX    A,@DPTR
002E 6F                XRL     A,R7
002F 601E              JZ      ?C0410
                                           ; SOURCE LINE # 1697
                                           ; SOURCE LINE # 1698
0031 7FA1              MOV     R7,#0A1H
0033 120000      E     LCALL   _RamDebug
                                           ; SOURCE LINE # 1699
0036 900000      E     MOV     DPTR,#pDevStus
0039 E0                MOVX    A,@DPTR
003A FF                MOV     R7,A
003B 120000      E     LCALL   _RamDebug
                                           ; SOURCE LINE # 1701
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 106 

                                           ; SOURCE LINE # 1702
                                           ; SOURCE LINE # 1703
003E 120000      R     LCALL   L?0537
0041 74E1              MOV     A,#0E1H
0043 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1704
0044 900000      E     MOV     DPTR,#pDevStus
0047 E0                MOVX    A,@DPTR
0048 900000      E     MOV     DPTR,#eEEPROMData
004B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1706
004C 120000      R     LCALL   Update_EEPROMMark
                                           ; SOURCE LINE # 1707
                                           ; SOURCE LINE # 1708
                                           ; SOURCE LINE # 1709
                                           ; SOURCE LINE # 1710
004F         ?C0410:
004F 22                RET     
             ; FUNCTION Chk_pDevStus (END)

             ; FUNCTION Chk_KB_Backlight (BEGIN)
                                           ; SOURCE LINE # 1712
                                           ; SOURCE LINE # 1713
                                           ; SOURCE LINE # 1714
0000 900000      E     MOV     DPTR,#LENOVOPMFW_Temp
0003 E0                MOVX    A,@DPTR
0004 20E45B            JB      ACC.4,?C0416
                                           ; SOURCE LINE # 1715
                                           ; SOURCE LINE # 1716
0007 120000      R     LCALL   L?0570
000A 7056              JNZ     ?C0416
000C 900000      E     MOV     DPTR,#eUpdateEEPROMCnt
000F E0                MOVX    A,@DPTR
0010 7050              JNZ     ?C0416
0012 120000      R     LCALL   L?0558
0015 604B              JZ      ?C0416
0017 900000      E     MOV     DPTR,#LED_KB_PWM_Count
001A E0                MOVX    A,@DPTR
001B 20E744            JB      ACC.7,?C0416
                                           ; SOURCE LINE # 1717
                                           ; SOURCE LINE # 1718
001E 900000      E     MOV     DPTR,#UpdateLEDBL_delay
0021 E0                MOVX    A,@DPTR
0022 603E              JZ      ?C0416
                                           ; SOURCE LINE # 1719
                                           ; SOURCE LINE # 1720
0024 E0                MOVX    A,@DPTR
0025 14                DEC     A
0026 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1721
0027 E0                MOVX    A,@DPTR
0028 7038              JNZ     ?C0416
                                           ; SOURCE LINE # 1722
                                           ; SOURCE LINE # 1723
002A 7BE2              MOV     R3,#0E2H
002C 7DB7              MOV     R5,#0B7H
002E 7F01              MOV     R7,#01H
0030 120000      E     LCALL   _Read_Eflash_Byte
0033 900000      E     MOV     DPTR,#eEEPROMData
0036 EF                MOV     A,R7
0037 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1724
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 107 

0038 900000      E     MOV     DPTR,#LED_KB_PWM_Step
003B E0                MOVX    A,@DPTR
003C FF                MOV     R7,A
003D 900000      E     MOV     DPTR,#eEEPROMData
0040 E0                MOVX    A,@DPTR
0041 6F                XRL     A,R7
0042 601E              JZ      ?C0416
                                           ; SOURCE LINE # 1725
                                           ; SOURCE LINE # 1726
0044 7FBB              MOV     R7,#0BBH
0046 120000      E     LCALL   _RamDebug
                                           ; SOURCE LINE # 1727
0049 900000      E     MOV     DPTR,#LED_KB_PWM_Step
004C E0                MOVX    A,@DPTR
004D FF                MOV     R7,A
004E 120000      E     LCALL   _RamDebug
                                           ; SOURCE LINE # 1729
                                           ; SOURCE LINE # 1730
                                           ; SOURCE LINE # 1731
0051 120000      R     LCALL   L?0537
0054 74E2              MOV     A,#0E2H
0056 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1732
0057 900000      E     MOV     DPTR,#LED_KB_PWM_Step
005A E0                MOVX    A,@DPTR
005B 900000      E     MOV     DPTR,#eEEPROMData
005E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1733
005F 120000      R     LCALL   Update_EEPROMMark
                                           ; SOURCE LINE # 1734
                                           ; SOURCE LINE # 1735
                                           ; SOURCE LINE # 1736
                                           ; SOURCE LINE # 1737
                                           ; SOURCE LINE # 1738
                                           ; SOURCE LINE # 1739
0062         ?C0416:
0062 22                RET     
             ; FUNCTION Chk_KB_Backlight (END)

             ; FUNCTION Chk_UEFIStatus (BEGIN)
                                           ; SOURCE LINE # 1741
                                           ; SOURCE LINE # 1742
                                           ; SOURCE LINE # 1743
0000 900000      E     MOV     DPTR,#LENOVOPMFW_Temp
0003 E0                MOVX    A,@DPTR
0004 20E445            JB      ACC.4,?C0420
                                           ; SOURCE LINE # 1744
                                           ; SOURCE LINE # 1745
0007 120000      R     LCALL   L?0571
000A 7040              JNZ     ?C0420
000C 900000      E     MOV     DPTR,#eUpdateEEPROMCnt
000F E0                MOVX    A,@DPTR
0010 703A              JNZ     ?C0420
0012 120000      R     LCALL   L?0559
0015 6035              JZ      ?C0420
                                           ; SOURCE LINE # 1746
                                           ; SOURCE LINE # 1747
0017 7BF1              MOV     R3,#0F1H
0019 7DB0              MOV     R5,#0B0H
001B 7F01              MOV     R7,#01H
001D 120000      E     LCALL   _Read_Eflash_Byte
0020 900000      E     MOV     DPTR,#eEEPROMData
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 108 

0023 EF                MOV     A,R7
0024 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1748
0025 900000      E     MOV     DPTR,#CURRENT_STATUS
0028 E0                MOVX    A,@DPTR
0029 54C0              ANL     A,#0C0H
002B FF                MOV     R7,A
002C F0                MOVX    @DPTR,A
002D 900000      E     MOV     DPTR,#eEEPROMData
0030 E0                MOVX    A,@DPTR
0031 54C0              ANL     A,#0C0H
0033 F0                MOVX    @DPTR,A
0034 6F                XRL     A,R7
0035 6015              JZ      ?C0420
                                           ; SOURCE LINE # 1749
                                           ; SOURCE LINE # 1750
0037 E4                CLR     A
                                           ; SOURCE LINE # 1751
0038 120000      R     LCALL   L?0539
003B 74F1              MOV     A,#0F1H
003D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1752
003E 900000      E     MOV     DPTR,#CURRENT_STATUS
0041 E0                MOVX    A,@DPTR
0042 54C0              ANL     A,#0C0H
0044 F0                MOVX    @DPTR,A
0045 900000      E     MOV     DPTR,#eEEPROMData
0048 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1753
0049 120000      R     LCALL   Update_EEPROMMark
                                           ; SOURCE LINE # 1754
                                           ; SOURCE LINE # 1755
                                           ; SOURCE LINE # 1756
                                           ; SOURCE LINE # 1757
004C         ?C0420:
004C 22                RET     
             ; FUNCTION Chk_UEFIStatus (END)

             ; FUNCTION Clr_UEFIStatus (BEGIN)
                                           ; SOURCE LINE # 1758
                                           ; SOURCE LINE # 1759
                                           ; SOURCE LINE # 1760
0000 900000      E     MOV     DPTR,#LENOVOPMFW_Temp
0003 E0                MOVX    A,@DPTR
0004 20E442            JB      ACC.4,?C0424
                                           ; SOURCE LINE # 1761
                                           ; SOURCE LINE # 1762
0007 900000      E     MOV     DPTR,#eUpdateEEPROMCnt
000A E0                MOVX    A,@DPTR
000B 703C              JNZ     ?C0424
000D 120000      R     LCALL   L?0559
0010 6037              JZ      ?C0424
                                           ; SOURCE LINE # 1763
                                           ; SOURCE LINE # 1764
0012 7BF1              MOV     R3,#0F1H
0014 7DB0              MOV     R5,#0B0H
0016 7F01              MOV     R7,#01H
0018 120000      E     LCALL   _Read_Eflash_Byte
001B 900000      E     MOV     DPTR,#eEEPROMData
001E EF                MOV     A,R7
001F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1765
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 109 

                                           ; SOURCE LINE # 1766
0020 120000      R     LCALL   L?0556
0023 FF                MOV     R7,A
0024 900000      E     MOV     DPTR,#eEEPROMData
0027 E0                MOVX    A,@DPTR
0028 54C0              ANL     A,#0C0H
002A FE                MOV     R6,A
002B EF                MOV     A,R7
002C 4E                ORL     A,R6
002D 900000      E     MOV     DPTR,#CURRENT_STATUS
0030 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1767
0031 900000      E     MOV     DPTR,#eEEPROMData
0034 E0                MOVX    A,@DPTR
0035 64C0              XRL     A,#0C0H
0037 6010              JZ      ?C0424
                                           ; SOURCE LINE # 1768
                                           ; SOURCE LINE # 1769
0039 E4                CLR     A
                                           ; SOURCE LINE # 1770
003A 120000      R     LCALL   L?0539
003D 74F1              MOV     A,#0F1H
003F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1771
0040 900000      E     MOV     DPTR,#eEEPROMData
0043 74C0              MOV     A,#0C0H
0045 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1772
0046 120000      R     LCALL   Update_EEPROMMark
                                           ; SOURCE LINE # 1774
                                           ; SOURCE LINE # 1775
                                           ; SOURCE LINE # 1777
                                           ; SOURCE LINE # 1778
0049         ?C0424:
0049 22                RET     
             ; FUNCTION Clr_UEFIStatus (END)

             ; FUNCTION Update_16ByteEEPROM (BEGIN)
                                           ; SOURCE LINE # 1780
                                           ; SOURCE LINE # 1781
                                           ; SOURCE LINE # 1784
0000 7C00        E     MOV     R4,#HIGH _FSCEHighLevel
0002 7D00        E     MOV     R5,#LOW _FSCEHighLevel
0004 7F01              MOV     R7,#01H
0006 120000      E     LCALL   _CacheDma
                                           ; SOURCE LINE # 1785
0009 120000      E     LCALL   DisableAllInterrupt
                                           ; SOURCE LINE # 1787
000C 7BF0              MOV     R3,#0F0H
000E 7DBB              MOV     R5,#0BBH
0010 7F01              MOV     R7,#01H
0012 120000      E     LCALL   _Read_Eflash_Byte
0015 EF                MOV     A,R7
0016 F4                CPL     A
0017 6009              JZ      ?C0425
                                           ; SOURCE LINE # 1788
                                           ; SOURCE LINE # 1789
0019 E4                CLR     A
001A FB                MOV     R3,A
001B 7DB8              MOV     R5,#0B8H
001D 7F01              MOV     R7,#01H
001F 120000      E     LCALL   _Erase_Eflash_1K
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 110 

                                           ; SOURCE LINE # 1790
0022         ?C0425:
                                           ; SOURCE LINE # 1792
0022 E4                CLR     A
0023 900000      R     MOV     DPTR,#i
0026 F0                MOVX    @DPTR,A
0027         ?C0426:
                                           ; SOURCE LINE # 1793
                                           ; SOURCE LINE # 1794
0027 E4                CLR     A
0028 900000      R     MOV     DPTR,#j
002B F0                MOVX    @DPTR,A
002C         ?C0429:
002C 900000      R     MOV     DPTR,#j
002F E0                MOVX    A,@DPTR
0030 FF                MOV     R7,A
0031 C3                CLR     C
0032 9410              SUBB    A,#010H
0034 501A              JNC     ?C0430
                                           ; SOURCE LINE # 1795
                                           ; SOURCE LINE # 1796
0036 900000      R     MOV     DPTR,#i
0039 120000      R     LCALL   L?0561
003C 120000      E     LCALL   _Read_Eflash_Byte
003F 900000      E     MOV     DPTR,#eEEPROMData
0042 EF                MOV     A,R7
0043 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1797
0044 E0                MOVX    A,@DPTR
0045 F4                CPL     A
0046 6008              JZ      ?C0430
                                           ; SOURCE LINE # 1798
                                           ; SOURCE LINE # 1799
0048         ?C0431:
0048 900000      R     MOV     DPTR,#j
004B E0                MOVX    A,@DPTR
004C 04                INC     A
004D F0                MOVX    @DPTR,A
004E 80DC              SJMP    ?C0429
0050         ?C0430:
                                           ; SOURCE LINE # 1800
0050 900000      E     MOV     DPTR,#eEEPROMData
0053 E0                MOVX    A,@DPTR
0054 F4                CPL     A
0055 600C              JZ      ?C0427
                                           ; SOURCE LINE # 1801
                                           ; SOURCE LINE # 1802
0057         ?C0428:
0057 900000      R     MOV     DPTR,#i
005A E0                MOVX    A,@DPTR
005B 04                INC     A
005C F0                MOVX    @DPTR,A
005D E0                MOVX    A,@DPTR
005E C3                CLR     C
005F 9404              SUBB    A,#04H
0061 40C4              JC      ?C0426
0063         ?C0427:
                                           ; SOURCE LINE # 1803
0063 900000      R     MOV     DPTR,#i
0066 E0                MOVX    A,@DPTR
0067 24B8              ADD     A,#0B8H
0069 FD                MOV     R5,A
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 111 

006A A3                INC     DPTR
006B E0                MOVX    A,@DPTR
006C FF                MOV     R7,A
006D C4                SWAP    A
006E 54F0              ANL     A,#0F0H
0070 FB                MOV     R3,A
0071 EF                MOV     A,R7
0072 2450              ADD     A,#050H
0074 900000      E     MOV     DPTR,#?_Write_Eflash_1Byte?BYTE+03H
0077 F0                MOVX    @DPTR,A
0078 7F01              MOV     R7,#01H
                                           ; SOURCE LINE # 1804
007A 120000      R     LCALL   L?0523
007D 2404              ADD     A,#04H
007F FB                MOV     R3,A
0080 900000      E     MOV     DPTR,#pLastSID
0083 120000      R     LCALL   L?0522
                                           ; SOURCE LINE # 1805
0086 120000      R     LCALL   L?0523
0089 2406              ADD     A,#06H
008B FB                MOV     R3,A
008C 900000      E     MOV     DPTR,#TEMP_Buff_3
008F 120000      R     LCALL   L?0522
                                           ; SOURCE LINE # 1807
0092 120000      R     LCALL   L?0527
0095 2408              ADD     A,#08H
0097 FB                MOV     R3,A
0098 900000      E     MOV     DPTR,#VGA_TBuff3
009B 120000      R     LCALL   L?0522
009E 120000      E     LCALL   _Write_Eflash_1Byte
                                           ; SOURCE LINE # 1810
00A1 900000      E     MOV     DPTR,#pLastSID
00A4 E0                MOVX    A,@DPTR
00A5 6436              XRL     A,#036H
00A7 7039              JNZ     ?C0434
                                           ; SOURCE LINE # 1811
                                           ; SOURCE LINE # 1812
00A9 120000      R     LCALL   L?0534
00AC 240A              ADD     A,#0AH
00AE FB                MOV     R3,A
00AF 900000      E     MOV     DPTR,#PowerOVP_REG
00B2 120000      R     LCALL   L?0522
                                           ; SOURCE LINE # 1813
00B5 120000      R     LCALL   L?0527
00B8 240B              ADD     A,#0BH
00BA FB                MOV     R3,A
00BB 900000      E     MOV     DPTR,#PowerUVP_REG
00BE 120000      R     LCALL   L?0522
00C1 120000      E     LCALL   _Write_Eflash_1Byte
                                           ; SOURCE LINE # 1814
00C4 120000      R     LCALL   L?0534
00C7 240C              ADD     A,#0CH
00C9 FB                MOV     R3,A
00CA 900000      E     MOV     DPTR,#PowerOCP_REG
00CD 120000      R     LCALL   L?0522
00D0 120000      E     LCALL   _Write_Eflash_1Byte
                                           ; SOURCE LINE # 1816
00D3 120000      R     LCALL   L?0535
00D6 240D              ADD     A,#0DH
00D8 FB                MOV     R3,A
00D9 900000      E     MOV     DPTR,#PowerOTP_REG
00DC 120000      R     LCALL   L?0522
C51 COMPILER V8.12   OEM_6064                                                              09/14/2018 11:08:24 PAGE 112 

00DF 120000      E     LCALL   _Write_Eflash_1Byte
                                           ; SOURCE LINE # 1817
00E2         ?C0434:
                                           ; SOURCE LINE # 1818
00E2 020000      E     LJMP    EnableAllInterrupt
                                           ; SOURCE LINE # 1819
00E5         L?0523:
00E5 120000      E     LCALL   _Write_Eflash_1Byte
00E8 900000      R     MOV     DPTR,#i
00EB E0                MOVX    A,@DPTR
00EC 24B8              ADD     A,#0B8H
00EE FD                MOV     R5,A
00EF A3                INC     DPTR
00F0 E0                MOVX    A,@DPTR
00F1 C4                SWAP    A
00F2 54F0              ANL     A,#0F0H
00F4 22                RET     
00F5         L?0527:
00F5 120000      E     LCALL   _Write_Eflash_1Byte
00F8 900000      R     MOV     DPTR,#i
00FB E0                MOVX    A,@DPTR
00FC 24B8              ADD     A,#0B8H
00FE FD                MOV     R5,A
00FF A3                INC     DPTR
0100 E0                MOVX    A,@DPTR
0101 C4                SWAP    A
0102 54F0              ANL     A,#0F0H
0104 22                RET     
             ; FUNCTION Update_16ByteEEPROM (END)



MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   5555    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----      47
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
