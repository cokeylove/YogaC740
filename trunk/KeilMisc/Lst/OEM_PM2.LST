C51 COMPILER V8.12   OEM_PM2                                                               09/14/2018 11:08:34 PAGE 1   


C51 COMPILER V8.12, COMPILATION OF MODULE OEM_PM2
OBJECT MODULE PLACED IN Code\Oem\OEM_PM2.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE Code\Oem\OEM_PM2.C LA WL(1) CD OT(9,SIZE) NOAREGS OR INCDIR(.\Code\CORE\INC
                    -LUDE\;.\Code\OEM\INCLUDE\;.\Code\CHIP\INCLUDE\)

line level    source

   1          /*----------------------------------------------------------------------------
   2           * Filename: OEM_PM2.C  For Chipset: ITE.IT85XX
   3           *
   4           * Copyright (c) 2010 - , ITE Tech. Inc. All Rights Reserved. 
   5           *
   6           * You may not present,reproduce,distribute,publish,display,modify,adapt,
   7           * perform,transmit,broadcast,recite,release,license or otherwise exploit
   8           * any part of this publication in any form,by any means,without the prior
   9           * written permission of ITE Tech. Inc. 
  10           *---------------------------------------------------------------------------*/
  11          
  12          #include <CORE_INCLUDE.H>
  13          #include <OEM_INCLUDE.H>
  14          
  15          //ANGELAS064:add start
  16          //----------------------------------------------------------------------------
  17          // Read EC ram Space
  18          //----------------------------------------------------------------------------
  19          //72JERRY003:s+ Modify flash PD FW interface.
  20          BYTE Hook_ReadECSpace(BYTE MapIndex)
  21          {
  22   1              BYTE  Temp;
  23   1              Temp= *((XBYTE *)(NameSpace|MapIndex));
  24   1              return(Temp);   
  25   1      }
  26          
  27          void Hook_WriteECSpace(BYTE MapIndex, BYTE data1)
  28          {
  29   1              *((XBYTE *)(NameSpace|MapIndex)) = data1;  
  30   1      }
  31          
  32          //----------------------------------------------------------------------------
  33          // Write EC ram Space
  34          //----------------------------------------------------------------------------
  35          void Hook_WriteLCFCECSpace(BYTE MapIndex, BYTE data1)
  36          {
  37   1              *((XBYTE *)(DiagECRAM|MapIndex)) = data1;
  38   1              Diag_interface();  
  39   1      }
  40          BYTE Hook_ReadLCFCECSpace(BYTE MapIndex)
  41          {
  42   1              BYTE  Temp;
  43   1              Temp= *((XBYTE *)(DiagECRAM|MapIndex));
  44   1              return(Temp);   
  45   1      }
  46          void PM2_Cmd_80Data(void)    
  47          
  48          {
  49   1              if (PM2DataCount == 1)
  50   1              {
  51   2                      Data2Port(0x68,Hook_ReadECSpace(PM2Data));
  52   2              }
  53   1      }
  54          void PM2_Cmd_81Data(void)  
C51 COMPILER V8.12   OEM_PM2                                                               09/14/2018 11:08:34 PAGE 2   

  55          {
  56   1              if (PM2DataCount == 2)
  57   1              {
  58   2              PM2Data1=PM2Data;               
  59   2              }
  60   1              else if(PM2DataCount == 1)
  61   1              {
  62   2                      Hook_WriteECSpace(PM2Data1,PM2Data);
  63   2                      Hook_ACPICommand(); 
  64   2              }
  65   1      }
  66          //72JERRY003: e+Modify flash PD FW interface.
  67          //----------------------------------------------------------------------------
  68          // Handle the data of ACPI command 8x
  69          //----------------------------------------------------------------------------
  70          void PM2_Cmd_90Data(void)    
  71          
  72          {
  73   1              if (PM2DataCount == 1)
  74   1              {
  75   2                      Data2Port(0x68,Hook_ReadLCFCECSpace(PM2Data));
  76   2              }
  77   1      }
  78          void PM2_Cmd_91Data(void)  
  79          {
  80   1              if (PM2DataCount == 2)
  81   1              {
  82   2              PM2Data1=PM2Data;               
  83   2              }
  84   1              else if(PM2DataCount == 1)
  85   1              {
  86   2                      Hook_WriteLCFCECSpace(PM2Data1,PM2Data);
  87   2                      Hook_ACPICommand(); 
  88   2              }
  89   1      }
  90          //ANGELAS064:add end
  91          
  92          //----------------------------------------------------------------------------
  93          // The function of debuging 68 port
  94          //----------------------------------------------------------------------------
  95          void Hook_68Port(BYTE PM2Cmd)
  96          { //G686C add below info G59:Add 68/6C interface.
  97   1          BYTE i;
  98   1              
  99   1              switch(PM2Cmd)
 100   1              {
 101   2              case 0x40:
 102   2                      Cmd_40(PM2Data);
 103   2                      break;
 104   2              case 0x41:
 105   2                      if(PM2Data==0xA1) 
 106   2                              Cmd_41_A1(0x68);
 107   2                      break;
 108   2              case 0x42:
 109   2                      Cmd_42(PM2Data);
 110   2                      break;
 111   2              case 0x43:
 112   2                      Cmd_43(0x68,PM2Data);
 113   2                      break;
 114   2              case 0x45:
 115   2                      Cmd_45(0x68,PM2Data);
 116   2                      break;
C51 COMPILER V8.12   OEM_PM2                                                               09/14/2018 11:08:34 PAGE 3   

 117   2              case 0x46:
 118   2                      Cmd_46(0x68,PM2Data);
 119   2                      break;
 120   2              case 0x47:
 121   2                      Cmd_47(0x68,PM2Data);
 122   2                      break;
 123   2              case 0x49:
 124   2                      break;
 125   2              //MEILING009:S+ Add 8 sec reset test function.
 126   2              case 0x4A:
 127   2                      Cmd_4A(0x68,PM2Data);
 128   2                      break;
 129   2              //MEILING009:E+.
 130   2              case 0x4B:
 131   2                      if (PM2DataCount == 0x04)
 132   2                      {
 133   3                              i = PM2Data;
 134   3                              break;
 135   3                      }
 136   2                      if (PM2DataCount == 0x03)
 137   2                      {
 138   3                              eEEPROMAddrsss = PM2Data;
 139   3                              break;
 140   3                      }
 141   2                      if (PM2DataCount == 0x02)
 142   2                      {
 143   3                              eEEPROMBank = PM2Data;
 144   3                              break;
 145   3                      }
 146   2                      if (PM2DataCount == 0x01)
 147   2                      {
 148   3                              eEEPROMData = PM2Data;
 149   3                              SET_MASK(LENOVOPMFW_Temp,EEPROM_Token);
 150   3                              Update_EEPROMMark();
 151   3                              CLEAR_MASK(LENOVOPMFW_Temp,EEPROM_Token);
 152   3                              Data2PortDirect(0x68, 0x00);  
 153   3                      }
 154   2                      break;
 155   2              
 156   2              case 0x4C:
 157   2                      if (PM2DataCount == 0x03)
 158   2                      {
 159   3                              i = PM2Data;
 160   3                              break;
 161   3                      }
 162   2                      if (PM2DataCount == 0x02)
 163   2                      {
 164   3                              eEEPROMAddrsss = PM2Data;
 165   3                              break;
 166   3                      }
 167   2                      if (PM2DataCount == 0x01)
 168   2                      {
 169   3                              eEEPROMBank = PM2Data;
 170   3                              Cmd_4E(0x68,eEEPROMAddrsss);
 171   3                      }
 172   2                      break;
 173   2              
 174   2              case 0x4D:
 175   2                      if (PM2DataCount == 0x02)
 176   2                      {
 177   3                              eEEPROMAddrsss = PM2Data;
 178   3                              break;
C51 COMPILER V8.12   OEM_PM2                                                               09/14/2018 11:08:34 PAGE 4   

 179   3                      }
 180   2                      if (PM2DataCount == 0x01)
 181   2                      {
 182   3                              eEEPROMData = PM2Data;
 183   3                              SET_MASK(LENOVOPMFW_Temp,EEPROM_Token);
 184   3                              Update_EEPROMMark();
 185   3                              CLEAR_MASK(LENOVOPMFW_Temp,EEPROM_Token);
 186   3                              Data2PortDirect(0x68, 0x00);  
 187   3                      }
 188   2                      break;
 189   2              
 190   2              case 0x4E:
 191   2                      eEEPROMAddrsss = PM2Data;
 192   2                      Cmd_4E(0x68,eEEPROMAddrsss);
 193   2                      break;
 194   2              
 195   2              case 0x51:
 196   2                      break;
 197   2              
 198   2              case 0x52:
 199   2                      if(PM2Data==0xA0) Cmd_52_A0(0x68);
 200   2                      if(PM2Data==0xA3) Cmd_52_A3(0x68);
 201   2                      if(PM2Data==0xA4) Cmd_52_A4(0x68);
 202   2                      if(PM2Data==0xA5) Cmd_52_A5(0x68);
 203   2                      if(PM2Data==0xA6) Cmd_52_A6(0x68); //LMLKBL0018:add.
 204   2                      if(PM2Data==0xA7) Cmd_52_A7(0x68); //LMLKBL0018:add.
 205   2                      break;
 206   2              
 207   2              case 0x53:
 208   2                      if (PM2DataCount == 0x01)
 209   2                      {
 210   3                              Cmd_53(0x68,PM2Data2,PM2Data1,PM2Data);
 211   3                      }
 212   2                      break;
 213   2              case 0x55:
 214   2                      if (PM2DataCount == 0x01)  //Hang check
 215   2                      {
 216   3                              Cmd_55(PM2Data);
 217   3                      }
 218   2                      break;
 219   2              case 0x56:
 220   2                      break;
 221   2              case 0x58:
 222   2                      Cmd_58(PM2Data);
 223   2                      break;
 224   2              case 0x59:
 225   2                      Cmd_59(0x68,PM2Data,0);
 226   2                      break;
 227   2              case 0x5C:
 228   2                      Cmd_5C(0x68);
 229   2                      break;
 230   2              case 0x5D:
 231   2                      Cmd_5D(PM2Data);
 232   2                      break;
 233   2          case 0x71:
 234   2                      //LMLKBL0001:modify cmd 0x71 have one data.
 235   2              /*if (PM2DataCount == 0x01)
 236   2                      {
 237   2                              Cmd_71(PM2Data1,PM2Data);//:Add 60/64 71cmd follow new EC common SPEC. :Add 62/66 71cmd
 238   2                      }*/
 239   2              Cmd_71(PM2Data);
 240   2              //LMLKBL0001:modify cmd 0x71 have one data.
C51 COMPILER V8.12   OEM_PM2                                                               09/14/2018 11:08:34 PAGE 5   

 241   2                      break;
 242   2              case 0x72:
 243   2                      Cmd_72(PM2Data);//:add flag for  tool to keep the battery at 60% //:Add 62/66 72cmd.
 244   2                      break;
 245   2              //ANGELAS033:Add start                  
 246   2              case 0x7A:
 247   2                      Cmd_7A(0x68,PM2Data);
 248   2                      break;
 249   2              case 0x7B:
 250   2                      if( PM2DataCount == 0x01 )
 251   2                      {
 252   3                              Cmd_7B(0x68,PM2Data1,PM2Data);;
 253   3                      }
 254   2                      break;                  
 255   2              //ANGELAS033:Add end
 256   2      
 257   2              //MEILING031: add start
 258   2              case 0x7E:
 259   2                      if (PM2DataCount == 0x01)
 260   2              {
 261   3                  Cmd_7E(0x68,PM2Data1,PM2Data);
 262   3                      }
 263   2                      break;
 264   2              //MEILING031: add end
 265   2              //72JERRY003:s+ Modify flash PD FW interface.
 266   2              case 0x80:
 267   2                      PM2_Cmd_80Data();
 268   2                      break;                                  
 269   2              case 0x81:
 270   2                      PM2_Cmd_81Data();
 271   2                      break;
 272   2                      //72JERRY003:e+ Modify flash PD FW interface.
 273   2              //ANGELAS064:Add start  
 274   2              case 0x90:
 275   2                      PM2_Cmd_90Data();
 276   2                      break;                                  
 277   2              case 0x91:
 278   2                      PM2_Cmd_91Data();
 279   2                      break;
 280   2              //ANGELAS064:Add end
 281   2                              
 282   2              case 0xB0:
 283   2                      Cmd_B0(0x68,PM2Data);
 284   2                      break;
 285   2              case 0xB3:
 286   2                      if (PM2DataCount == 0x01)
 287   2                      {
 288   3                              Cmd_B3(0x68,PM2Data1,PM2Data);
 289   3                      }
 290   2                      break;
 291   2              }
 292   1      }
 293          
 294          
 295          //----------------------------------------------------------------------------
 296          // The function of debuging 6C port
 297          //----------------------------------------------------------------------------
 298          void Hook_6CPort(BYTE PM2Cmd)
 299          {
 300   1          //G686C add below info :Add 68/6C interface.
 301   1              switch(PM2Cmd)
 302   1              {
C51 COMPILER V8.12   OEM_PM2                                                               09/14/2018 11:08:34 PAGE 6   

 303   2              case 0x40:
 304   2                      PM2DataCount=0x01;
 305   2                      break;
 306   2              case 0x41:
 307   2                      PM2DataCount=0x01;
 308   2                      break;
 309   2              case 0x42:
 310   2                      PM2DataCount=0x01;
 311   2                      break;
 312   2              case 0x43:
 313   2                      PM2DataCount=0x01;
 314   2                      break;
 315   2              case 0x44:
 316   2                      Cmd_44(0x68);
 317   2                      break;
 318   2              case 0x45:
 319   2                      PM2DataCount=0x01;
 320   2                      break;
 321   2              case 0x46:
 322   2                      PM2DataCount=0x01;
 323   2                      break;
 324   2              case 0x47:
 325   2                      PM2DataCount=0x01;
 326   2                      break;
 327   2              case 0x49:
 328   2                      Cmd_49(0x68);
 329   2                      break;
 330   2              //MEILING009:S+ Add 8 sec reset test function.
 331   2              case 0x4A:
 332   2                      PM2DataCount=0x01; 
 333   2                      break;
 334   2              //MEILING009:E+.
 335   2              case 0x4B:
 336   2                      PM2DataCount=0x04;
 337   2                      break;
 338   2              case 0x4C:
 339   2                      PM2DataCount=0x03;
 340   2                      break;
 341   2              case 0x4D:
 342   2                      PM2DataCount=0x02;
 343   2                      break;
 344   2              case 0x4E:
 345   2                      PM2DataCount=0x01;
 346   2                      break;
 347   2              case 0x4F:
 348   2                      Erase_EEPROMAll();
 349   2                      break;
 350   2              //REJERRY093: Add CMD 0X50 for osAging S4 keep EC power.
 351   2                      case 0x50:
 352   2                              SET_MASK(ACPI_HOTKEY, b6Cmd_NoShut);//for osAging s4 keep EC power
 353   2                              break;
 354   2              //REJERRY093: Add CMD 0X50 for osAging S4 keep EC power.
 355   2              case 0x51:
 356   2                      Cmd_51(0x68);
 357   2                      break;
 358   2              case 0x52:
 359   2                      PM2DataCount=0x01;
 360   2                      break;
 361   2              case 0x53:
 362   2                      PM2DataCount=0x03;
 363   2                      break;
 364   2              case 0x55://hang check
C51 COMPILER V8.12   OEM_PM2                                                               09/14/2018 11:08:34 PAGE 7   

 365   2                      PM2DataCount=0x01;
 366   2                      break;
 367   2              case 0x56:
 368   2                      break;
 369   2              case 0x58:
 370   2                      PM2DataCount=0x01;
 371   2                      break;
 372   2              case 0x59:
 373   2                      PM2DataCount=0x01;
 374   2                      break;
 375   2              case 0x5C:
 376   2                      break;
 377   2              case 0x5D:
 378   2                      PM2DataCount=0x01;
 379   2                      break;
 380   2              //ANGELAS032: s+ add
 381   2              case 0x5E:                      // UNLOCK SHIP MODE 
 382   2              #if shipmodesupport             //add ship mode judge
 383   2                      Unlock_ShipMode();
 384   2              #endif
 385   2                      break;
 386   2              case 0x5F:      
 387   2                      #if shipmodesupport             //add ship mode judge// LOCK SHIP MODE 
 388   2                      ShipModeEn=0xA5;  
 389   2                      Data2PortDirect(0x68, 0x5A);
 390   2              RamDebug(0xA5);
 391   2                      #endif
 392   2                      break;
 393   2              //ANGELAS032: e+ add
 394   2          case 0x71:
 395   2                      PM2DataCount=0x02;//:Add 62/66 71cmd
 396   2                      break;
 397   2          case 0x72:
 398   2                      PM2DataCount=0x01;//:Add 62/66 72cmd.
 399   2                      break;
 400   2              //ANGELAG012:S+.
 401   2              case 0x75:
 402   2                      Cmd_75();
 403   2                      break;
 404   2              //ANGELAG012:E+.
 405   2              //ANGELAS033:Add start
 406   2              case 0x7A:
 407   2                      PM2DataCount=0x01;
 408   2                      break;
 409   2              case 0x7B:
 410   2                      PM2DataCount=0x02;
 411   2                      break;
 412   2              //ANGELAS033:Add end
 413   2              //ANGELAS094:s+Add workaround for hang bios.
 414   2              case 0x7C:
 415   2                      Bioswatchdog=1;
 416   2                      Bioswatchdogtime=0;//ANGELAS106:Optimize ANGELAS094 clear time.
 417   2                      Data2PortDirect(0x68, 0x55);//ANGELAS105:Optimize ANGELAS094 add return date for bios.
 418   2                      break;
 419   2              case 0x7D:
 420   2                      Bioswatchdog=0;
 421   2                      Data2PortDirect(0x68, 0x55);//ANGELAS105:Optimize ANGELAS094 add return date for bios.
 422   2                      break;
 423   2              //ANGELAS094:e+Add workaround for hang bios.
 424   2      
 425   2              //MEILING031: add start
 426   2          case 0x7E:
C51 COMPILER V8.12   OEM_PM2                                                               09/14/2018 11:08:34 PAGE 8   

 427   2                      PM2DataCount=0x02;
 428   2                      break;
 429   2              //MEILING031: add end
 430   2              //72JERRY003: s+Modify flash PD FW interface.
 431   2               case 0x80:      
 432   2                      PM2DataCount=0x01;
 433   2                      break;
 434   2              case 0x81:        
 435   2                      PM2DataCount=0x02;
 436   2                      break;  
 437   2                      //72JERRY003: e+Modify flash PD FW interface.
 438   2              //ANGELAS064:add start
 439   2              case 0x90:       
 440   2                      PM2DataCount=0x01;
 441   2                      break;
 442   2              case 0x91:        
 443   2                      PM2DataCount=0x02;
 444   2                      break;                          
 445   2              //ANGELAS064:add end
 446   2              case 0xB0:
 447   2                      PM2DataCount=0x01;
 448   2                      break;
 449   2              //: start for save P80 code to setup. 
 450   2              case 0xB1:
 451   2                      Cmd_B1(0x68,0xB1);
 452   2                      break;
 453   2              case 0xB2:
 454   2                      Cmd_B2(0x68,0xB2);
 455   2                      break;
 456   2              //: end for save P80 code to setup. 
 457   2              case 0xB3:
 458   2                      PM2DataCount=0x02;
 459   2                      break;
 460   2              //ANGELAS002:S+Support 686C flash EC in windows or Shell
 461   2              case 0xDC:
 462   2              PM2_6CCmd_DC();//BROOKEW008:support 686C flash EC.
 463   2              break;
 464   2              //ANGELAS002:E+Support 686C flash EC in windows or Shell
 465   2              }
 466   1      }
 467          
 468          //----------------------------------------------------------------------------
 469          // Process Command/Data received from System via 68/6C interface
 470          //----------------------------------------------------------------------------
 471          void service_pci3(void)
 472          {
 473   1              //G686C add info G59:Add 68/6C interface.
 474   1          if ( IS_MASK_CLEAR(PM2STS,P_IBF) )  
 475   1          {
 476   2                  return; 
 477   2          }
 478   1              if ( PM2STS & P_C_D)    // Command port
 479   1              {
 480   2              PM2DataCount =0;
 481   2                      PM2Cmd  = PM2DI;        // Load command 
 482   2                      EnablePMCIBFInt();
 483   2                      Hook_6CPort(PM2Cmd);    // Handle command               
 484   2              }
 485   1              else                                    // Data port
 486   1              {
 487   2                  PM2Data2 = PM2Data1;
 488   2                  PM2Data1 = PM2Data;         
C51 COMPILER V8.12   OEM_PM2                                                               09/14/2018 11:08:34 PAGE 9   

 489   2              PM2Data = PM2DI;
 490   2              EnablePMCIBFInt();
 491   2              if (PM2DataCount!=0x00) 
 492   2              {
 493   3                          Hook_68Port(PM2Cmd);   // Handle command data
 494   3                          PM2DataCount--;
 495   3                  }
 496   2              }
 497   1      
 498   1      }
 499          
C51 COMPILER V8.12   OEM_PM2                                                               09/14/2018 11:08:34 PAGE 10  

ASSEMBLY LISTING OF GENERATED OBJECT CODE


             ; FUNCTION Com009D (BEGIN)
0000         L?0158:
0000         L?0159:
0000 AB00        E     MOV     R3,PM2Data
0002 AD00        E     MOV     R5,PM2Data1
0004 7F68              MOV     R7,#068H
0006 22                RET     
             ; FUNCTION Com009D (END)

             ; FUNCTION _Hook_ReadECSpace (BEGIN)
                                           ; SOURCE LINE # 20
;---- Variable 'MapIndex' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 21
                                           ; SOURCE LINE # 23
0000 7404              MOV     A,#04H
0002 8F82              MOV     DPL,R7
0004 F583              MOV     DPH,A
0006 E0                MOVX    A,@DPTR
0007 FF                MOV     R7,A
;---- Variable 'Temp' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 24
                                           ; SOURCE LINE # 25
0008         ?C0001:
0008 22                RET     
             ; FUNCTION _Hook_ReadECSpace (END)

             ; FUNCTION _Hook_WriteECSpace (BEGIN)
                                           ; SOURCE LINE # 27
;---- Variable 'data1' assigned to Register 'R5' ----
;---- Variable 'MapIndex' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 28
                                           ; SOURCE LINE # 29
0000 CE                XCH     A,R6
0001 ED                MOV     A,R5
0002 CE                XCH     A,R6
0003 EF                MOV     A,R7
0004 FD                MOV     R5,A
0005 7404              MOV     A,#04H
0007 8D82              MOV     DPL,R5
0009 F583              MOV     DPH,A
000B EE                MOV     A,R6
000C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 30
000D 22                RET     
             ; FUNCTION _Hook_WriteECSpace (END)

             ; FUNCTION _Hook_WriteLCFCECSpace (BEGIN)
                                           ; SOURCE LINE # 35
;---- Variable 'data1' assigned to Register 'R5' ----
;---- Variable 'MapIndex' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 36
                                           ; SOURCE LINE # 37
0000 CE                XCH     A,R6
0001 ED                MOV     A,R5
0002 CE                XCH     A,R6
0003 EF                MOV     A,R7
0004 FD                MOV     R5,A
0005 740F              MOV     A,#0FH
0007 8D82              MOV     DPL,R5
C51 COMPILER V8.12   OEM_PM2                                                               09/14/2018 11:08:34 PAGE 11  

0009 F583              MOV     DPH,A
000B EE                MOV     A,R6
000C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 38
000D 020000      E     LJMP    Diag_interface
             ; FUNCTION _Hook_WriteLCFCECSpace (END)

             ; FUNCTION _Hook_ReadLCFCECSpace (BEGIN)
                                           ; SOURCE LINE # 40
;---- Variable 'MapIndex' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 41
                                           ; SOURCE LINE # 43
0000 740F              MOV     A,#0FH
0002 8F82              MOV     DPL,R7
0004 F583              MOV     DPH,A
0006 E0                MOVX    A,@DPTR
0007 FF                MOV     R7,A
;---- Variable 'Temp' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 44
                                           ; SOURCE LINE # 45
0008         ?C0004:
0008 22                RET     
             ; FUNCTION _Hook_ReadLCFCECSpace (END)

             ; FUNCTION PM2_Cmd_80Data (BEGIN)
                                           ; SOURCE LINE # 46
                                           ; SOURCE LINE # 48
                                           ; SOURCE LINE # 49
0000 E500        E     MOV     A,PM2DataCount
0002 B4010D            CJNE    A,#01H,?C0006
                                           ; SOURCE LINE # 50
                                           ; SOURCE LINE # 51
0005 AF00        E     MOV     R7,PM2Data
0007 120000      R     LCALL   _Hook_ReadECSpace
000A CD                XCH     A,R5
000B EF                MOV     A,R7
000C CD                XCH     A,R5
000D 7F68              MOV     R7,#068H
000F 120000      E     LCALL   _Data2Port
                                           ; SOURCE LINE # 52
                                           ; SOURCE LINE # 53
0012         ?C0006:
0012 22                RET     
             ; FUNCTION PM2_Cmd_80Data (END)

             ; FUNCTION PM2_Cmd_81Data (BEGIN)
                                           ; SOURCE LINE # 54
                                           ; SOURCE LINE # 55
                                           ; SOURCE LINE # 56
0000 E500        E     MOV     A,PM2DataCount
0002 B40204            CJNE    A,#02H,?C0007
                                           ; SOURCE LINE # 57
                                           ; SOURCE LINE # 58
0005 850000      E     MOV     PM2Data1,PM2Data
                                           ; SOURCE LINE # 59
0008 22                RET     
0009         ?C0007:
                                           ; SOURCE LINE # 60
0009 E500        E     MOV     A,PM2DataCount
000B B4010A            CJNE    A,#01H,?C0010
                                           ; SOURCE LINE # 61
                                           ; SOURCE LINE # 62
C51 COMPILER V8.12   OEM_PM2                                                               09/14/2018 11:08:34 PAGE 12  

000E AD00        E     MOV     R5,PM2Data
0010 AF00        E     MOV     R7,PM2Data1
0012 120000      R     LCALL   _Hook_WriteECSpace
                                           ; SOURCE LINE # 63
0015 120000      E     LCALL   Hook_ACPICommand
                                           ; SOURCE LINE # 64
                                           ; SOURCE LINE # 65
0018         ?C0010:
0018 22                RET     
             ; FUNCTION PM2_Cmd_81Data (END)

             ; FUNCTION PM2_Cmd_90Data (BEGIN)
                                           ; SOURCE LINE # 70
                                           ; SOURCE LINE # 72
                                           ; SOURCE LINE # 73
0000 E500        E     MOV     A,PM2DataCount
0002 B4010D            CJNE    A,#01H,?C0012
                                           ; SOURCE LINE # 74
                                           ; SOURCE LINE # 75
0005 AF00        E     MOV     R7,PM2Data
0007 120000      R     LCALL   _Hook_ReadLCFCECSpace
000A CD                XCH     A,R5
000B EF                MOV     A,R7
000C CD                XCH     A,R5
000D 7F68              MOV     R7,#068H
000F 120000      E     LCALL   _Data2Port
                                           ; SOURCE LINE # 76
                                           ; SOURCE LINE # 77
0012         ?C0012:
0012 22                RET     
             ; FUNCTION PM2_Cmd_90Data (END)

             ; FUNCTION PM2_Cmd_91Data (BEGIN)
                                           ; SOURCE LINE # 78
                                           ; SOURCE LINE # 79
                                           ; SOURCE LINE # 80
0000 E500        E     MOV     A,PM2DataCount
0002 B40204            CJNE    A,#02H,?C0013
                                           ; SOURCE LINE # 81
                                           ; SOURCE LINE # 82
0005 850000      E     MOV     PM2Data1,PM2Data
                                           ; SOURCE LINE # 83
0008 22                RET     
0009         ?C0013:
                                           ; SOURCE LINE # 84
0009 E500        E     MOV     A,PM2DataCount
000B B4010A            CJNE    A,#01H,?C0016
                                           ; SOURCE LINE # 85
                                           ; SOURCE LINE # 86
000E AD00        E     MOV     R5,PM2Data
0010 AF00        E     MOV     R7,PM2Data1
0012 120000      R     LCALL   _Hook_WriteLCFCECSpace
                                           ; SOURCE LINE # 87
0015 120000      E     LCALL   Hook_ACPICommand
                                           ; SOURCE LINE # 88
                                           ; SOURCE LINE # 89
0018         ?C0016:
0018 22                RET     
             ; FUNCTION PM2_Cmd_91Data (END)

             ; FUNCTION _Hook_68Port (BEGIN)
                                           ; SOURCE LINE # 95
C51 COMPILER V8.12   OEM_PM2                                                               09/14/2018 11:08:34 PAGE 13  

;---- Variable 'PM2Cmd' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 96
                                           ; SOURCE LINE # 99
0000 EF                MOV     A,R7
0001 120000      E     LCALL   ?C?CCASE
0004 0000        R     DW      ?C0018
0006 40                DB      040H
0007 0000        R     DW      ?C0019
0009 41                DB      041H
000A 0000        R     DW      ?C0021
000C 42                DB      042H
000D 0000        R     DW      ?C0022
000F 43                DB      043H
0010 0000        R     DW      ?C0023
0012 45                DB      045H
0013 0000        R     DW      ?C0024
0015 46                DB      046H
0016 0000        R     DW      ?C0025
0018 47                DB      047H
0019 0000        R     DW      ?C0027
001B 4A                DB      04AH
001C 0000        R     DW      ?C0028
001E 4B                DB      04BH
001F 0000        R     DW      ?C0033
0021 4C                DB      04CH
0022 0000        R     DW      ?C0037
0024 4D                DB      04DH
0025 0000        R     DW      ?C0040
0027 4E                DB      04EH
0028 0000        R     DW      ?C0042
002A 52                DB      052H
002B 0000        R     DW      ?C0049
002D 53                DB      053H
002E 0000        R     DW      ?C0051
0030 55                DB      055H
0031 0000        R     DW      ?C0054
0033 58                DB      058H
0034 0000        R     DW      ?C0055
0036 59                DB      059H
0037 0000        R     DW      ?C0056
0039 5C                DB      05CH
003A 0000        R     DW      ?C0057
003C 5D                DB      05DH
003D 0000        R     DW      ?C0058
003F 71                DB      071H
0040 0000        R     DW      ?C0059
0042 72                DB      072H
0043 0000        R     DW      ?C0060
0045 7A                DB      07AH
0046 0000        R     DW      ?C0061
0048 7B                DB      07BH
0049 0000        R     DW      ?C0063
004B 7E                DB      07EH
004C 0000        R     DW      ?C0065
004E 80                DB      080H
004F 0000        R     DW      ?C0066
0051 81                DB      081H
0052 0000        R     DW      ?C0067
0054 90                DB      090H
0055 0000        R     DW      ?C0068
0057 91                DB      091H
0058 0000        R     DW      ?C0069
C51 COMPILER V8.12   OEM_PM2                                                               09/14/2018 11:08:34 PAGE 14  

005A B0                DB      0B0H
005B 0000        R     DW      ?C0070
005D B3                DB      0B3H
005E 0000              DW      00H
0060 0000        R     DW      ?C0072
                                           ; SOURCE LINE # 100
                                           ; SOURCE LINE # 101
0062         ?C0018:
                                           ; SOURCE LINE # 102
0062 AF00        E     MOV     R7,PM2Data
0064 020000      E     LJMP    _Cmd_40
                                           ; SOURCE LINE # 103
                                           ; SOURCE LINE # 104
0067         ?C0019:
                                           ; SOURCE LINE # 105
0067 E500        E     MOV     A,PM2Data
0069 64A1              XRL     A,#0A1H
006B 6003              JZ      $ + 5H
006D 020000      R     LJMP    ?C0072
                                           ; SOURCE LINE # 106
0070 7F68              MOV     R7,#068H
0072 020000      E     LJMP    _Cmd_41_A1
                                           ; SOURCE LINE # 107
                                           ; SOURCE LINE # 108
0075         ?C0021:
                                           ; SOURCE LINE # 109
0075 AF00        E     MOV     R7,PM2Data
0077 020000      E     LJMP    _Cmd_42
                                           ; SOURCE LINE # 110
                                           ; SOURCE LINE # 111
007A         ?C0022:
                                           ; SOURCE LINE # 112
007A AD00        E     MOV     R5,PM2Data
007C 7F68              MOV     R7,#068H
007E 020000      E     LJMP    _Cmd_43
                                           ; SOURCE LINE # 113
                                           ; SOURCE LINE # 114
0081         ?C0023:
                                           ; SOURCE LINE # 115
0081 AD00        E     MOV     R5,PM2Data
0083 7F68              MOV     R7,#068H
0085 020000      E     LJMP    _Cmd_45
                                           ; SOURCE LINE # 116
                                           ; SOURCE LINE # 117
0088         ?C0024:
                                           ; SOURCE LINE # 118
0088 AD00        E     MOV     R5,PM2Data
008A 7F68              MOV     R7,#068H
008C 020000      E     LJMP    _Cmd_46
                                           ; SOURCE LINE # 119
                                           ; SOURCE LINE # 120
008F         ?C0025:
                                           ; SOURCE LINE # 121
008F AD00        E     MOV     R5,PM2Data
0091 7F68              MOV     R7,#068H
0093 020000      E     LJMP    _Cmd_47
                                           ; SOURCE LINE # 122
                                           ; SOURCE LINE # 123
                                           ; SOURCE LINE # 124
                                           ; SOURCE LINE # 126
0096         ?C0027:
                                           ; SOURCE LINE # 127
C51 COMPILER V8.12   OEM_PM2                                                               09/14/2018 11:08:34 PAGE 15  

0096 AD00        E     MOV     R5,PM2Data
0098 7F68              MOV     R7,#068H
009A 020000      E     LJMP    _Cmd_4A
                                           ; SOURCE LINE # 128
                                           ; SOURCE LINE # 130
009D         ?C0028:
                                           ; SOURCE LINE # 131
009D E500        E     MOV     A,PM2DataCount
009F B40402            CJNE    A,#04H,?C0029
                                           ; SOURCE LINE # 132
                                           ; SOURCE LINE # 133
                                           ; SOURCE LINE # 134
00A2 8021              SJMP    ?C0124
                                           ; SOURCE LINE # 135
00A4         ?C0029:
                                           ; SOURCE LINE # 136
00A4 E500        E     MOV     A,PM2DataCount
00A6 B40302            CJNE    A,#03H,?C0030
                                           ; SOURCE LINE # 137
                                           ; SOURCE LINE # 138
                                           ; SOURCE LINE # 139
00A9 8024              SJMP    ?C0125
                                           ; SOURCE LINE # 140
00AB         ?C0030:
                                           ; SOURCE LINE # 141
00AB E500        E     MOV     A,PM2DataCount
00AD B40205            CJNE    A,#02H,?C0031
                                           ; SOURCE LINE # 142
                                           ; SOURCE LINE # 143
00B0 900000      E     MOV     DPTR,#eEEPROMBank
                                           ; SOURCE LINE # 144
00B3 803B              SJMP    ?C0129
                                           ; SOURCE LINE # 145
00B5         ?C0031:
                                           ; SOURCE LINE # 146
00B5 E500        E     MOV     A,PM2DataCount
00B7 6401              XRL     A,#01H
00B9 6003              JZ      $ + 5H
00BB 020000      R     LJMP    ?C0072
                                           ; SOURCE LINE # 147
                                           ; SOURCE LINE # 148
                                           ; SOURCE LINE # 149
                                           ; SOURCE LINE # 150
                                           ; SOURCE LINE # 151
                                           ; SOURCE LINE # 152
                                           ; SOURCE LINE # 153
                                           ; SOURCE LINE # 154
00BE 803D              SJMP    ?C0127
                                           ; SOURCE LINE # 156
00C0         ?C0033:
                                           ; SOURCE LINE # 157
00C0 E500        E     MOV     A,PM2DataCount
00C2 B40305            CJNE    A,#03H,?C0034
                                           ; SOURCE LINE # 158
                                           ; SOURCE LINE # 159
00C5         ?C0124:
00C5 900000      R     MOV     DPTR,#i
00C8         ?C0126:
                                           ; SOURCE LINE # 160
00C8 8026              SJMP    ?C0129
                                           ; SOURCE LINE # 161
00CA         ?C0034:
C51 COMPILER V8.12   OEM_PM2                                                               09/14/2018 11:08:34 PAGE 16  

                                           ; SOURCE LINE # 162
00CA E500        E     MOV     A,PM2DataCount
00CC B40205            CJNE    A,#02H,?C0035
                                           ; SOURCE LINE # 163
                                           ; SOURCE LINE # 164
00CF         ?C0125:
00CF 900000      E     MOV     DPTR,#eEEPROMAddrsss
00D2         ?C0128:
                                           ; SOURCE LINE # 165
00D2 801C              SJMP    ?C0129
                                           ; SOURCE LINE # 166
00D4         ?C0035:
                                           ; SOURCE LINE # 167
00D4 E500        E     MOV     A,PM2DataCount
00D6 6401              XRL     A,#01H
00D8 6003              JZ      $ + 5H
00DA 020000      R     LJMP    ?C0072
                                           ; SOURCE LINE # 168
                                           ; SOURCE LINE # 169
00DD 900000      E     MOV     DPTR,#eEEPROMBank
00E0 E500        E     MOV     A,PM2Data
00E2 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 170
00E3 900000      E     MOV     DPTR,#eEEPROMAddrsss
                                           ; SOURCE LINE # 171
                                           ; SOURCE LINE # 172
00E6 8039              SJMP    ?C0130
                                           ; SOURCE LINE # 174
00E8         ?C0037:
                                           ; SOURCE LINE # 175
00E8 E500        E     MOV     A,PM2DataCount
00EA B40207            CJNE    A,#02H,?C0038
                                           ; SOURCE LINE # 176
                                           ; SOURCE LINE # 177
00ED 900000      E     MOV     DPTR,#eEEPROMAddrsss
00F0         ?C0129:
00F0 E500        E     MOV     A,PM2Data
00F2 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 178
00F3 22                RET     
                                           ; SOURCE LINE # 179
00F4         ?C0038:
                                           ; SOURCE LINE # 180
00F4 E500        E     MOV     A,PM2DataCount
00F6 6401              XRL     A,#01H
00F8 6003              JZ      $ + 5H
00FA 020000      R     LJMP    ?C0072
                                           ; SOURCE LINE # 181
                                           ; SOURCE LINE # 182
00FD         ?C0127:
00FD 900000      E     MOV     DPTR,#eEEPROMData
0100 E500        E     MOV     A,PM2Data
0102 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 183
0103 900000      E     MOV     DPTR,#LENOVOPMFW_Temp
0106 E0                MOVX    A,@DPTR
0107 4410              ORL     A,#010H
0109 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 184
010A 120000      E     LCALL   Update_EEPROMMark
                                           ; SOURCE LINE # 185
010D 900000      E     MOV     DPTR,#LENOVOPMFW_Temp
C51 COMPILER V8.12   OEM_PM2                                                               09/14/2018 11:08:34 PAGE 17  

0110 E0                MOVX    A,@DPTR
0111 54EF              ANL     A,#0EFH
0113 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 186
0114 E4                CLR     A
0115 FD                MOV     R5,A
0116 7F68              MOV     R7,#068H
0118 020000      E     LJMP    _Data2PortDirect
                                           ; SOURCE LINE # 187
                                           ; SOURCE LINE # 188
                                           ; SOURCE LINE # 190
011B         ?C0040:
                                           ; SOURCE LINE # 191
011B 900000      E     MOV     DPTR,#eEEPROMAddrsss
011E E500        E     MOV     A,PM2Data
0120 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 192
0121         ?C0130:
0121 E0                MOVX    A,@DPTR
0122 FD                MOV     R5,A
0123 7F68              MOV     R7,#068H
0125 020000      E     LJMP    _Cmd_4E
                                           ; SOURCE LINE # 193
                                           ; SOURCE LINE # 195
                                           ; SOURCE LINE # 196
                                           ; SOURCE LINE # 198
0128         ?C0042:
                                           ; SOURCE LINE # 199
0128 E500        E     MOV     A,PM2Data
012A B4A005            CJNE    A,#0A0H,?C0043
012D 7F68              MOV     R7,#068H
012F 120000      E     LCALL   _Cmd_52_A0
0132         ?C0043:
                                           ; SOURCE LINE # 200
0132 E500        E     MOV     A,PM2Data
0134 B4A305            CJNE    A,#0A3H,?C0044
0137 7F68              MOV     R7,#068H
0139 120000      E     LCALL   _Cmd_52_A3
013C         ?C0044:
                                           ; SOURCE LINE # 201
013C E500        E     MOV     A,PM2Data
013E B4A405            CJNE    A,#0A4H,?C0045
0141 7F68              MOV     R7,#068H
0143 120000      E     LCALL   _Cmd_52_A4
0146         ?C0045:
                                           ; SOURCE LINE # 202
0146 E500        E     MOV     A,PM2Data
0148 B4A505            CJNE    A,#0A5H,?C0046
014B 7F68              MOV     R7,#068H
014D 120000      E     LCALL   _Cmd_52_A5
0150         ?C0046:
                                           ; SOURCE LINE # 203
0150 E500        E     MOV     A,PM2Data
0152 B4A605            CJNE    A,#0A6H,?C0047
0155 7F68              MOV     R7,#068H
0157 120000      E     LCALL   _Cmd_52_A6
015A         ?C0047:
                                           ; SOURCE LINE # 204
015A E500        E     MOV     A,PM2Data
015C 64A7              XRL     A,#0A7H
015E 6003              JZ      $ + 5H
0160 020000      R     LJMP    ?C0072
C51 COMPILER V8.12   OEM_PM2                                                               09/14/2018 11:08:34 PAGE 18  

0163 7F68              MOV     R7,#068H
0165 020000      E     LJMP    _Cmd_52_A7
                                           ; SOURCE LINE # 205
                                           ; SOURCE LINE # 207
0168         ?C0049:
                                           ; SOURCE LINE # 208
0168 E500        E     MOV     A,PM2DataCount
016A 6401              XRL     A,#01H
016C 7079              JNZ     ?C0072
                                           ; SOURCE LINE # 209
                                           ; SOURCE LINE # 210
016E 900000      E     MOV     DPTR,#?_Cmd_53?BYTE+03H
0171 E500        E     MOV     A,PM2Data
0173 F0                MOVX    @DPTR,A
0174 AB00        E     MOV     R3,PM2Data1
0176 AD00        E     MOV     R5,PM2Data2
0178 7F68              MOV     R7,#068H
017A 020000      E     LJMP    _Cmd_53
                                           ; SOURCE LINE # 211
                                           ; SOURCE LINE # 212
                                           ; SOURCE LINE # 213
017D         ?C0051:
                                           ; SOURCE LINE # 214
017D E500        E     MOV     A,PM2DataCount
017F 6401              XRL     A,#01H
0181 7064              JNZ     ?C0072
                                           ; SOURCE LINE # 215
                                           ; SOURCE LINE # 216
0183 AF00        E     MOV     R7,PM2Data
0185 020000      E     LJMP    _Cmd_55
                                           ; SOURCE LINE # 217
                                           ; SOURCE LINE # 218
                                           ; SOURCE LINE # 219
                                           ; SOURCE LINE # 220
                                           ; SOURCE LINE # 221
0188         ?C0054:
                                           ; SOURCE LINE # 222
0188 AF00        E     MOV     R7,PM2Data
018A 020000      E     LJMP    _Cmd_58
                                           ; SOURCE LINE # 223
                                           ; SOURCE LINE # 224
018D         ?C0055:
                                           ; SOURCE LINE # 225
018D E4                CLR     A
018E FB                MOV     R3,A
018F AD00        E     MOV     R5,PM2Data
0191 7F68              MOV     R7,#068H
0193 020000      E     LJMP    _Cmd_59
                                           ; SOURCE LINE # 226
                                           ; SOURCE LINE # 227
0196         ?C0056:
                                           ; SOURCE LINE # 228
0196 7F68              MOV     R7,#068H
0198 020000      E     LJMP    _Cmd_5C
                                           ; SOURCE LINE # 229
                                           ; SOURCE LINE # 230
019B         ?C0057:
                                           ; SOURCE LINE # 231
019B AF00        E     MOV     R7,PM2Data
019D 020000      E     LJMP    _Cmd_5D
                                           ; SOURCE LINE # 232
                                           ; SOURCE LINE # 233
C51 COMPILER V8.12   OEM_PM2                                                               09/14/2018 11:08:34 PAGE 19  

01A0         ?C0058:
                                           ; SOURCE LINE # 239
01A0 AF00        E     MOV     R7,PM2Data
01A2 020000      E     LJMP    _Cmd_71
                                           ; SOURCE LINE # 241
                                           ; SOURCE LINE # 242
01A5         ?C0059:
                                           ; SOURCE LINE # 243
01A5 AF00        E     MOV     R7,PM2Data
01A7 020000      E     LJMP    _Cmd_72
                                           ; SOURCE LINE # 244
                                           ; SOURCE LINE # 246
01AA         ?C0060:
                                           ; SOURCE LINE # 247
01AA AD00        E     MOV     R5,PM2Data
01AC 7F68              MOV     R7,#068H
01AE 020000      E     LJMP    _Cmd_7A
                                           ; SOURCE LINE # 248
                                           ; SOURCE LINE # 249
01B1         ?C0061:
                                           ; SOURCE LINE # 250
01B1 E500        E     MOV     A,PM2DataCount
01B3 6401              XRL     A,#01H
01B5 7030              JNZ     ?C0072
                                           ; SOURCE LINE # 251
                                           ; SOURCE LINE # 252
01B7 120000      R     LCALL   L?0158
01BA 020000      E     LJMP    _Cmd_7B
                                           ; SOURCE LINE # 253
                                           ; SOURCE LINE # 254
                                           ; SOURCE LINE # 258
01BD         ?C0063:
                                           ; SOURCE LINE # 259
01BD E500        E     MOV     A,PM2DataCount
01BF 6401              XRL     A,#01H
01C1 7024              JNZ     ?C0072
                                           ; SOURCE LINE # 260
                                           ; SOURCE LINE # 261
01C3 120000      R     LCALL   L?0158
01C6 020000      E     LJMP    _Cmd_7E
                                           ; SOURCE LINE # 262
                                           ; SOURCE LINE # 263
                                           ; SOURCE LINE # 266
01C9         ?C0065:
                                           ; SOURCE LINE # 267
01C9 020000      R     LJMP    PM2_Cmd_80Data
                                           ; SOURCE LINE # 268
                                           ; SOURCE LINE # 269
01CC         ?C0066:
                                           ; SOURCE LINE # 270
01CC 020000      R     LJMP    PM2_Cmd_81Data
                                           ; SOURCE LINE # 271
                                           ; SOURCE LINE # 274
01CF         ?C0067:
                                           ; SOURCE LINE # 275
01CF 020000      R     LJMP    PM2_Cmd_90Data
                                           ; SOURCE LINE # 276
                                           ; SOURCE LINE # 277
01D2         ?C0068:
                                           ; SOURCE LINE # 278
01D2 020000      R     LJMP    PM2_Cmd_91Data
                                           ; SOURCE LINE # 279
C51 COMPILER V8.12   OEM_PM2                                                               09/14/2018 11:08:34 PAGE 20  

                                           ; SOURCE LINE # 282
01D5         ?C0069:
                                           ; SOURCE LINE # 283
01D5 AD00        E     MOV     R5,PM2Data
01D7 7F68              MOV     R7,#068H
01D9 020000      E     LJMP    _Cmd_B0
                                           ; SOURCE LINE # 284
                                           ; SOURCE LINE # 285
01DC         ?C0070:
                                           ; SOURCE LINE # 286
01DC E500        E     MOV     A,PM2DataCount
01DE B40106            CJNE    A,#01H,?C0072
                                           ; SOURCE LINE # 287
                                           ; SOURCE LINE # 288
01E1 120000      R     LCALL   L?0159
01E4 120000      E     LCALL   _Cmd_B3
                                           ; SOURCE LINE # 289
                                           ; SOURCE LINE # 290
                                           ; SOURCE LINE # 291
                                           ; SOURCE LINE # 292
01E7         ?C0072:
01E7 22                RET     
             ; FUNCTION _Hook_68Port (END)

             ; FUNCTION _Hook_6CPort (BEGIN)
                                           ; SOURCE LINE # 298
;---- Variable 'PM2Cmd' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 299
                                           ; SOURCE LINE # 301
0000 EF                MOV     A,R7
0001 120000      E     LCALL   ?C?CCASE
0004 0000        R     DW      ?C0074
0006 40                DB      040H
0007 0000        R     DW      ?C0075
0009 41                DB      041H
000A 0000        R     DW      ?C0076
000C 42                DB      042H
000D 0000        R     DW      ?C0077
000F 43                DB      043H
0010 0000        R     DW      ?C0078
0012 44                DB      044H
0013 0000        R     DW      ?C0079
0015 45                DB      045H
0016 0000        R     DW      ?C0080
0018 46                DB      046H
0019 0000        R     DW      ?C0081
001B 47                DB      047H
001C 0000        R     DW      ?C0082
001E 49                DB      049H
001F 0000        R     DW      ?C0083
0021 4A                DB      04AH
0022 0000        R     DW      ?C0084
0024 4B                DB      04BH
0025 0000        R     DW      ?C0085
0027 4C                DB      04CH
0028 0000        R     DW      ?C0112
002A 4D                DB      04DH
002B 0000        R     DW      ?C0087
002D 4E                DB      04EH
002E 0000        R     DW      ?C0088
0030 4F                DB      04FH
0031 0000        R     DW      ?C0089
C51 COMPILER V8.12   OEM_PM2                                                               09/14/2018 11:08:34 PAGE 21  

0033 50                DB      050H
0034 0000        R     DW      ?C0090
0036 51                DB      051H
0037 0000        R     DW      ?C0091
0039 52                DB      052H
003A 0000        R     DW      ?C0092
003C 53                DB      053H
003D 0000        R     DW      ?C0093
003F 55                DB      055H
0040 0000        R     DW      ?C0095
0042 58                DB      058H
0043 0000        R     DW      ?C0096
0045 59                DB      059H
0046 0000        R     DW      ?C0098
0048 5D                DB      05DH
0049 0000        R     DW      ?C0099
004B 5E                DB      05EH
004C 0000        R     DW      ?C0100
004E 5F                DB      05FH
004F 0000        R     DW      ?C0112
0051 71                DB      071H
0052 0000        R     DW      ?C0102
0054 72                DB      072H
0055 0000        R     DW      ?C0103
0057 75                DB      075H
0058 0000        R     DW      ?C0104
005A 7A                DB      07AH
005B 0000        R     DW      ?C0112
005D 7B                DB      07BH
005E 0000        R     DW      ?C0106
0060 7C                DB      07CH
0061 0000        R     DW      ?C0107
0063 7D                DB      07DH
0064 0000        R     DW      ?C0112
0066 7E                DB      07EH
0067 0000        R     DW      ?C0109
0069 80                DB      080H
006A 0000        R     DW      ?C0112
006C 81                DB      081H
006D 0000        R     DW      ?C0111
006F 90                DB      090H
0070 0000        R     DW      ?C0112
0072 91                DB      091H
0073 0000        R     DW      ?C0113
0075 B0                DB      0B0H
0076 0000        R     DW      ?C0114
0078 B1                DB      0B1H
0079 0000        R     DW      ?C0115
007B B2                DB      0B2H
007C 0000        R     DW      ?C0112
007E B3                DB      0B3H
007F 0000        R     DW      ?C0117
0081 DC                DB      0DCH
0082 0000              DW      00H
0084 0000        R     DW      ?C0118
                                           ; SOURCE LINE # 302
                                           ; SOURCE LINE # 303
0086         ?C0074:
                                           ; SOURCE LINE # 304
                                           ; SOURCE LINE # 305
0086 8078              SJMP    ?C0155
                                           ; SOURCE LINE # 306
C51 COMPILER V8.12   OEM_PM2                                                               09/14/2018 11:08:34 PAGE 22  

0088         ?C0075:
                                           ; SOURCE LINE # 307
0088         ?C0131:
                                           ; SOURCE LINE # 308
0088 8076              SJMP    ?C0155
                                           ; SOURCE LINE # 309
008A         ?C0076:
                                           ; SOURCE LINE # 310
008A         ?C0132:
                                           ; SOURCE LINE # 311
008A 8074              SJMP    ?C0155
                                           ; SOURCE LINE # 312
008C         ?C0077:
                                           ; SOURCE LINE # 313
008C         ?C0133:
                                           ; SOURCE LINE # 314
008C 8072              SJMP    ?C0155
                                           ; SOURCE LINE # 315
008E         ?C0078:
                                           ; SOURCE LINE # 316
008E 7F68              MOV     R7,#068H
0090 020000      E     LJMP    _Cmd_44
                                           ; SOURCE LINE # 317
                                           ; SOURCE LINE # 318
0093         ?C0079:
                                           ; SOURCE LINE # 319
0093         ?C0134:
                                           ; SOURCE LINE # 320
0093 806B              SJMP    ?C0155
                                           ; SOURCE LINE # 321
0095         ?C0080:
                                           ; SOURCE LINE # 322
0095         ?C0135:
                                           ; SOURCE LINE # 323
0095 8069              SJMP    ?C0155
                                           ; SOURCE LINE # 324
0097         ?C0081:
                                           ; SOURCE LINE # 325
0097         ?C0136:
                                           ; SOURCE LINE # 326
0097 8067              SJMP    ?C0155
                                           ; SOURCE LINE # 327
0099         ?C0082:
                                           ; SOURCE LINE # 328
0099 7F68              MOV     R7,#068H
009B 020000      E     LJMP    _Cmd_49
                                           ; SOURCE LINE # 329
                                           ; SOURCE LINE # 331
009E         ?C0083:
                                           ; SOURCE LINE # 332
009E         ?C0137:
                                           ; SOURCE LINE # 333
009E 8060              SJMP    ?C0155
                                           ; SOURCE LINE # 335
00A0         ?C0084:
                                           ; SOURCE LINE # 336
00A0 750004      E     MOV     PM2DataCount,#04H
                                           ; SOURCE LINE # 337
00A3 22                RET     
                                           ; SOURCE LINE # 338
00A4         ?C0085:
                                           ; SOURCE LINE # 339
C51 COMPILER V8.12   OEM_PM2                                                               09/14/2018 11:08:34 PAGE 23  

                                           ; SOURCE LINE # 340
00A4 8014              SJMP    ?C0139
                                           ; SOURCE LINE # 341
                                           ; SOURCE LINE # 344
00A6         ?C0087:
                                           ; SOURCE LINE # 345
00A6         ?C0138:
                                           ; SOURCE LINE # 346
00A6 8058              SJMP    ?C0155
                                           ; SOURCE LINE # 347
00A8         ?C0088:
                                           ; SOURCE LINE # 348
00A8 020000      E     LJMP    Erase_EEPROMAll
                                           ; SOURCE LINE # 349
                                           ; SOURCE LINE # 351
00AB         ?C0089:
                                           ; SOURCE LINE # 352
00AB 900000      E     MOV     DPTR,#ACPI_HOTKEY
00AE E0                MOVX    A,@DPTR
00AF 4440              ORL     A,#040H
00B1 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 353
00B2 22                RET     
                                           ; SOURCE LINE # 355
00B3         ?C0090:
                                           ; SOURCE LINE # 356
00B3 7F68              MOV     R7,#068H
00B5 020000      E     LJMP    _Cmd_51
                                           ; SOURCE LINE # 357
                                           ; SOURCE LINE # 358
00B8         ?C0091:
                                           ; SOURCE LINE # 359
00B8         ?C0141:
                                           ; SOURCE LINE # 360
00B8 8046              SJMP    ?C0155
                                           ; SOURCE LINE # 361
00BA         ?C0092:
                                           ; SOURCE LINE # 362
00BA         ?C0139:
00BA 750003      E     MOV     PM2DataCount,#03H
                                           ; SOURCE LINE # 363
00BD 22                RET     
                                           ; SOURCE LINE # 364
00BE         ?C0093:
                                           ; SOURCE LINE # 365
00BE         ?C0142:
                                           ; SOURCE LINE # 366
00BE 8040              SJMP    ?C0155
                                           ; SOURCE LINE # 367
                                           ; SOURCE LINE # 368
                                           ; SOURCE LINE # 369
00C0         ?C0095:
                                           ; SOURCE LINE # 370
00C0         ?C0143:
                                           ; SOURCE LINE # 371
00C0 803E              SJMP    ?C0155
                                           ; SOURCE LINE # 372
00C2         ?C0096:
                                           ; SOURCE LINE # 373
00C2         ?C0144:
                                           ; SOURCE LINE # 374
00C2 803C              SJMP    ?C0155
C51 COMPILER V8.12   OEM_PM2                                                               09/14/2018 11:08:34 PAGE 24  

                                           ; SOURCE LINE # 375
                                           ; SOURCE LINE # 376
                                           ; SOURCE LINE # 377
00C4         ?C0098:
                                           ; SOURCE LINE # 378
00C4         ?C0145:
                                           ; SOURCE LINE # 379
00C4 803A              SJMP    ?C0155
                                           ; SOURCE LINE # 381
00C6         ?C0099:
                                           ; SOURCE LINE # 383
00C6 020000      E     LJMP    Unlock_ShipMode
                                           ; SOURCE LINE # 385
                                           ; SOURCE LINE # 386
00C9         ?C0100:
                                           ; SOURCE LINE # 388
00C9 900000      E     MOV     DPTR,#ShipModeEn
00CC 74A5              MOV     A,#0A5H
00CE F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 389
00CF 7D5A              MOV     R5,#05AH
00D1 7F68              MOV     R7,#068H
00D3 120000      E     LCALL   _Data2PortDirect
                                           ; SOURCE LINE # 390
00D6 7FA5              MOV     R7,#0A5H
00D8 020000      E     LJMP    _RamDebug
                                           ; SOURCE LINE # 392
                                           ; SOURCE LINE # 394
                                           ; SOURCE LINE # 397
00DB         ?C0102:
                                           ; SOURCE LINE # 398
00DB         ?C0146:
                                           ; SOURCE LINE # 399
00DB 8023              SJMP    ?C0155
                                           ; SOURCE LINE # 401
00DD         ?C0103:
                                           ; SOURCE LINE # 402
00DD 020000      E     LJMP    Cmd_75
                                           ; SOURCE LINE # 403
                                           ; SOURCE LINE # 406
00E0         ?C0104:
                                           ; SOURCE LINE # 407
00E0         ?C0148:
                                           ; SOURCE LINE # 408
00E0 801E              SJMP    ?C0155
                                           ; SOURCE LINE # 409
                                           ; SOURCE LINE # 414
00E2         ?C0106:
                                           ; SOURCE LINE # 415
00E2 900000      E     MOV     DPTR,#Bioswatchdog
00E5 7401              MOV     A,#01H
00E7 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 416
00E8 E4                CLR     A
00E9 900000      E     MOV     DPTR,#Bioswatchdogtime
                                           ; SOURCE LINE # 417
                                           ; SOURCE LINE # 418
00EC 8004              SJMP    ?C0151
                                           ; SOURCE LINE # 419
00EE         ?C0107:
                                           ; SOURCE LINE # 420
00EE E4                CLR     A
C51 COMPILER V8.12   OEM_PM2                                                               09/14/2018 11:08:34 PAGE 25  

00EF 900000      E     MOV     DPTR,#Bioswatchdog
00F2         ?C0151:
00F2 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 421
00F3 7D55              MOV     R5,#055H
00F5 7F68              MOV     R7,#068H
00F7 020000      E     LJMP    _Data2PortDirect
                                           ; SOURCE LINE # 422
                                           ; SOURCE LINE # 426
                                           ; SOURCE LINE # 431
00FA         ?C0109:
                                           ; SOURCE LINE # 432
00FA         ?C0149:
                                           ; SOURCE LINE # 433
00FA 8004              SJMP    ?C0155
                                           ; SOURCE LINE # 434
                                           ; SOURCE LINE # 439
00FC         ?C0111:
                                           ; SOURCE LINE # 440
00FC         ?C0153:
                                           ; SOURCE LINE # 441
00FC 8002              SJMP    ?C0155
                                           ; SOURCE LINE # 442
00FE         ?C0112:
                                           ; SOURCE LINE # 443
00FE         ?C0154:
                                           ; SOURCE LINE # 444
00FE 8012              SJMP    ?C0156
                                           ; SOURCE LINE # 446
0100         ?C0113:
                                           ; SOURCE LINE # 447
0100         ?C0155:
0100 750001      E     MOV     PM2DataCount,#01H
                                           ; SOURCE LINE # 448
0103 22                RET     
                                           ; SOURCE LINE # 450
0104         ?C0114:
                                           ; SOURCE LINE # 451
0104 7DB1              MOV     R5,#0B1H
0106 7F68              MOV     R7,#068H
0108 020000      E     LJMP    _Cmd_B1
                                           ; SOURCE LINE # 452
                                           ; SOURCE LINE # 453
010B         ?C0115:
                                           ; SOURCE LINE # 454
010B 7DB2              MOV     R5,#0B2H
010D 7F68              MOV     R7,#068H
010F 020000      E     LJMP    _Cmd_B2
                                           ; SOURCE LINE # 455
                                           ; SOURCE LINE # 457
0112         ?C0156:
0112 750002      E     MOV     PM2DataCount,#02H
                                           ; SOURCE LINE # 459
0115 22                RET     
                                           ; SOURCE LINE # 461
0116         ?C0117:
                                           ; SOURCE LINE # 462
0116 120000      E     LCALL   PM2_6CCmd_DC
                                           ; SOURCE LINE # 463
                                           ; SOURCE LINE # 465
                                           ; SOURCE LINE # 466
0119         ?C0118:
C51 COMPILER V8.12   OEM_PM2                                                               09/14/2018 11:08:34 PAGE 26  

0119 22                RET     
             ; FUNCTION _Hook_6CPort (END)

             ; FUNCTION service_pci3 (BEGIN)
                                           ; SOURCE LINE # 471
                                           ; SOURCE LINE # 472
                                           ; SOURCE LINE # 474
0000 900000      E     MOV     DPTR,#PM2STS
0003 E0                MOVX    A,@DPTR
0004 30E132            JNB     ACC.1,?C0120
                                           ; SOURCE LINE # 475
                                           ; SOURCE LINE # 477
0007         ?C0119:
                                           ; SOURCE LINE # 478
0007 900000      E     MOV     DPTR,#PM2STS
000A E0                MOVX    A,@DPTR
000B 30E311            JNB     ACC.3,?C0121
                                           ; SOURCE LINE # 479
                                           ; SOURCE LINE # 480
000E E4                CLR     A
000F F500        E     MOV     PM2DataCount,A
                                           ; SOURCE LINE # 481
0011 900000      E     MOV     DPTR,#PM2DI
0014 E0                MOVX    A,@DPTR
0015 F500        E     MOV     PM2Cmd,A
                                           ; SOURCE LINE # 482
0017 120000      E     LCALL   EnablePMCIBFInt
                                           ; SOURCE LINE # 483
001A AF00        E     MOV     R7,PM2Cmd
001C 020000      R     LJMP    _Hook_6CPort
                                           ; SOURCE LINE # 484
001F         ?C0121:
                                           ; SOURCE LINE # 486
                                           ; SOURCE LINE # 487
001F 850000      E     MOV     PM2Data2,PM2Data1
                                           ; SOURCE LINE # 488
0022 850000      E     MOV     PM2Data1,PM2Data
                                           ; SOURCE LINE # 489
0025 900000      E     MOV     DPTR,#PM2DI
0028 E0                MOVX    A,@DPTR
0029 F500        E     MOV     PM2Data,A
                                           ; SOURCE LINE # 490
002B 120000      E     LCALL   EnablePMCIBFInt
                                           ; SOURCE LINE # 491
002E E500        E     MOV     A,PM2DataCount
0030 6007              JZ      ?C0120
                                           ; SOURCE LINE # 492
                                           ; SOURCE LINE # 493
0032 AF00        E     MOV     R7,PM2Cmd
0034 120000      R     LCALL   _Hook_68Port
                                           ; SOURCE LINE # 494
0037 1500        E     DEC     PM2DataCount
                                           ; SOURCE LINE # 495
                                           ; SOURCE LINE # 496
                                           ; SOURCE LINE # 498
0039         ?C0120:
0039 22                RET     
             ; FUNCTION service_pci3 (END)



MODULE INFORMATION:   STATIC OVERLAYABLE
C51 COMPILER V8.12   OEM_PM2                                                               09/14/2018 11:08:34 PAGE 27  

   CODE SIZE        =    971    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----       1
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
